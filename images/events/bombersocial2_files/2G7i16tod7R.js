/*!CK:697625084!*//*1414406985,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["IZsPX"]); }

__d("BroadcastRequestParam",[],function(a,b,c,d,e,f){e.exports={ANSWER_IDS:"answer_ids",BROADCAST_REQUEST_ID:"broadcast_request_id",CHECKED_IDS:"checked_ids",COMMENT_TOKEN:"comment_token",COMPOSER_TOKEN_IDS:"composer_token_ids",DESCRIPTION_DOM_ID:"description_dom_id",DOM_ID:"dom_id",ENTITY_TITLE:"entity_title",ENTITY_TOKEN:"entity_token",ERROR_CODE:"error_code",HAS_VIEWER_VOTED:"has_viewer_voted",QUERIED_RECIPIENTS:"queried_recipients",QUERY:"q",RECIPIENT_IDS:"recipient_ids",SEND_REQUEST:"send_request",SOURCE:"source",SOURCE_OBJ_ID:"source_obj_id",SUGGESTION_CARD_ID:"suggestion_card_id",SUGGESTION_ID:"suggestion_id",SUGGESTION_IDS:"add_suggestions_ids",SUGGESTION_ROW_ID:"suggestion_row_id",TARGET_ID:"target_id",VOTE_ACTION:"vote_action",EXISTING_IDS:"existing_ids",VALUE:"value",BROADCAST_REQUEST_TYPE:"broadcast_request_type",COMPOSER_TEXT:"composer_text"};},null);
__d("ComposedBlockType",[],function(a,b,c,d,e,f){e.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8};},null);
__d("ComposedEntityMutability",[],function(a,b,c,d,e,f){e.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null);
__d("ComposedEntityType",[],function(a,b,c,d,e,f){e.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4};},null);
__d("ComposedInlineStyle",[],function(a,b,c,d,e,f){e.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8};},null);
__d("UFITranslationConstants",[],function(a,b,c,d,e,f){e.exports={BING_PAGE_URL:"http:\/\/bing.com\/translator",BING_TRANSLATOR_APP:"bing",FB_TRANSLATOR_APP:"fb"};},null);
__d("ClickPointIdentifiersDEPRECATED",[],function(a,b,c,d,e,f){var g={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(h){return '{"ua_id":"'+h+'"}';}};e.exports=g;},null);
__d("UFIBlingItem.react",["React","NumberFormat","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:g.PropTypes.object.isRequired,count:g.PropTypes.number.isRequired,allowText:g.PropTypes.bool,className:g.PropTypes.string,iconClassName:g.PropTypes.string,itemKey:g.PropTypes.string},render:function(){var m=k(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),n=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),o='';if(this.props.allowText)switch(this.props.itemKey){case 'reshare':if(this.props.contextArgs.reshareedu)o=this.props.count===1?' Share':' Shares';break;}return (g.createElement("span",null,g.createElement("i",{className:m}),g.createElement("span",{className:"UFIBlingBoxText"},j._({"":"{count}"," Share":"{count} Share"," Shares":"{count} Shares"},[j.param("count",n),j['enum'](o,{"":""," Share":" Share"," Shares":" Shares"})]))));}});e.exports=l;},null);
__d("UFILikeLink.react",["AccessibilityLogger","React","TrackingNodes","tx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:h.PropTypes.bool,onClick:h.PropTypes.func},_handleClick:function(event){g.logLikeEnterPress();if(this.props.onClick)this.props.onClick(event);},render:function(){var l=this.props.likeAction?"Like":"Unlike",m=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),n=this.props.likeAction?"Like this":"Unlike this";return (h.createElement("span",null,h.createElement("a",{className:"UFILikeLink accessible_elem",href:"#",role:"button",'aria-live':"polite",title:n,onClick:this._handleClick},l),h.createElement("a",{className:"UFILikeLink",href:"#",role:"button",'aria-live':"polite",title:n,onClick:this.props.onClick,'data-ft':m},l)));}});e.exports=k;},null);
__d("UFIShareLink.react",["React","TrackingNodes","fbt"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'UFIShareLink',propTypes:{href:g.PropTypes.oneOfType([g.PropTypes.object,g.PropTypes.string]).isRequired},render:function(){var k="Send this to friends or post it on your timeline.",l='{ "tn": "'+h.encodeTN(h.types.SHARE_LINK)+'", "type": 25 }';return (g.createElement("a",{className:"share_action_link",'data-ft':l,href:this.props.href,rel:"dialog",title:k},"Share"));}});e.exports=j;},null);
__d("UFISubscribeLink.react",["React","fbt"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){var j=this.props.subscribeAction?"Get Notifications":"Stop Notifications",k=this.props.subscribeAction?"Get a notification whenever someone comments.":"Stop getting notifications when someone comments.";return (g.createElement("a",{className:"UFISubscribeLink",href:"#",role:"button",'aria-live':"polite",title:k,onClick:this.props.onClick},j));}});e.exports=i;},null);
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f,g){var h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;},null);
__d("UFITimelineBlingBox.react",["ProfileBrowserLink","ProfileBrowserTypes","React","UFIBlingItem.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:i.PropTypes.object.isRequired,'data-ft':i.PropTypes.string,'data-gt':i.PropTypes.string,actorid:i.PropTypes.any,commentOnClick:i.PropTypes.func,comments:i.PropTypes.number,enableShowComments:i.PropTypes.bool,enableShowLikes:i.PropTypes.bool,feedbackFBID:i.PropTypes.any,likes:i.PropTypes.number,reshares:i.PropTypes.number},render:function(){var o=[];if(this.props.likes&&this.props.enableShowLikes){var p=this._getProfileBrowserURI(),q="See who likes this",r=i.createElement("a",{ajaxify:p.dialog,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':"tooltip",'data-tooltip-alignh':"right",'data-tooltip-uri':this._getLikeToolTipURI(),href:p.page,key:"like",rel:"dialog",role:"button",title:q},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.likes,iconClassName:"UFIBlingBoxTimelineLikeIcon",itemKey:"like"}));o.push(r);}if(this.props.comments&&this.props.enableShowComments){var s="Show comments",t=i.createElement("a",{'aria-label':s,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:"#",key:"comment",onClick:this.props.commentOnClick},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.comments,iconClassName:"UFIBlingBoxTimelineCommentIcon",itemKey:"comment"}));o.push(t);}if(this.props.reshares){var u="Show shares",v=this._getShareViewURI(),w=i.createElement("a",{ajaxify:v.dialog,'aria-label':u,className:this._getItemClassName(o),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:v.page,key:"reshare",rel:"async"},i.createElement(j,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,iconClassName:"UFIBlingBoxTimelineReshareIcon",itemKey:"reshare"}));o.push(w);}return (i.createElement("span",null,o));},_getItemClassName:function(o){return ((o.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem"));},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return o.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var o=h.LIKES,p={id:this.props.feedbackFBID,actorid:this.props.actorid},q=g.constructDialogURI(o,p),r=g.constructPageURI(o,p),s={dialog:q.toString(),page:r.toString()};return s;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),p=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),q={dialog:o.toString(),page:p.toString()};return q;}}});e.exports=n;},null);
__d("UFICommentList",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=l({actorID:true});function n(o){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new h();this.feedbackTargetID=o;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};this.orderReversed=false;k.getFeedbackTarget(this.feedbackTargetID,function(p){this.actorID=p.actorforpost;this.basePermalink=p.permalink;this.orderReversed=p.isranked;}.bind(this));}n.prototype.addComment=function(o,p,q){var r=p&&g.isExistingClientID(p),s=this.dataSource.getAllResources(),t={};for(var u in s){var v=s[u];t[v]=u;}if(r&&p in t){t[o]=t[p];var w=t[p];this.dataSource.setResource(w,o);}else if(!t[o]){var x=this.count;this.count++;t[o]=x;this.dataSource.setResource(x,o);}if(q)this.commentPermalinks[o]=this.buildCommentPermalink(o,q,t[o]);i.didUpdateFeedback(this.feedbackTargetID);};n.prototype.addCommentIDs=function(o,p,q){var r={};for(var s=0;s<p;s++)r[o+s]=q[s]||j.unavailableCommentKey;this.dataSource.addResourcesAndExecute(r);i.didUpdateFeedback(this.feedbackTargetID);return this;};n.prototype.getComments=function(o,p,q,r){var s=[];for(var t=0;t<p;t++)s.push(o+t);var u=this.dataSource.getUnavailableResourcesFromRequest(s);if(u.length){var v=Math.min.apply(Math,u),w=Math.max.apply(Math,u),x=v,y=w-v+1;if(x<this.lastRequestedOffset||(x+y)>(this.lastRequestedOffset+this.lastRequestedLength)){this.lastRequestedOffset=x;this.lastRequestedLength=y;this.fetchComments(x,y,q);}}else this.dataSource.deferredExecuteOrEnqueue(s).addCallback(this.deferredCallback.bind(this,o,p,r));};n.prototype.fetchComments=function(o,p,q){};n.prototype.deferredCallback=function(o,p,q,r){};n.prototype.reset=function(){var o=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return o;};n.prototype.deleteComment=function(o){if(!(o in this.deletedComments)){this.deletedComments[o]=true;this.deletedCount++;}};n.prototype.updateCommentCount=function(o){this.count=o;this.deletedCount=0;return this;};n.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};n.prototype.getCommentCount=function(){return this.count;};n.prototype.getDeletedCount=function(){return this.deletedCount;};n.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};n.prototype.getBasePermalink=function(){return this.basePermalink;};n.prototype.buildCommentPermalink=function(o,p,q){};n.prototype.getPermalinkForComment=function(o){return this.commentPermalinks[o];};n.isValidContextPropertyForReset=function(o){return o in m;};e.exports=n;},null);
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f,g){var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;},null);
__d("UFIToplevelCommentList",["ActorURI","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFIComments","UFIConstants","UFIReplyCommentList","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o={};for(var p in j)if(j.hasOwnProperty(p))r[p]=j[p];var q=j===null?null:j.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=j;r.getCommentList=function(t,u){if(!o[t])o[t]={};if(!o[t][u]){var v=new r(t,u),w=r.getCommentListsForFeedbackTargetID(t);if(w.length)v.updateCommentCount(w[0].getCommentCount());o[t][u]=v;}return o[t][u];};r.getCommentListsForFeedbackTargetID=function(t){var u=[],v=o[t]||{};for(var w in v)u.push(v[w]);return u;};r.getCommentListForFeedbackTargetID_UNSAFE=function(t){var u=r.getCommentListsForFeedbackTargetID(t);return u.length?u[0]:null;};r.resetCommentListsForFeedbackTargetID=function(t){if(!o[t])return;var u={};for(var v in o[t]){var w=o[t][v],x=w.reset();for(var y in x){var z=x[y];u[z]=true;}}k.resetComments(u);};r.resetCommentListsWithContext=function(t,u){if(!o[t])return;var v={};for(var w in o[t]){var x=o[t][w];for(var y in u)if(this.isValidContextPropertyForReset(y))x[y]=u[y];var z=x.reset();for(var aa in z){var ba=z[aa];v[ba]=true;m.resetWithContext(t,ba,u);}}k.resetComments(v);};function r(t,u){j.call(this,t);this.orderingMode=u;}r.prototype.fetchComments=function(t,u,v){var w={ft_ent_identifier:this.feedbackTargetID,viewas:v,source:null,offset:t,length:u,orderingmode:this.orderingMode};if(!v)w[g.PARAMETER_ACTOR]=this.actorID;h.trySend('/ajax/ufi/comment_fetch.php',w);};r.prototype.deferredCallback=function(t,u,v,w){var x={},y=t,z=t+u-1;for(var aa=0;aa<u;aa++){var ba=this.orderReversed?z-aa:y+aa,ca=k.getComment(w[ba]);if(ca)x[t+aa]=ca;}v(x);};r.prototype.getOrderingMode=function(){return this.orderingMode;};r.prototype.buildCommentPermalink=function(t,u,v){if(!this.basePermalink)return null;var w=Math.floor((this.count-v-1)/l.defaultPageSize)*l.defaultPageSize;return (n(this.basePermalink).addQueryData({comment_id:u,offset:w,total_comments:this.count}).toString());};h.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:h.IMMEDIATE}});function s(t){var u=k.getComment(t.commentid),v=u.id,w=u.ftentidentifier,x=u.parentcommentid;if(x)return;if(u.status!==l.UFIStatus.DELETED&&u.status!==l.UFIStatus.FAILED_ADD)r.getCommentListsForFeedbackTargetID(w).forEach(function(y){y.deleteComment(v);});}i.subscribe('update-actions',function(t,u){if(u.actions&&u.actions.length)for(var v=0;v<u.actions.length;v++){var w=u.actions[v];switch(w.actiontype){case l.UFIActionType.DELETE_COMMENT:s(w);break;}}});i.subscribe('update-comment-lists',function(t,u){var v=u.commentlists;if(v&&v.comments&&Object.keys(v).length)for(var w in v.comments)for(var x in v.comments[w]){var y=v.comments[w][x];r.getCommentList(w,x).addCommentIDs(y.range.offset,y.range.length,y.values);}});i.subscribe('update-comments',function(t,u){if(u.comments&&u.comments.length)u.comments.forEach(function(v){if(v.parentcommentid)return;var w=v.ftentidentifier;r.getCommentListsForFeedbackTargetID(w).forEach(function(x){x.addComment(v.id,v.clientid,v.legacyid);});});});i.subscribe('update-feedback',function(t,u){if(u.feedbacktargets&&u.feedbacktargets.length)u.feedbacktargets.forEach(function(v){var w=v.entidentifier,x=v.defaultcommentorderingmode,y={};if(x)y[x]=true;if(v.orderingmodes)v.orderingmodes.forEach(function(aa){y[aa.value]=true;});for(var z in y)r.getCommentList(w,z).updateCommentCount(v.commentcount);});});e.exports=r;},null);
__d("XBroadcastRequestAddComposerTokenAsyncControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/profile\/broadcast_request\/async\/add_composer_token\/",{comment_token:{type:"String"},source_obj_id:{type:"Int"}});},null);
__d("UFIUserActions",["ActorURI","AsyncResponse","BroadcastRequestParam","CLoggerX","ClientIDs","ImmutableObject","Nectar","UFICentralUpdates","UFIToplevelCommentList","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","XBroadcastRequestAddComposerTokenAsyncControllerURIBuilder","collectDataAttributes","copyProperties","tx","UnicodeBidi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y={BAN:'ban',UNDO_BAN:'undo_ban'},z={changeActor:function(ma,na){r.getFeedbackTarget(ma,function(oa){o.resetCommentListsWithContext(ma,{actorID:na});var pa={from_actor_id:oa.actorforpost,ft_ent_identifier:ma};pa[g.PARAMETER_ACTOR]=na;s.trySend('/ajax/ufi/actor_change.php',pa);});},changeCommentLike:function(ma,na,oa){var pa=p.getComment(ma);if(pa.hasviewerliked!=na){var qa=aa(oa.target),ra=na?1:-1,sa={commentid:ma,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:na,likecount:pa.likecount+ra};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[sa]});r.getFeedbackTarget(pa.ftentidentifier,function(ta){var ua={};ua[g.PARAMETER_ACTOR]=ta.actorforpost;s.trySend('/ajax/ufi/comment_like.php',v({comment_id:ma,legacy_id:pa.legacyid,like_action:na,ft_ent_identifier:pa.ftentidentifier,source:oa.source,client_id:k.getNewClientID()},qa,ua));});}},changeAlsoRecommend:function(ma,na){var oa=p.getComment(ma.id);if(oa.hasviewerrecommended!==na){var pa={};pa[i.COMMENT_TOKEN]=ma.id;pa[i.SOURCE_OBJ_ID]=ma.ftentidentifier;s.trySend(new t().getURI(),pa);}},addComment:function(ma,na,oa,pa){r.getFeedbackTarget(ma,function(qa){var ra=aa(pa.target),sa=k.getNewClientID();if(!qa.actorforpost)return;var ta=x.isDirectionLTR(na)?'ltr':'rtl',ua={ftentidentifier:ma,body:{text:na,dir:ta},author:qa.actorforpost,id:sa,islocal:true,ufiinstanceid:pa.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:pa.replyid,attachment:pa.attachedsticker,photo_comment:pa.attachedphoto,timestamp:{time:Date.now(),text:"a few seconds ago"}},va={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:true,entidentifier:ma},wa={actiontype:q.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:qa.targetfbid};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[ua],actions:[va,wa]});var xa=null;if(pa.replyid)xa=(p.getComment(pa.replyid)).fbid;var ya=j.getCLParamsForTarget(pa.target,xa),za={};za[g.PARAMETER_ACTOR]=qa.actorforpost;s.trySend('/ajax/ufi/add_comment.php',v({ft_ent_identifier:qa.entidentifier,comment_text:oa,source:pa.source,client_id:sa,reply_fbid:xa,parent_comment_id:pa.replyid,timeline_log_data:pa.timelinelogdata,rootid:pa.rootid,clp:ya,attached_sticker_fbid:pa.attachedsticker?pa.attachedsticker.fbid:0,attached_photo_fbid:pa.attachedphoto?pa.attachedphoto.fbid:0,giftoccasion:pa.giftoccasion,recommendation_ids:pa.recommendationIDs?pa.recommendationIDs:[]},ra,za));});},_hasCommentTextChanged:function(ma,na){return ma.body&&ma.body.text!=na;},_hasCommentPhotoChanged:function(ma,na){return ((ma||na)&&!(ma&&na))||(ma&&na&&(ma.fbid!=na.fbid));},_hasCommentStickerChanged:function(ma,na){return ((ma||na)&&!(ma&&na))||(ma&&(ma.type=="sticker")&&na&&(ma.fbid!=na.fbid));},editComment:function(ma,na,oa,pa){var qa=aa(pa.target),ra=p.getComment(ma),sa=this._hasCommentTextChanged(ra,na)||this._hasCommentPhotoChanged(ra.photo_comment,pa.attachedPhoto)||this._hasCommentStickerChanged(ra.attachment,pa.attachedSticker);ra=l.set(ra,{status:q.UFIStatus.PENDING_EDIT,body:{text:na},editnux:null,attachment:pa.attachedSticker,photo_comment:pa.attachedPhoto});if(sa)ra=l.set(ra,{originalTimestamp:ra.timestamp.time,timestamp:{time:Date.now(),text:"a few seconds ago"}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[ra]});r.getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[g.PARAMETER_ACTOR]=ta.actorforpost;s.trySend('/ajax/ufi/edit_comment.php',v({ft_ent_identifier:ra.ftentidentifier,comment_text:oa,source:pa.source,comment_id:ra.id,parent_comment_id:ra.parentcommentid,attached_sticker_fbid:pa.attachedSticker?pa.attachedSticker.fbid:0,attached_photo_fbid:pa.attachedPhoto?pa.attachedPhoto.fbid:0},qa,ua));});},translateComment:function(ma,na){s.trySend('/ajax/ufi/translate_comment.php',{ft_ent_identifier:ma.ftentidentifier,comment_ids:[ma.id],source:na.source});},setHideAsSpam:function(ma,na,oa){var pa=aa(oa.target),qa=p.getComment(ma),ra={commentid:ma,actiontype:q.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:na};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});s.trySend('/ajax/ufi/comment_spam.php',v({comment_id:ma,spam_action:na,ft_ent_identifier:qa.ftentidentifier,source:oa.source},pa));},removeComment:function(ma,na){var oa=aa(na.target),pa=p.getComment(ma),qa={actiontype:q.UFIActionType.DELETE_COMMENT,commentid:ma,oneclick:na.oneclick};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[qa]});r.getFeedbackTarget(pa.ftentidentifier,function(ra){var sa={};sa[g.PARAMETER_ACTOR]=ra.actorforpost;s.trySend('/ajax/ufi/delete_comment.php',v({comment_id:pa.id,comment_legacyid:pa.legacyid,ft_ent_identifier:pa.ftentidentifier,one_click:na.oneclick,source:na.source,client_id:k.getNewClientID(),timeline_log_data:na.timelinelogdata},oa,sa));});},banUser:function(ma,na,oa,pa){var qa=oa?y.BAN:y.UNDO_BAN;s.trySend('/ajax/ufi/ban_user.php',{page_id:na,commenter_id:ma.author,action:qa,comment_id:ma.id,client_side:true});},changeLike:function(ma,na,oa){r.getFeedbackTarget(ma,function(pa){var qa=aa(oa.target);if(pa.hasviewerliked!==na){var ra=na?1:-1,sa={actiontype:q.UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:na,likecount:pa.likecount+ra,entidentifier:ma,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[sa]});var ta={};ta[g.PARAMETER_ACTOR]=pa.actorforpost;s.trySend('/ajax/ufi/like.php',v({like_action:na,ft_ent_identifier:ma,source:oa.source,client_id:k.getNewClientID(),rootid:oa.rootid,giftoccasion:oa.giftoccasion},qa,ta));}});},changeSubscribe:function(ma,na,oa){r.getFeedbackTarget(ma,function(pa){var qa=aa(oa.target);if(pa.hasviewersubscribed!==na){var ra={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:na,entidentifier:ma};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});var sa={};sa[g.PARAMETER_ACTOR]=pa.actorforpost;s.trySend('/ajax/ufi/subscribe.php',v({subscribe_action:na,ft_ent_identifier:ma,source:oa.source,client_id:k.getNewClientID(),rootid:oa.rootid,comment_expand_mode:oa.commentexpandmode},qa,sa));}});},fetchSpamComments:function(ma,na,oa,pa){s.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ma,viewas:pa,comment_ids:na,parent_comment_id:oa,source:null});},removePreview:function(ma,na){var oa=aa(na.target),pa={commentid:ma.id,actiontype:q.UFIActionType.REMOVE_PREVIEW};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[pa]});s.trySend('/ajax/ufi/remove_preview.php',v({comment_id:ma.id,ft_ent_identifier:ma.ftentidentifier,source:na.source},oa));}};function aa(ma){if(!ma)return {ft:{}};var na={ft:u(ma,['ft']).ft};m.addModuleData(na,ma);return na;}function ba(ma){var na=ma.request.data;if(!ma.isBlockedAction())h.defaultErrorHandler(ma);var oa=na.client_id||na.comment_id,pa=p.getComment(oa),qa=(pa.status===q.UFIStatus.PENDING_EDIT)?q.UFIStatus.FAILED_EDIT:q.UFIStatus.FAILED_ADD;pa=l.setDeep(pa,{status:qa,allowRetry:ca(ma),body:{mentionstext:na.comment_text,mentionsphoto:pa.photo_comment}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function ca(ma){var na=ma.getError();if(ma.isBlockedAction())return false;if(ma.silentError)return true;if(na===1357012||na===1357006)return false;return true;}function da(ma){var na=ma.request.data,oa=na.comment_id,pa=p.getComment(oa);pa=l.set(pa,{status:pa.priorstatus||null,priorstatus:undefined});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function ea(ma){var na=ma.request.data,oa=na.comment_id,pa=p.getComment(oa);if(na.like_action===pa.hasviewerliked){var qa=pa.hasviewerliked?-1:1,ra={commentid:oa,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:!pa.hasviewerliked,likecount:pa.likecount+qa};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}h.defaultErrorHandler(ma);}function fa(ma){var na=ma.request.data,oa=na.ft_ent_identifier;r.getFeedbackTarget(oa,function(pa){if(pa.hasviewerliked===na.like_action){var qa=pa.hasviewerliked?-1:1,ra={actiontype:q.UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:!pa.hasviewerliked,likecount:pa.likecount+qa,entidentifier:oa,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});h.defaultErrorHandler(ma);}function ga(ma){var na=ma.request.data,oa=na.ft_ent_identifier;r.getFeedbackTarget(oa,function(pa){if(pa.hasviewersubscribed===na.subscribe_action){var qa={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:!pa.hasviewersubscribed,entidentifier:oa};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[qa]});}});h.defaultErrorHandler(ma);}var ha={'/ajax/ufi/actor_change.php':{mode:s.IMMEDIATE},'/ajax/ufi/comment_like.php':{mode:s.BATCH_CONDITIONAL,error_handler:ea,batch_if:ia,batch_function:la},'/ajax/ufi/comment_spam.php':{mode:s.IMMEDIATE,error_handler:da},'/ajax/ufi/add_comment.php':{mode:s.IMMEDIATE,error_handler:ba},'/ajax/ufi/delete_comment.php':{mode:s.IMMEDIATE,error_handler:da},'/ajax/ufi/ban_user.php':{mode:s.IMMEDIATE},'/ajax/ufi/edit_comment.php':{mode:s.IMMEDIATE,error_handler:ba},'/ajax/ufi/like.php':{mode:s.BATCH_CONDITIONAL,error_handler:fa,batch_if:ja,batch_function:la},'/ajax/ufi/subscribe.php':{mode:s.BATCH_CONDITIONAL,error_handler:ga,batch_if:ka,batch_function:la},'/ajax/ufi/id_comment_fetch.php':{mode:s.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:s.IMMEDIATE},'/ajax/ufi/translate_comment.php':{mode:s.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:s.IMMEDIATE}};ha[(new t()).getURI()]={mode:s.IMMEDIATE};s.registerEndpoints(ha);function ia(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier&&ma.comment_id==na.comment_id;}function ja(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ka(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function la(ma,na){return na;}e.exports=z;},null);
__d("UFIActionLinkController",["Arbiter","ClickPointIdentifiersDEPRECATED","CSS","DOMQuery","Parent","React","TrackingNodes","UFIBlingBox.react","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","UFILikeLink.react","UFIShareLink.react","UFISubscribeLink.react","UFITimelineBlingBox.react","UFIToplevelCommentList","UFIUserActions","UFIUIEvents","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(ba,ca,da){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ea=j.scry(ba,ca)[0];if(ea){var fa=document.createElement('span');ea.parentNode.replaceChild(fa,ea);fa.appendChild(ea);if(typeof da==="function")da(fa);}else var ga=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(ga);z(ba,ca,da);},g.SUBSCRIBE_NEW);}var aa=function(ba,ca,da){this._id=ca.ftentidentifier;this._ftFBID=da.targetfbid;this._source=ca.source;this._contextArgs=ca;this._ufiRoot=ba;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(da.viewercanlike||da.hasviewerliked)this._attemptInitializeLike();if(da.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();o.subscribe('feedback-updated',function(ea,fa){var ga=fa.updates;if(this._id in ga)this.render();}.bind(this));o.subscribe('feedback-id-changed',function(ea,fa){var ga=fa.updates;if(this._id in ga)this._id=ga[this._id];}.bind(this));};y(aa.prototype,{_attemptInitializeBling:function(){z(this._ufiRoot,'^form .uiBlingBox',function(ba){this._blingRoot=ba;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ba=j.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(ba){var ca=j.scry(ba,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=ca?true:false;var da=j.scry(ba,'.fbTimelineFeedbackComments')[0];this._enableShowComments=da?true:false;}this._blingTimelineRoot=ba;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){z(this._ufiRoot,'^form .like_link',function(ba){this._likeRoot=ba;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeSubscribe:function(){z(this._ufiRoot,'^form .unsub_link',function(ba){this._subscribeRoot=ba;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeShare:function(){z(this._ufiRoot,'^form .share_action_link',function(ba){this._shareRoot=ba;var ca=j.scry(this._shareRoot,'.share_action_link')[0];this._shareURI=ca?ca.getAttribute('href'):null;if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderSubscribe();this._renderShare();},_renderBling:function(){if(this._blingRoot)q.getFeedbackTarget(this._id,function(ba){var ca=function(event){if(this._contextArgs.blingtogglescomments){var ga=k.byTag(event.target,"form");i.toggleClass(ga,"collapsed_comments");i.toggleClass(ga,"hidden_add_comment");}event.preventDefault();}.bind(this),da=m.getTrackingInfo(m.types.BLINGBOX),ea=v.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),fa=l.createElement(n,{likes:ba.likecount,comments:ea,reshares:ba.sharecount,nfb:ba.nfbcount,permalink:ba.permalink,contextArgs:this._contextArgs,onClick:ca,'data-ft':da});this._blingBox=l.render(fa,this._blingRoot);}.bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)q.getFeedbackTarget(this._id,function(ba){var ca=m.getTrackingInfo(m.types.BLINGBOX),da=h.getUserActionID(h.types.TIMELINE_SEE_LIKERS),ea=function(event){var ha=k.byTag(event.target,"form");i.removeClass(ha,"collapsed_comments");var ia=j.scry(ha,'a.UFIPagerLink');if(ia.length)ia[0].click();event.preventDefault();}.bind(this),fa=v.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),ga=l.createElement(u,{comments:fa,commentOnClick:ea,contextArgs:this._contextArgs,'data-ft':ca,'data-gt':da,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ba.likecount,reshares:ba.sharecount,actorid:ba.actorid});l.render(ga,this._blingTimelineRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)q.getFeedbackTarget(this._id,function(ba){var ca=!ba.hasviewerliked,da=function(event){var fa=ca?x.UFIActionLinkLike:x.UFIActionLinkUnlike;g.inform(fa,{ft_id:this._id,like_action:ca,target:event.target});w.changeLike(this._id,ca,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,giftoccasion:this._contextArgs.giftoccasion});event.preventDefault();}.bind(this),ea=l.createElement(r,{onClick:da,likeAction:ca});this._likeLink=l.render(ea,this._likeRoot);}.bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)q.getFeedbackTarget(this._id,function(ba){var ca=!ba.hasviewersubscribed,da=function(event){w.changeSubscribe(this._id,ca,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ba.commentexpandmode});event.preventDefault();}.bind(this),ea=l.createElement(t,{onClick:da,subscribeAction:ca});this._subscribeLink=l.render(ea,this._subscribeRoot);}.bind(this));},_renderShare:function(){if(this._shareRoot&&this._shareURI)this._shareLink=l.render(l.createElement(s,{href:this._shareURI}),this._shareRoot);},_isRenderingOnTimeline:function(){if(this._source===p.UFIFeedbackSourceType.PROFILE){var ba=j.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return (ba.length>0);}return false;}});e.exports=aa;},null);
__d("ClipboardPhotoUploader",["ArbiterMixin","AsyncRequest","mixin"],function(a,b,c,d,e,f,g,h,i){var j=i(g);for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(n,o){"use strict";this.uploadURIString=n;this.data=o;}m.prototype.handlePaste=function(event){"use strict";if(!event.clipboardData)return;var n=event.clipboardData.items;if(!n)return;for(var o=0;o<n.length;++o){var p=n[o];if(p.kind==='file'&&p.type.indexOf('image/')!==-1){var q=new FormData();q.append('pasted_file',p.getAsFile());var r=new h();r.setURI(this.uploadURIString).setData(this.data).setRawData(q).setHandler(function(s){this.inform('upload_success',s);}.bind(this)).setErrorHandler(function(s){this.inform('upload_error',s);}.bind(this));this.inform('upload_start');r.send();break;}}};e.exports=m;},null);
__d("LegacyMentionsInput.react",["Bootloader","CLogConfig","TypeaheadMetricsConfig","Event","Keys","React","ReactPropTypes","cx","PlaceholderListener"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b('PlaceholderListener');var o=l.createClass({displayName:'ReactLegacyMentionsInput',propTypes:{initialData:m.object,placeholder:m.string,datasource:m.object,ref:m.string,viewOptionsTypeObjects:m.object,viewOptionsTypeObjectsOrder:m.array,hashtags:m.bool,autoflip:m.bool,onEnterSubmit:m.func,onFocus:m.func,onBlur:m.func,onTypingStateChange:m.func,onPaste:m.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(this.getDOMNode());},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},submitComment:function(event){var p;if(event){p=event.target.value&&event.target.value.trim();}else{var q=this.refs.textarea.getDOMNode();if(q.value&&q.value!==q.placeholder)p=q.value;}p=p||'';var r={visibleValue:p,encodedValue:p};if(this._mentionsInput)r.encodedValue=this._mentionsInput.getRawValue().trim();var s=this.props.onEnterSubmit(r,event);if(s&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var p=event.nativeEvent,q=j.getKeyCode(p)==k.RETURN&&!j.$E(p).getModifiers().any,r=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&q&&!r)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(this.refs.root.getDOMNode());},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(p){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;g.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],function(q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){var ea=this.refs.textarea.getDOMNode();new v(ea);if(h.gkResults){var fa=da.getComment(this.props.replyCommentID),ga=fa?fa.fbid:null;s.trackMentionsInput(ea,ga);}if(this.props.onTypingStateChange){var ha=new ca(ea);ha.init();ha.subscribe('change',this.props.onTypingStateChange);}var ia={autoSelect:true,renderer:q,causalElement:ea,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)ia.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)ia.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ja=new w(this.props.datasource,{ctor:r,options:ia},{ctor:x},this.refs.typeahead.getDOMNode()),ka=[y,z];if(i.gkResults){var la=new ba({extraData:{event_name:'mention_metric_x'}});la.init(ja);}var ma=new aa({extraData:{event_name:'mentions',from_location:'comments'}});w.initNow(ja,ka,ma);this._mentionsInput=new u(p,ja,ea,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)t.set(ea,ea.value.length);if(this.props.onPaste)j.listen(ea,'paste',this.props.onPaste);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{this.refs.textarea.getDOMNode().focus();}catch(p){}},render:function(){var p=(("textInput")+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput")+(' '+"DOMControl_placeholder"));return (l.createElement("div",{ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},l.createElement("div",{className:"highlighter"},l.createElement("div",null,l.createElement("span",{className:"highlighterContent hidden_elem"}))),l.createElement("div",{ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},l.createElement("div",{className:"wrap"},l.createElement("input",{type:"hidden",autoComplete:"off",className:"hiddenInput"}),l.createElement("div",{className:"innerWrap"},l.createElement("textarea",{ref:"textarea",name:"add_comment_text",className:p,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown,defaultValue:this.props.placeholder})))),l.createElement("input",{type:"hidden",autoComplete:"off",className:"mentionsHidden",defaultValue:""})));}});e.exports=o;},null);
__d("UFIClassNames",["cx"],function(a,b,c,d,e,f,g){e.exports={ACTOR_IMAGE:"img UFIActorImage _54ru",ROW:"UFIRow",UNSEEN_ITEM:"UFIUnseenItem"};},null);
__d("UFIStickerButton.react",["Bootloader","ContextualLayerAutoFlip","React","ReactLayeredComponentMixin","StickerConstants","UFIConfig","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.createClass({displayName:'UFIStickerButton',propTypes:{onStickerSelected:i.PropTypes.func.isRequired},mixins:[j],getInitialState:function(){var p=l.stickerSearch?k.SEARCH_PACK_ID:k.MRU_STICKER_PACK;return {renderFlyout:null,flyoutShown:false,packID:p};},render:function(){var p="Post a sticker";return (i.createElement("div",{'aria-label':p,className:"UFICommentStickerButton",'data-hover':"tooltip",'data-tooltip-alignh':"center",onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,ref:"link"},i.createElement("div",{className:"UFICommentStickerIcon"})));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){!this._clickGuard&&this.setState({flyoutShown:true});return;}g.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],function(p,q){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:i.createElement(p,{alignment:"right",behaviors:{flip:h},className:"_5e-r",contextRef:"link",onBlur:this._hideFlyout,position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:278},i.createElement("div",null,i.createElement(q,{onPackSelect:function(r){this.setState({packID:r});}.bind(this),onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,isComments:true,packID:this.state.packID,shown:this.state.flyoutShown})))};}.bind(this)});}.bind(this));},_onStickerSelected:function(p,event){this.props.onStickerSelected(p,event);this._hideFlyout();},_onEmoticonSelected:function(p){this.props.onEmoticonSelected(p);this._hideFlyout();}});e.exports=o;},null);
__d("XFeedNUXSaveSeenStateControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool"}});},null);
__d("UFIAddComment.react",["ActorURI","AsyncRequest","Bootloader","ClipboardPhotoUploader","CloseButton.react","DOM","DOMContainer.react","getActiveElement","Event","Focus","HTML","Keys","LegacyMentionsInput.react","Link.react","LitestandStoryInsertionStatus","LoadingIndicator.react","React","ReactLayeredComponentMixin","Run","SnowflakePermalinkUtils","Sticker.react","TrackingNodes","UFIClassNames","UFIConfig","UFIImageBlock.react","UFIStickerButton.react","URI","XFeedNUXSaveSeenStateControllerURIBuilder","cx","fbt","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){var ma="Write a comment...",na="Write a reply...",oa="fcg fss UFICommentTip",pa=19,qa='/ajax/ufi/upload/',ra=80,sa='/ajax/ufi/sticker_preview/',ta=w.createClass({displayName:'UFIAddComment',mixins:[x],propTypes:{contextArgs:w.PropTypes.object.isRequired,viewerActor:w.PropTypes.object.isRequired,allowPhotoAttachments:w.PropTypes.bool,allowStickerAttachments:w.PropTypes.bool,attachedPhoto:w.PropTypes.object,attachedSticker:w.PropTypes.object,hide:w.PropTypes.bool,initialData:w.PropTypes.object,isEditing:w.PropTypes.bool,isFirstComponent:w.PropTypes.bool,isLastComponent:w.PropTypes.bool,isQAndA:w.PropTypes.bool,mentionsDataSource:w.PropTypes.object,onCancel:w.PropTypes.func,onCommentSubmit:w.PropTypes.func,onTypingStateChange:w.PropTypes.func,replyCommentID:w.PropTypes.string,showSendOnEnterTip:w.PropTypes.bool,subtitle:w.PropTypes.any,targetID:w.PropTypes.string,withoutSeparator:w.PropTypes.bool},getInitialState:function(){if(this.props.attachedPhoto)this.props.contextArgs.attachedphoto=this.props.attachedPhoto;if(this.props.attachedSticker)this.props.contextArgs.attachedsticker=this.props.attachedSticker;return {attachedPhoto:this.props.attachedPhoto?this.props.attachedPhoto:null,attachedSticker:this.props.attachedSticker?this.props.attachedSticker:null,broadcastRequestTokenizer:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,isRecommending:false,recommendationEntries:[],renderStickerNUX:null,searchSource:null,stickerNUXVisible:false};},_onKeyDown:function(event){if(this.props.isEditing&&o.getKeyCode(event.nativeEvent)===r.ESC)this.props.onCancel();if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){y.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var ua=n();if(o.getKeyCode(event.nativeEvent)===r.ESC)ua.blur();},_handleUnsavedChanges:function(){var ua=a.PageTransitions;if(ua){var va=ga.getNextURI(),wa=ua.getMostRecentURI();if(va.getQueryData().hasOwnProperty('theater')||wa.getQueryData().hasOwnProperty('theater')||z.isPermalinkURI(va)||z.isPermalinkURI(wa))return;var xa=a.DialogNavigationStack;if(xa&&xa.isActiveURI(va))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return "You haven't finished your comment yet. Do you want to leave without finishing?";},_blur:function(){this.setState({stickerNUXVisible:false});if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var ua=new j(qa,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[ua.subscribe('upload_start',this._prepareForAttachedPhotoPreview),ua.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),ua.subscribe('upload_success',function(va,wa){this._onPhotoUploadComplete(wa);}.bind(this))];ua.handlePaste(event);},_onEnterSubmit:function(ua,event){var va=this.state.attachedPhoto||this.state.attachedSticker||this.state.recommendationEntries.length,wa=this.props.isEditing||va;if(this.state.isLoadingPhoto){return false;}else if(!ua.encodedValue.trim()&&!wa)return false;if(va){if(this.state.recommendationEntries.length){var xa=[],ya=[];this.state.recommendationEntries.forEach(function(za){xa.push(za.getUniqueID());ya.push(za.getTitle());});ua.recommendationIDs=xa;if(ya.length)ua.visibleValue+=' \u2014 '+ya.join(', ');}this.setState({isLoadingPhoto:false,isRecommending:false,attachedPhoto:null,attachedSticker:null,recommendationEntries:[]});ua.attachedPhoto=this.props.contextArgs.attachedphoto;ua.attachedSticker=this.props.contextArgs.attachedsticker;}else{ua.attachedPhoto=null;ua.attachedSticker=null;}this.props.onCommentSubmit(ua,event);return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(ua){ua.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=u.registerBlocker(function(){return this.state.isCommenting;}.bind(this));if(this.props.contextArgs.canaddrecommendation)i.loadModules(["BroadcastRequestTokenizer.react","BroadcastRequestParam","WebAsyncSearchSource","XBroadcastRequestSearchSourceControllerURIBuilder"],function(ua,va,wa,xa){var ya=new xa().setString(va.SOURCE_OBJ_ID,this.props.contextArgs.ftentidentifier).getURI(),za=new wa({bootstrapRequests:[{uri:ya}],getAllForEmptyQuery:true,queryRequests:[{uri:ya}]});this.setState({broadcastRequestTokenizer:ua,searchSource:za});}.bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){var ua={isCommenting:true};if(this.props.allowStickerAttachments&&da.shouldShowStickerNUX){var va=new ha().setString('key','sticker_comments').setBool('seen',true).getURI();new h(va).send();if(this.state.renderStickerNUX===null)i.loadModules(["XUIAmbientNUX.react"],function(wa){ua.renderStickerNUX=function(){return {ambientNUX:w.createElement(wa,{contextRef:"sticker_button",shown:this.state.stickerNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this._hideStickerNUX},"Now you can comment with a sticker!")};}.bind(this);}.bind(this));da.shouldShowStickerNUX=false;ua.stickerNUXVisible=true;}this.setState(ua);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},render:function(){var ua=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,va=null;if(this.props.subtitle){va=w.createElement("span",{className:oa},this.props.subtitle);}else if(this.props.isEditing){va=w.createElement("span",{className:oa},ja._("Press Esc to {cancel}.",[ja.param("cancel",w.createElement(t,{onClick:this.props.onCancel},"cancel"))]));}else if(this.props.showSendOnEnterTip)va=w.createElement("span",{className:oa},"Press Enter to post.");var wa=null,xa=null,ya=this.state.attachedPhoto||this.state.attachedSticker,za=null;if(this.props.allowStickerAttachments&&!ya){var ab=this.props.isEditing?this._prepareForAttachedStickerPreview:this.onStickerSelected;xa=w.createElement(fa,{ref:"sticker_button",onStickerSelected:ab,onEmoticonSelected:this._insertEmoticonIntoCommentText});}if(this.props.allowPhotoAttachments){za=this._onPaste;var bb=ya?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",cb="UFIPhotoAttachLinkWrapper _m";wa=w.createElement("div",{ref:"PhotoInputContainer",className:cb,'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':"Attach a Photo"},w.createElement("i",{ref:"PhotoInputControl",className:bb}));}var db=ba.getTrackingInfo(ba.types.ADD_COMMENT_BOX),eb=ka(ca.ACTOR_IMAGE,((!ua?"hidden_elem":''))),fb=w.createElement("div",{className:"UFIReplyActorPhotoWrapper",onClick:this.focus},w.createElement("img",{className:eb,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name})),gb=ka(ca.ROW,((this.props.hide?"noDisplay":'')+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),hb;if(!!this.props.replyCommentID){hb=na;}else if(this.props.isQAndA){hb="Ask a question...";}else hb=ma;var ib=this.props.contextArgs.viewoptionstypeobjects,jb=this.props.contextArgs.viewoptionstypeobjectsorder,kb=null;if(this.state.attachedSticker){var lb=this._getScaledDimensions(ya.metadata.height,ya.metadata.width);kb=w.createElement(aa,{animationTrigger:"load_and_hover",frameCount:ya.metadata.frameCount,framesPerCol:ya.metadata.framesPerCol,framesPerRow:ya.metadata.framesPerRow,spriteURI:ya.metadata.sprite_uri,sourceHeight:lb.height,sourceURI:ya.metadata.source_uri,sourceWidth:lb.width});}else if(this.state.attachedPhoto){var mb=ya.markupPreview;if(q.isHTML(mb.markup))mb=q.replaceJSONWrapper(mb.markup).getRootNode();kb=w.createElement(m,null,mb);if(!this.props.subtitle)va=null;}else if(this.state.isLoadingPhoto)kb=w.createElement(v,{color:"white",className:"UFICommentPhotoAttachedPreviewLoadingIndicator",size:"medium"});var nb,ob=this.state.attachedPhoto?this._onRemoveAttachedPhotoPreviewClicked:this._onRemoveAttachedStickerPreviewClicked;if(kb!=null){var pb=null;if(this.state.attachedSticker){pb="Remove Sticker";}else if(this.state.attachedPhoto)pb="Remove Photo";nb=w.createElement("div",{className:"UFICommentPhotoAttachedPreview pas"},kb,w.createElement(k,{tooltip:pb,onClick:ob}));}var qb=this.props.allowStickerAttachments?ka("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",rb,sb,tb;if(this.props.contextArgs.mentionsinput){var ub=this.props.contextArgs.mentionsinput;rb=ub.inputComponent;sb=ub.viewComponent;tb=ub.viewProps;}else rb=s;var vb=null;if(this.props.contextArgs.canaddrecommendation)if(this.state.broadcastRequestTokenizer){var wb=this.state.broadcastRequestTokenizer;vb=(w.createElement(wb,{active:this.state.isRecommending,entries:this.state.recommendationEntries,onBlur:this._onRecommendationInputBlur,onSubmitAttempt:this._onRecommendationTokenizerSubmit,onTokenChange:this._onRecommendationTokenizerUpdate,onTriggerClick:this._onRecommendationTriggerClick,placeHolder:this.props.contextArgs.broadcastrequestplaceholder,searchSource:this.state.searchSource,sourceID:this.props.contextArgs.ftentidentifier}));}return (w.createElement("li",{className:gb,onKeyDown:this._onKeyDown,'data-ft':db},w.createElement(ea,{className:qb},fb,w.createElement("div",{className:"UFICommentContainer"},w.createElement("div",{className:"UFIInputContainer"},w.createElement(rb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:hb,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:sb,viewProps:tb,viewOptionsTypeObjects:ib,viewOptionsTypeObjectsOrder:jb,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onTypingStateChange:this.props.onTypingStateChange,onPaste:za}),w.createElement("div",{className:"UFICommentAttachmentButtons clearfix"},wa,xa)),nb,vb,va))));},_onRecommendationInputBlur:function(){if(!this.state.recommendationEntries.length)this.setState({isRecommending:false});},_onRecommendationTokenizerSubmit:function(event){this.refs.mentionsinput.submitComment(event);},_onRecommendationTokenizerUpdate:function(ua){this.setState({recommendationEntries:ua});},_onRecommendationTriggerClick:function(){this.setState({isRecommending:true});},componentDidUpdate:function(ua,va,wa){if(!va.attachedPhoto&&this.state.attachedPhoto||!va.attachedSticker&&this.state.attachedSticker)this.refs.mentionsinput.focus();if(ua.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;var ua=this.refs.PhotoInputContainer.getDOMNode(),va=this.refs.PhotoInputControl.getDOMNode(),wa="Choose a file to upload",xa=l.create('input',{accept:'image/*',className:"_n",name:'file',type:'file',title:wa,'aria-label':wa});l.appendContent(va,xa);var ya=o.listen(ua,'click',function(event){i.loadModules(["FileInput","FileInputUploader","Input"],function(za,ab,bb){var cb=new za(ua,va,xa),db=new ab(undefined,ua).setURI(qa).setData(this._getPhotoUploadData());cb.subscribe('change',function(event){if(cb.getValue()){this._prepareForAttachedPhotoPreview();db.setInput(cb.getInput()).send();}}.bind(this));db.subscribe('success',function(eb,fb){cb.clear();this._onPhotoUploadComplete(fb.response);}.bind(this));db.subscribe('failure',function(eb,fb){cb.clear();this._onPhotoUploadComplete(fb.response);}.bind(this));p.setWithoutOutline(va);this.setState({fileInput:cb,fileUploader:db});}.bind(this));ya.remove();}.bind(this));},insertMention:function(ua){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(ua);},_getScaledDimensions:function(ua,va){var wa,xa,ya;if(va>ua){ya=ra/va;wa=ua*ya;xa=va*ya;}else{ya=ra/ua;wa=ua*ya;xa=va*ya;}return {height:Math.round(wa),width:Math.round(xa)};},_getPhotoUploadData:function(){var ua=this.props.viewerActor.id,va={profile_id:ua,target_id:this.props.targetID,source:pa};va[g.PARAMETER_ACTOR]=ua;return va;},_onPhotoUploadComplete:function(ua){if(!this.state.isLoadingPhoto)return;var va=ua.getPayload();if(va&&va.fbid){this.props.contextArgs.attachedphoto=va;this.setState({attachedPhoto:va,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(ua){if(!this.state.isLoadingPhoto)return;var va=ua.getPayload();if(va&&va.fbid){this.props.contextArgs.attachedsticker=va;this.setState({attachedSticker:va,isLoadingPhoto:false});}else{i.loadModules(["Dialog"],function(wa){var xa="Sticker Failed",ya="There was a problem attaching the sticker.";new wa().setTitle(xa).setBody(ya).setButtons(wa.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:false});},_prepareForAttachedStickerPreview:function(ua){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:true});new h(sa).setData({sticker_id:ua}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},onStickerSelected:function(ua,event){var va={encodedValue:'',visibleValue:''};this.props.contextArgs.attachedsticker={fbid:ua};this.props.onCommentSubmit(va,event);},_insertEmoticonIntoCommentText:function(ua){i.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(va,wa,xa,ya){var za=va.symbols[ua];if(!za)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(za);return;}if(!this._selectionPosition)this._selectionPosition=new ya(this.refs.mentionsinput.refs.textarea.getDOMNode());var ab=this.refs.mentionsinput.refs.textarea.getDOMNode(),bb=xa.getInstance(ab),cb=bb.getValue(),db=wa.insertEmoticon(za,cb,this._selectionPosition.getPos());bb.setValue(db.result);this._selectionPosition.setPos(db.start,db.end);}.bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});e.exports=ta;},null);
__d("UFIAddCommentController",["Arbiter","copyProperties","MentionsInputUtils","Parent","UFIAddComment.react","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();n.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));n.subscribe('feedback-updated',function(x,y){var z=y.updates;if(this.id in z)this.render();}.bind(this));}n.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}h(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,timelinelogdata:this._contextArgs.timelinelogdata,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,attachedsticker:this._contextArgs.attachedsticker,giftoccasion:this._contextArgs.giftoccasion,recommendationIDs:t.recommendationIDs});this._contextArgs.attachedphoto=null;this._contextArgs.attachedsticker=null;p.getFeedbackTarget(this.id,function(u){var v=j.byTag(this.root,'form');if(v)g.inform('ufi/comment',{form:v,isranked:u.isranked});}.bind(this));return false;},_onTypingStateChange:function(t,u){},renderAddComment:function(t,u,v,w,x,y,z,aa,ba,ca){var da=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ea=null,fa=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;return (l.createElement(k,{hide:fa,replyCommentID:this._replyCommentID,viewerActor:t,targetID:u,initialData:ea,ref:x,withoutSeparator:y,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:v,onTypingStateChange:da,showSendOnEnterTip:w,allowPhotoAttachments:aa,allowStickerAttachments:ba,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z,isQAndA:ca}));},renderEditComment:function(t,u,v,w,x,y,z,aa,ba){var ca=o.getComment(v),da;if(ca.attachment)da=ca.attachment.type=='sticker'?ca.attachment:null;var ea=i.generateDataFromTextWithEntities(ca.body);return (l.createElement(k,{viewerActor:t,targetID:u,initialData:ea,onCommentSubmit:x,onCancel:y,mentionsDataSource:w,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingCommentID:v,attachedPhoto:ca.photo_comment,attachedSticker:da,allowPhotoAttachments:z,allowStickerAttachments:aa,isQAndA:ba}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.ownerid,t.mentionsdatasource,t.showsendonentertip,null,null,t.subtitle,t.allowphotoattachments,t.allowstickerattachments,t.isqanda);this._addComment=l.render(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;},null);
__d("UFIAddCommentLink.react",["React","UFIClassNames","cx","fbt","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':g.PropTypes.string,isFirstCommentComponent:g.PropTypes.bool,isFirstComponent:g.PropTypes.bool,isLastCommentComponent:g.PropTypes.bool,isLastComponent:g.PropTypes.bool,isQAndA:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){var n=k(h.ROW,(("UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),o;if(this.props.isQAndA){o="Ask a question...";}else o="Write a comment...";return (g.createElement("li",{className:n,'data-ft':this.props['data-ft']},g.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},o)));}});e.exports=m;},null);
__d("HovercardLinkInterpolator",["HovercardLink","Link.react","React","URI","WWWBase","cx","isRTL"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p,q,r,s){var t=p.entity,u=q||(t.external?'_blank':null),v,w=((!t.external?"profileLink":'')+(t.weakreference?' '+"weakReference":'')),x,y=t.hashtag?o.substring(1):o;x=m(y)?'rtl':'ltr';if(t.hashtag){var z=new j(t.url).setDomain(new j(k.uri).getDomain());v=i.createElement("a",{className:"_58cn",dir:x,href:z.toString()},i.createElement("span",{className:"_58cl"},o.substring(0,1)),i.createElement("span",{className:"_58cm"},o.substring(1)));}else if(t.weakreference){v=i.createElement(h,{className:w,dir:x,href:t,target:u},i.createElement("i",{className:"UFIWeakReferenceIcon"}),o);}else v=i.createElement(h,{className:w,dir:x,href:t,target:u},o);if(!t.external&&!t.hashtag&&!t.photo)v.props['data-hovercard']=g.constructEndpointWithGroupAndLocation(t,r,s).toString();return v;}e.exports=n;},null);
__d("SeeMore.react",["React","cx","tx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:'SeeMore',getInitialState:function(){return {isCollapsed:true};},handleClick:function(){this.setState({isCollapsed:false});},render:function(){var k=this.state.isCollapsed,l=k?g.createElement("span",{className:"_5uzb"},"..."):null,m=this.props.children[0],n=k?null:g.createElement("span",null,this.props.children[1]),o=!k?null:g.createElement("a",{className:"_5v47 fss",onClick:this.handleClick,href:"#",role:"button"},"See More");return (g.createElement("span",{className:this.props.className},m,l,o,n));}});e.exports=j;},null);
__d("findSplitPointForText",[],function(a,b,c,d,e,f){function g(h,i,j){var k=null,l=h.split('\n');if(i&&h.length>i)k=i;if(j&&l.length>j){var m=l.slice(0,j).join('\n').length;if(k!==null){k=Math.min(m,k);}else k=m;}return k;}e.exports=g;},null);
__d("TruncatedTextWithEntities.react",["React","TextWithEntities.react","SeeMore.react","findSplitPointForText","partitionTextAndRanges"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'TruncatedTextWithEntities',render:function(){var m=this.props.text||'',n=this.props.ranges||[];m=m.replace(/\s*$/,'');var o=this.props.maxLines,p=this.props.maxLength;if(p&&m.length>p){var q=this.props.truncationPercent||.6;p=Math.floor(q*p);}var r=j(m,p,o);if(r!==null){while(m[r-1]==='\n')r--;var s=k(m,n,r);return (g.createElement("span",{'data-ft':this.props['data-ft'],dir:this.props.dir},g.createElement(i,{className:this.props.className},g.createElement(h,{interpolator:this.props.interpolator,ranges:s.before.ranges,aggregatedRanges:this.props.aggregatedRanges,text:s.before.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}),g.createElement(h,{interpolator:this.props.interpolator,ranges:s.after.ranges,aggregatedRanges:this.props.aggregatedRanges,text:s.after.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}))));}else return (g.createElement("span",{'data-ft':this.props['data-ft'],dir:this.props.dir},g.createElement(h,{className:this.props.className,interpolator:this.props.interpolator,ranges:n,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:m,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji})));}});e.exports=l;},null);
__d("UFIActor.react",["Badge.react","Focus","HovercardLink","Locale","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=" \u00b7 ",n=k.createClass({displayName:'UFIActor',propTypes:{author:k.PropTypes.object.isRequired,'data-ft':k.PropTypes.string,focusOnMount:k.PropTypes.bool,showHovercard:k.PropTypes.bool},componentDidMount:function(){if(this.props.focusOnMount)h.setWithoutOutline(this.refs.authorName.getDOMNode());},render:function(){var o=this.props.author,p=j.isRTL()?'rtl':'ltr',q=o.uri?k.createElement("a",{className:"UFICommentActorName",'data-hovercard':this.props.showHovercard?i.constructEndpointWithLocation(o,'ufi').toString():null,'data-ft':this.props['data-ft'],dir:p,href:o.uri,ref:"authorName"},o.name):k.createElement("span",{className:"UFICommentActorName",dir:p,ref:"authorName"},o.name);return (k.createElement("span",null,q,k.Children.map(this.props.children,function(r){return r?[r.type==g.type?"":m,r]:null;})));}});e.exports=n;},null);
__d("UFICommentLikeCount.react",["NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=function(o,p){var q=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:o.fbid,comment_from:o.author,comment_likecount:o.likecount||0,comment_id:o.id,cache_buster:o.likeconfirmhash||0});if(p)q.addQueryData({viewas:p});return q;},n=j.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:j.PropTypes.object.isRequired,contextArgs:j.PropTypes.object.isRequired},render:function(){var o=this.props.comment,p=g.formatIntegerWithDelimiter(o.likecount||0,this.props.contextArgs.numberdelimiter),q=i.LIKES,r={id:o.fbid},s=m(this.props.comment,this.props.contextArgs.viewas),t=j.createElement("i",{className:"UFICommentLikeIcon"}),u=j.createElement("span",null,p),v=(("UFICommentLikeButton")+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''));return (j.createElement("a",{ajaxify:h.constructDialogURI(q,r).toString(),className:v,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':s.toString(),href:h.constructPageURI(q,r).toString(),rel:"dialog",role:"button"},t,u));}});e.exports=n;},null);
__d("UFICreatorInfo.react",["HelpLink.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=h.createClass({displayName:'UFICreatorInfo',propTypes:{creatorID:h.PropTypes.number.isRequired,creatorType:h.PropTypes.string.isRequired,creatorName:h.PropTypes.string.isRequired,labelType:h.PropTypes.string.isRequired,pageID:h.PropTypes.number.isRequired,profileURI:h.PropTypes.string},render:function(){var m,n=this.getCreatorLink();switch(this.props.labelType){case 'commented':m=k._("Commented on by {creator}",[k.param("creator",n)]);break;case 'edited_comment':m=k._("Edited by {creator}",[k.param("creator",n)]);break;case 'sent_message':m=k._("Sent by {creator}",[k.param("creator",n)]);break;default:return;}return (h.createElement("span",null,m,h.createElement(g,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (h.createElement("a",{className:"uiLinkSubtle",'aria-label':this.getTooltipText(),'data-hover':"tooltip"},this.props.creatorName));case 'business_admin':return (h.createElement("a",{className:"uiLinkSubtle",href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (h.createElement("span",{className:"uiLinkSubtle"},h.createElement("img",{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (h.createElement("span",{className:"uiLinkSubtle"},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return h.createElement("span",null,this.props.creatorName);var m=new i('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (h.createElement("a",{className:"uiLinkSubtle",'data-hovercard':m,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone using {application}.",[k.param("application",this.props.creatorName)]));}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone from {page}.",[k.param("page",this.props.creatorName)]));}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return ("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return ("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return ("This was sent by someone who doesn't have a personal Facebook account.");}},getHelpText:function(){switch(this.props.labelType){case 'commented':return ("Only people who manage this Page can see who posted a comment");case 'edited_comment':return ("Only people who manage this Page can see who edited a comment");case 'sent_message':return ("Only people who manage this Page can see who sent a message");}}});e.exports=l;},null);
__d("UFIReplyLink.react",["React","tx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFIReplyLink',propTypes:{onClick:g.PropTypes.func},render:function(){return (g.createElement("a",{className:"UFIReplyLink",href:"#",onClick:this.props.onClick},"Reply"));}});e.exports=i;},null);
__d("UFICommentActions.react",["React","TrackingNodes","UFICommentLikeCount.react","UFICommentMetadata.react","UFIConstants","UFIReplyLink.react","UFISpamCount","cx","fbt","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=k.UFIStatus,r=' \u00b7 ',s="fsm fwn fcg UFICommentActions",t="UFIDeletedMessageIcon",u="UFIDeletedMessage",v=g.createClass({displayName:'UFICommentActions',propTypes:{comment:g.PropTypes.object.isRequired,contextArgs:g.PropTypes.object.isRequired,feedback:g.PropTypes.object.isRequired,hideAsSpamForPageAdmin:g.PropTypes.bool,markedAsSpamHere:g.PropTypes.bool,onAlsoRecommendToggle:g.PropTypes.func,onCommentLikeToggle:g.PropTypes.func,onCommentReply:g.PropTypes.func,onMarkAsNotSpam:g.PropTypes.func,onPreviewRemove:g.PropTypes.func,onRetrySubmit:g.PropTypes.func,permalink:g.PropTypes.string,shortenTimestamp:g.PropTypes.bool,showPermalink:g.PropTypes.bool,showReplyLink:g.PropTypes.bool,viewerCanMarkNotSpam:g.PropTypes.bool},render:function(){var w=this.props,x=w.comment,y=w.permalink,z=w.feedback,aa=w.markedAsSpamHere,ba=x.status===q.SPAM_DISPLAY,ca=w.showReplyLink,da=w.hideAsSpamForPageAdmin,ea,fa,ga,ha,ia,ja,ka,la=!x.islocal&&x.status!==q.LIVE_DELETED;if(la){if(ba&&!aa){if(w.viewerCanMarkNotSpam)ea=g.createElement("a",{onClick:w.onMarkAsNotSpam,className:"UFICommentNotSpamLink",href:"#",role:"button"},"Unhide");if(da&&z.isthreaded&&x.cancomment&&ca)ia=g.createElement(l,{comment:x,onClick:w.onCommentReply,contextArgs:w.contextArgs});}else{if(x.viewercanlike){var ma=h.getTrackingInfo(x.hasviewerliked?h.types.UNLIKE_LINK:h.types.LIKE_LINK),na=x.hasviewerliked?"Unlike this comment":"Like this comment";fa=g.createElement("a",{className:"UFILikeLink",'data-ft':ma,href:"#",onClick:w.onCommentLikeToggle,role:"button",title:na},x.hasviewerliked?"Unlike":"Like");}if((this.props.contextArgs.simplereply&&this.props.feedback.cancomment)||(z.isthreaded&&x.cancomment&&ca))ia=g.createElement(l,{comment:x,contextArgs:w.contextArgs,onClick:w.onCommentReply});if(x.likecount>0)ga=g.createElement(i,{comment:x,contextArgs:w.contextArgs});if(x.spamcount&&m.enabled)ha=g.createElement(m,{count:x.spamcount});}if(w.contextArgs.canaddrecommendation&&x.hasrecommendation){var oa=("Also recommend the recommendations in this comment");if(x.hasviewerrecommended){ka=g.createElement("span",null,"Recommended");}else ka=g.createElement("a",{className:"UFIRecommendLink",href:"#",onClick:w.onAlsoRecommendToggle,role:"button",title:oa},"Recommend");}if(x.attachment&&x.attachment.type=="share"&&x.canremove)ja=g.createElement("a",{href:"#",onClick:w.onPreviewRemove,role:"button"},"Remove Preview");}var pa=g.createElement(j,{comment:x,onRetrySubmit:w.onRetrySubmit,permalink:y,shortenTimestamp:w.shortenTimestamp,showPermalink:w.showPermalink}),qa;if(z.isqanda){qa={likeCount:ga,spamCount:ha,likeToggle:fa,commentReply:ia,spamToggle:ea,metadata:pa,removePreview:ja};}else if(w.contextArgs.entstream){qa={metadata:pa,likeToggle:fa,likeCount:ga,alsoRecommend:ka,commentReply:ia,spamCount:ha,spamToggle:ea,removePreview:ja};}else if(z.isthreaded){qa={likeToggle:fa,commentReply:ia,spamToggle:ea,removePreview:ja,likeCount:ga,spamCount:ha,metadata:pa};}else qa={metadata:pa,likeToggle:fa,likeCount:ga,alsoRecommend:ka,spamCount:ha,commentReply:ia,spamToggle:ea,removePreview:ja};if(x.status===q.LIVE_DELETED){var ra=g.createElement("span",{className:u},g.createElement("i",{className:t,'data-hover':"tooltip",'aria-label':"Comment deleted"}));qa.deletionWarning=ra;}var sa=true,ta={};for(var ua in qa){var va=qa[ua];if(va){ta[ua]=sa?va:{MIDDOT:r,action:va};sa=false;}}return (g.createElement("div",{className:s},ta));}});e.exports=v;},null);
__d("XUIEditButton.react",["XUIAbstractGlyphButton.react","React","cx","tx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'XUIEditButton',render:function(){var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!m)m="Edit";n=m;}return (h.createElement(g,Object.assign({},this.props,{label:m,title:n,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:k(this.props.className,"_5upq _5upr")})));}});e.exports=l;},null);
__d("UFICommentMenu.react",["Bootloader","React","XUICloseButton.react","XUIEditButton.react","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n,o,p=k({EDIT:true,CLOSE:true}),q=h.createClass({displayName:'UFICommentMenu',propTypes:{menuData:h.PropTypes.array,menuType:h.PropTypes.oneOf(Object.keys(p)).isRequired,onAction:h.PropTypes.func,onClick:h.PropTypes.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});g.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(r,s,t){l=r,m=s;n=t;o=n.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(r,s,t){if(this.state.needsExpand&&!s.needsExpand)return false;return true;},render:function(){var r=null;if(this.props.menuType===p.EDIT){r=j;}else r=i;if(this.props.menuData&&this.state.bootloaded){var s=this.props.menuData.map(function(u){return (h.createElement(o,{value:u.value},u.label));}),t=h.createElement(n,{onItemClick:this.props.onAction},s);return (h.createElement(m,Object.assign({},this.props,{alignh:"right",layerBehaviors:[l],menu:t,ref:"menu"}),h.createElement(r,{href:"#",onClick:this.onClickGuard})));}return h.createElement(r,Object.assign({},this.props,{href:"#",onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});q.MenuType=p;e.exports=q;},null);
__d("UFISocialContext.react",["HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=27,n=j.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:j.PropTypes.object.isRequired,otherMutualCount:j.PropTypes.number.isRequired,topMutualFriend:j.PropTypes.object.isRequired},render:function(){var o=this.props.topMutualFriend,p=this.props.otherMutualCount,q=this.props.commentAuthor,r=g.constructEndpoint(o).toString(),s=j.createElement("a",{href:o.uri,'data-hovercard':r,key:"top"},o.name),t=q.name.length+o.name.length,u;if(p===0){u=l._("Friends with {name}",{name:s});}else if(t<m){var v;if(p==1){v="1 other";}else v=l._("{count} others",{count:p});u=l._("Friends with {name} and {others}",{name:s,others:this.getOthersLink(v,q,o)});}else{var w=l._("{count} mutual friends",{count:p+1});u=this.getOthersLink(w,q);}return (j.createElement("span",{className:"UFICommentSocialContext"},u));},getOthersLink:function(o,p,q){var r=i.MUTUAL_FRIENDS,s={uid:p.id},t=new k('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:p.id});if(q)t.addQueryData({exclude_id:q.id});var u=h.constructDialogURI(r,s).toString();return (j.createElement("a",{ajaxify:u,'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':t.toString(),href:h.constructPageURI(r,s).toString(),key:"others",rel:"dialog"},o));}});e.exports=n;},null);
__d("URITruncator",["URI","tx"],function(a,b,c,d,e,f,g,h){var i=3;function j(k,l){var m="...",n=m.length;if(!k||l===undefined||k.length<=l||l<=n||k.toString().length<=n)return k;if(!g.isValidURI(k))return k.substring(0,l-n)+m;var o=new g(k),p=o.getOrigin();if(p.length>l-n)return p.substring(0,l-n)+m;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=l-n)return o.toString()+m;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=l-n)return o.toString()+m;}}}var u=o.getPath()+(q?m:''),v=u.split('/'),w=(p.length+u.length)-l,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+n+i<=z.length){var aa=z.length-1,ba=z.length-w-n,ca=/[a-zA-Z0-9]/;w+=n;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--;}while(aa>0&&!ca.test(z[aa])){aa--;w--;}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+m;}else{x++;w-=z.length;if(x===1){w+=n;}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,m);}var da=p+v.join('/');if(da.length>l)da=da.substring(0,l-n)+m;return da;}e.exports=j;},null);
__d("transformTextRanges",["UnicodeUtils"],function(a,b,c,d,e,f,g){var h=function(i,j,k){if(!i||!j||!k)return i;j.sort(function(r,s){return r.offset-s.offset;});var l=0;for(var m=0;m<j.length;m++){j[m].offset+=l;var n=g.substr(i,j[m].offset,j[m].length),o=g.strlen(n),p=k(n,j[m]),q=g.strlen(p);if(n!==p){i=g.substr(i,0,j[m].offset)+p+g.substr(i,j[m].offset+j[m].length);j[m].length=q;l+=q-o;}}return i;};e.exports=h;},null);
__d("UFIComment.react",["Badge.react","Bootloader","HovercardLink","HovercardLinkInterpolator","InlineStoryInsert","Locale","React","TrackingNodes","TruncatedTextWithEntities.react","UFIActor.react","UFIClassNames","UFICommentActions.react","UFICommentAttachment.react","UFICommentMenu.react","UFIConfig","UFIConstants","UFIImageBlock.react","UFISocialContext.react","UFITranslationConstants","UnicodeBidi","URI","URITruncator","XUICloseButton.react","copyProperties","cx","joinClasses","keyMirror","transformTextRanges","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){"use strict";var ja=v.UFIStatus,ka=ga({edit:true,hide:true,remove:true}),la="UFITranslateLink",ma="UFITranslatedText",na="pls",oa="fcg",pa=null,qa=function(ua){var va=ua.status;return va===ja.FAILED_ADD||va===ja.FAILED_EDIT;};function ra(ua){return ua.commenterIsFOF!==undefined&&ua.userIsMinor!==undefined&&ua.reportLink!==undefined;}function sa(ua){if(!ua)return ua;var va=[];ua.forEach(function(wa){va.push(da({},wa));});return va;}var ta=m.createClass({displayName:'UFIComment',propTypes:{authorProfiles:m.PropTypes.object.isRequired,comment:m.PropTypes.object.isRequired,contextArgs:m.PropTypes.object.isRequired,feedback:m.PropTypes.object.isRequired,'data-ft':m.PropTypes.string,focusOnMount:m.PropTypes.bool,hasPartialBorder:m.PropTypes.bool,hideAsSpamForPageAdmin:m.PropTypes.bool,isFeatured:m.PropTypes.bool,isFirst:m.PropTypes.bool,isFirstCommentComponent:m.PropTypes.bool,isFirstComponent:m.PropTypes.bool,isLast:m.PropTypes.bool,isLastCommentComponent:m.PropTypes.bool,isLastComponent:m.PropTypes.bool,isLocallyComposed:m.PropTypes.bool,isReply:m.PropTypes.bool,onAlsoRecommendToggle:m.PropTypes.func,onBlingBoxClick:m.PropTypes.func,onCommentLikeToggle:m.PropTypes.func,onCommentReply:m.PropTypes.func,onCommentTranslate:m.PropTypes.func,onEdit:m.PropTypes.func,onHideAsSpam:m.PropTypes.func,onInlineBan:m.PropTypes.func,onMarkAsNotSpam:m.PropTypes.func,onPreviewRemove:m.PropTypes.func,onRemove:m.PropTypes.func,onRetrySubmit:m.PropTypes.func,onUndoInlineBan:m.PropTypes.func,permalink:m.PropTypes.string,shortenTimestamp:m.PropTypes.bool,showPermalink:m.PropTypes.bool,showRemoveReportMenu:m.PropTypes.bool,showReplies:m.PropTypes.bool,showReplyLink:m.PropTypes.bool,viewerIsAuthor:m.PropTypes.bool},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onRemove(event,this);},_onInlineBan:function(event){this.props.onInlineBan(event);this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.setState({isInlineBanned:false});},_onAction:function(event,ua){var va=ua.item,wa=va.getValue();setTimeout(function(){if(wa===ka.remove){this.props.onRemove(event);}else if(wa===ka.edit){this.props.onEdit(event);}else if(wa===ka.hide)this._onHideAsSpam(event);}.bind(this),0);},_createRemoveReportMenuData:function(){return [{value:ka.remove,label:"Delete Comment..."},{value:ka.hide,label:"Hide Comment"}];},_createEditDeleteMenuData:function(){return [{value:ka.edit,label:"Edit..."},{value:ka.remove,label:"Delete..."}];},_renderCloseButton:function(){var ua=this.props.comment,va=this.props.feedback,wa=null,xa=null,ya=null,za=false;if(ua.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(ua.canedit){ya="Edit or Delete";xa=this._createEditDeleteMenuData();za=true;}else{ya="Remove";wa=this.props.onRemove;}}else if(va.canremoveall)if(this.props.showRemoveReportMenu){ya="Remove or Report";xa=this._createRemoveReportMenuData();}else{ya="Remove";wa=this.props.onRemove;}}else if(ua.canreport){ya="Hide";wa=this._onHideAsSpam;}var ab=(("UFICommentCloseButton")+(wa===null&&xa===null?' '+"hdn":'')),bb=null,cb=null;if(this.props.contextArgs.viewas){bb="/ajax/profile/link_disabled_in_viewas.php";cb="dialog";wa=null;}var db=za?t.MenuType.EDIT:t.MenuType.CLOSE;return (m.createElement(t,{ajaxify:bb,className:ab,onClick:wa,rel:cb,tooltip:ya,menuData:xa,menuType:db,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (m.createElement(ca,{className:"UFICommentCloseButtonFake",tabIndex:"-1"}));},componentDidMount:function(){if(this.state.isHighlighting){var ua=this.getDOMNode();if(this.props.storyInsert&&k._notifStoryUFI(ua)){h.loadModules(["UFIHighlight"],function(va){setTimeout(va.actOn.bind(null,ua),0);});}else h.loadModules(["UFIScrollHighlight"],function(va){setTimeout(va.actOn.bind(null,ua),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(ua,va){var wa=this.props,xa=this.state;return (ua.comment!==wa.comment||ua.showReplyLink!==wa.showReplyLink||ua.showReplies!==wa.showReplies||ua.isFirst!==wa.isFirst||ua.isLast!==wa.isLast||ua.isFirstCommentComponent!==wa.isFirstCommentComponent||ua.isLastCommentComponent!==wa.isLastCommentComponent||ua.isFirstComponent!==wa.isFirstComponent||ua.isLastComponent!==wa.isLastComponent||ua.isFeatured!==wa.isFeatured||ua.hasPartialBorder!==wa.hasPartialBorder||va.wasHighlighted!==xa.wasHighlighted||va.isHighlighting!==xa.isHighlighting||va.markedAsSpamHere!==xa.markedAsSpamHere||va.isInlinePageDeleted!==xa.isInlinePageDeleted||va.isInlineBanned!==xa.isInlineBanned);},render:function(){var ua=this.props.comment,va=this.props.feedback,wa=ua.status===ja.DELETED,xa=ua.status===ja.LIVE_DELETED,ya=ua.status===ja.SPAM_DISPLAY,za=this.state.markedAsSpamHere,ab=this.state.isInlinePageDeleted,bb=this.props.hideAsSpamForPageAdmin,cb=this.state.isInlineBanned,db=ra(ua),eb=!ua.status&&(ua.isunseen||ua.islocal);if(!ua.status&&va.lastseentime){var fb=ua.originalTimestamp||ua.timestamp.time;eb=eb||fb>va.lastseentime;}var gb=this.props.contextArgs.markedcomments;if(gb&&gb[ua.legacyid])eb=true;var hb=((this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));if(db)if(pa){var ib,jb=null,kb=null,lb=null;if(bb){kb=cb?this._onUndoInlineBan:this._onInlineBan;if(ab){ib="You've deleted this comment so no one can see it.";}else if(za){ib="Now this is only visible to the person who wrote it and their friends.";lb=this._onDeleteSpam;jb=this._onMarkAsNotSpam;}}else if(za){ib="This comment has been hidden.";lb=this._onDeleteSpam;jb=this._onMarkAsNotSpam;}if(ib)return (m.createElement("li",{className:fa(q.ROW,hb,"UFIHide")},m.createElement(pa,{notice:ib,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:jb,onBanAction:kb,onDeleteAction:lb,isInlineBanned:cb,isInlinePageDeleted:ab,hideAsSpamForPageAdmin:bb,pageID:this.props.feedback.ownerid})));}else h.loadModules(["UFICommentRemovalControls.react"],function(pb){pa=pb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this));var mb=!wa,nb=fa(q.ROW,hb,(("UFIComment")+(qa(ua)?' '+"UFICommentFailed":'')+(wa||xa||ya?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!mb?' '+"noDisplay":'')+(mb?' '+"display":'')+(' '+"UFIComponent")+(this.props.isFeatured&&!this.props.contextArgs.showverified?' '+"UFIFeaturedComment":'')+(this.props.hasPartialBorder?' '+"UFIPartialBorder":''))),ob=this.renderComment();if(eb)nb=fa(nb,q.UNSEEN_ITEM);return (m.createElement("li",{className:nb,'data-ft':this.props['data-ft']},ob));},renderComment:function(){var ua=this.props,va=ua.comment,wa=va.body.text,xa=sa(va.body.ranges),ya=ua.permalink,za=ua.feedback,ab=ua.authorProfiles[va.author],bb=va.status===ja.SPAM_DISPLAY,cb=va.status===ja.LIVE_DELETED,db=!(bb||cb),eb=za.canremoveall||va.hiddenbyviewer;if(v.commentURLTruncationLength)if(xa&&xa.length>0)wa=ha(wa,xa,function(bc,cc){return cc.entity.external?ba(bc,v.commentURLTruncationLength):bc;});var fb=null,gb=null;if(!ua.isLocallyComposed&&!this.state.wasHighlighted&&!va.fromfetch){gb=v.commentTruncationLength;fb=v.commentTruncationMaxLines;}var hb=n.getTrackingInfo(n.types.SMALL_ACTOR_PHOTO),ib=n.getTrackingInfo(n.types.USER_NAME),jb=n.getTrackingInfo(n.types.USER_MESSAGE),kb=null,lb=null;if(va.istranslatable&&(va.translatedtext===undefined))kb=m.createElement("a",{href:"#",role:"button",title:"Translate this comment",className:la,onClick:ua.onCommentTranslate},"See Translation");if(va.translatedtext){var mb=null,nb=y.BING_PAGE_URL,ob=y.BING_TRANSLATOR_APP;if(va.translatorapp===ob){var pb=new aa(nb).addQueryData({text:wa});mb=m.createElement("span",{className:na},' ',"(",m.createElement("a",{href:pb.toString(),target:"_blank",className:oa},"Translated by Bing"),")");}lb=m.createElement("span",{className:ma},va.translatedtext,mb);}var qb=z.isDirectionLTR(wa),rb=!qb,sb=qb&&l.isRTL()?'ltr':rb&&!l.isRTL()?'rtl':null,tb=function(bc,cc){return j(bc,cc,'_blank',za.grouporeventid,'ufi');},ub=m.createElement(o,{key:"comment-body",className:(("UFICommentBody")+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":'')),interpolator:tb,ranges:xa,text:wa,truncationPercent:v.commentTruncationPercent,maxLength:gb,maxLines:fb,renderEmoticons:u.renderEmoticons,renderEmoji:u.renderEmoji,'data-ft':jb,dir:sb});if(va.socialcontext){ub=m.createElement("div",{key:"body"},ub);}else{var vb=((qb&&l.isRTL()?"_5wjy":'')+(qb&&l.isRTL()?' '+"_5wjz":'')+(rb&&!l.isRTL()?' '+"_5wj-":'')+(rb&&!l.isRTL()?' '+"_5wj_":''));ub=vb?m.createElement("div",{key:"body",className:vb},ub):[' ',ub];}var wb=ua.contextArgs.viewas?null:i.constructEndpointWithLocation(ab,'ufi').toString(),xb=m.createElement(p,{author:ab,showHovercard:!!wb,key:"author",focusOnMount:ua.focusOnMount,'data-ft':ib},ua.isFeatured&&ua.contextArgs.showverified?m.createElement(g,{key:"badge",size:"xsmall",type:"verified"}):null,va.socialcontext?m.createElement(x,{topMutualFriend:ua.authorProfiles[va.socialcontext.topmutualid],otherMutualCount:va.socialcontext.othermutualcount,commentAuthor:ab}):null),yb=null;if(va.photo_comment_status)yb=m.createElement("div",{className:"_50f8"},va.photo_comment_status);var zb=null;if(va.sticker_attachment_status)zb=m.createElement("div",{className:"_50f8"},va.sticker_attachment_status);var ac=null;if(va.status!==ja.DELETED)ac=m.createElement(s,{comment:ua.comment});return (m.createElement(w,{spacing:"medium"},m.createElement("a",{href:ab.uri,'data-hovercard':wb,'data-ft':hb},m.createElement("img",{src:ab.thumbSrc,className:q.ACTOR_IMAGE,alt:""})),m.createElement("div",{className:"UFICommentContentBlock"},m.createElement("div",{className:"UFICommentContent"},xb,ub,kb,lb,ac),yb,zb,m.createElement(r,{comment:va,feedback:za,onBlingBoxClick:ua.onBlingBoxClick,onAlsoRecommendToggle:ua.onAlsoRecommendToggle,onCommentLikeToggle:ua.onCommentLikeToggle,onCommentReply:ua.onCommentReply,onPreviewRemove:ua.onPreviewRemove,onRetrySubmit:ua.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam,permalink:ya,viewerCanMarkNotSpam:eb,shortenTimestamp:ua.shortenTimestamp,showPermalink:ua.showPermalink,showReplyLink:ua.showReplyLink,showReplies:ua.showReplies,contextArgs:ua.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ua.hideAsSpamForPageAdmin}),db?this._renderCloseButton():null),db?this._renderFakeCloseButton():null));}});e.exports=ta;},null);
__d("UFIContainer.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'UFIContainer',render:function(){var j=null;if(this.props.hasNub)j=g.createElement("li",{className:"UFIArrow"},g.createElement("i",null));var k=((!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (g.createElement("ul",{className:k},j,this.props.children));}});e.exports=i;},null);
__d("UFILikeSentence.react",["Bootloader","LeftRight.react","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassNames","UFIImageBlock.react","UFILikeSentenceText.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=k.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:k.PropTypes.object.isRequired,feedback:k.PropTypes.object.isRequired,isFirstComponent:k.PropTypes.bool,isLastComponent:k.PropTypes.bool,onOrderingModeChange:k.PropTypes.func,onTargetLikeToggle:k.PropTypes.func,orderingMode:k.PropTypes.string,showOrderingModeSelector:k.PropTypes.bool},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(t){this._bootloadSelectorModule(t);},_bootloadSelectorModule:function(t){if(t.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var u=function(v){this.setState({selectorModule:v});}.bind(this);if(t.contextArgs.entstream){g.loadModules(["UFIEntStreamOrderingModeSelector.react"],u);}else g.loadModules(["UFIOrderingModeSelector.react"],u);this.setState({bootloadedSelectorModule:true});}},render:function(){var t=this.props.feedback,u=t.likesentences.current,v=this.props.contextArgs.entstream,w=q(l.ROW,t.likesentences.isunseen?l.UNSEEN_ITEM:'',(("UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),x=null,y=null;if(u.text)y=k.createElement("div",{className:"UFILikeSentenceText"},k.createElement(n,{contextArgs:this.props.contextArgs,feedback:t,likeSentenceData:u}));if(y&&!v){x=k.createElement("i",{className:"UFILikeIcon"});if(t.viewercanlike&&!t.hasviewerliked)x=k.createElement("a",{className:"UFILikeThumb",href:"#",tabIndex:"-1",title:"Like this",onClick:this.props.onTargetLikeToggle,role:"button",'aria-label':"Like this"},x);}var z=y,aa=null;if(t.seencount>0&&!v){var ba=j.GROUP_MESSAGE_VIEWERS,ca={id:t.targetfbid},da=i.constructDialogURI(ba,ca),ea=i.constructPageURI(ba,ca),fa=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:t.entidentifier,displayed_count:t.seencount}),ga;if(t.seenbyall){ga="Seen by everyone";}else ga=t.seencount==1?"Seen by 1":r._("Seen by {count}",{count:t.seencount});aa=k.createElement("a",{rel:"dialog",ajaxify:da.toString(),href:ea.toString(),'data-hover':"tooltip",'data-tooltip-alignh':"left",'data-tooltip-uri':fa.toString(),className:(("UFISeenCount")+(!!u.text?' '+"UFISeenCountRight":''))},k.createElement("span",{className:"UFISeenCountIcon"}),ga);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ha=this.state.selectorModule;aa=k.createElement(ha,{currentOrderingMode:this.props.orderingMode,entstream:v,orderingmodes:t.orderingmodes,onOrderChanged:this.props.onOrderingModeChange});if(!z)z=k.createElement("div",null);}var ia=null;if(x&&y){ia=k.createElement(m,null,x,y,aa);}else if(z){ia=k.createElement(h,{direction:h.DIRECTION.right},z,aa);}else ia=aa;return (k.createElement("li",{className:w},ia));}});e.exports=s;},null);
__d("UFIPagerLabel",["fbt","intlList","tx"],function(a,b,c,d,e,f,g,h,i){var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',getReplyLabel:function(k,l){switch(k){case j.VIEW_ONE:return "View 1 reply";case j.VIEW_ONE_MORE:return "View 1 more reply";case j.VIEW_ALL:return i._("View all {count} replies",{count:l.count});case j.VIEW_MORE_EXPLICIT:return i._("View {count} more replies",{count:l.count});case j.VIEW_MORE:return "View more replies";case j.VIEW_PREVIOUS:return "View previous replies";default:return null;}},getCommentLabel:function(k,l){if(l.commenters)return this.getCommentLabelWithCommentSentence(k,l);switch(k){case j.VIEW_ONE:return "View 1 comment";case j.VIEW_ONE_MORE:return "View 1 more comment";case j.VIEW_ALL:return i._("View all {count} comments",{count:l.count});case j.VIEW_MORE_EXPLICIT:return i._("View {count} more comments",{count:l.count});case j.VIEW_MORE:return "View more comments";case j.VIEW_PREVIOUS:return "View previous comments";default:return null;}},getCommentLabelWithCommentSentence:function(k,l){var m=h(l.commenters);switch(k){case j.VIEW_ONE:return g._("View 1 comment from {names}",[g.param("names",m)]);case j.VIEW_ONE_MORE:return g._("View 1 more comment from {names}",[g.param("names",m)]);case j.VIEW_ALL:switch(l.othersCount){case 0:return g._("View all {count} comments from {names}",[g.param("count",l.count),g.param("names",m)]);case 1:return g._("View all {count} comments from {names} and 1 other person",[g.param("count",l.count),g.param("names",m)]);default:return g._("View all {count} comments from {names} and {othersCount} others",[g.param("count",l.count),g.param("names",m),g.param("othersCount",l.othersCount)]);}break;case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(l.othersCount){case 0:return g._("View more comments from {names}",[g.param("names",m)]);case 1:return g._("View more comments from {names} and 1 other person",[g.param("names",m)]);default:return g._("View more comments from {names} and {othersCount} others",[g.param("names",m),g.param("othersCount",l.othersCount)]);}break;case j.VIEW_PREVIOUS:switch(l.othersCount){case 0:return g._("View previous comments from {names}",[g.param("names",m)]);case 1:return g._("View previous comments from {names} and 1 other person",[g.param("names",m)]);default:return g._("View previous comments from {names} and {othersCount} others",[g.param("names",m),g.param("othersCount",l.othersCount)]);}break;default:return null;}},getQuestionLabel:function(k,l){switch(k){case j.VIEW_ONE:return "View 1 question";case j.VIEW_ONE_MORE:return "View 1 more question";case j.VIEW_ALL:return g._("View all {count} questions",[g.param("count",l.count)]);case j.VIEW_MORE_EXPLICIT:return g._("View {count} more questions",[g.param("count",l.count)]);case j.VIEW_MORE:return "View more questions";case j.VIEW_PREVIOUS:return "View previous questions";default:return null;}},getLabel:function(k,l,m,n){if(l){return j.getReplyLabel(k,n);}else if(m){return j.getQuestionLabel(k,n);}else return j.getCommentLabel(k,n);}};e.exports=j;},null);
__d("UFIReplySocialSentence.react",["Badge.react","LiveTimer","React","Timestamp.react","UFIClassNames","UFIConstants","UFIImageBlock.react","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=' \u00b7 ',r=43200,s=i.createClass({displayName:'UFIReplySocialSentence',propTypes:{authors:i.PropTypes.object.isRequired,'data-ft':i.PropTypes.string,isExpanded:i.PropTypes.bool,isFirstComponent:i.PropTypes.bool,isLastComponent:i.PropTypes.bool,isLoading:i.PropTypes.bool,onClick:i.PropTypes.func,orderingMode:i.PropTypes.string,replies:i.PropTypes.number,shortenTimestamp:i.PropTypes.bool,showVerified:i.PropTypes.bool,timestamp:i.PropTypes.object},render:function(){var t=((this.props.isLoading?"UFIReplySocialSentenceLoading":'')),u=o(k.ROW,(("UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),v,w;if(this.props.isExpanded){v=this.props.replies>1?p._("Hide {count} Replies",{count:this.props.replies}):"Hide 1 Reply";}else{v=this.props.replies>1?p._("{count} Replies",{count:this.props.replies}):"1 Reply";if(this.props.timestamp){var x=h.getApproximateServerTime()/1000-this.props.timestamp.time;if(x<r||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)w=i.createElement("span",{className:"fcg"},q,i.createElement(j,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var y=Object.keys(this.props.authors),z=y.length&&!this.props.isExpanded,aa=null,ba;if(z){var ca=this.props.authors[y[0]];aa=i.createElement("img",{alt:"",src:ca.thumbSrc,className:k.ACTOR_IMAGE});var da=ca.name;if(this.props.showVerified)da=[ca.name,i.createElement(g,{size:"xsmall",type:"verified"})];ba=[p._("{author} replied",{author:da}),q,v];}else ba=v;var ea=null,fa=false;if(!z||this.props.contextArgs.feedcarded){if(z)fa=true;ea=i.createElement("i",{className:((!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(fa?' '+"UFIFeedCardedIconWithActor":''))});}return (i.createElement("li",{className:u,'data-ft':this.props['data-ft']},i.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},i.createElement(m,null,i.createElement("div",{className:((z?"UFIReplyActorPhotoWrapper":'')+(fa?' '+"UFIFeedCardedReplyActor":''))},ea,aa),i.createElement("span",{className:t},i.createElement("span",{className:(("UFIReplySocialSentenceLinkText")+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":''))},ba),w)))));}});e.exports=s;},null);
__d("UFIShareRow.react",["NumberFormat","React","UFIClassNames","UFIImageBlock.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:h.PropTypes.object.isRequired,shareCount:h.PropTypes.number.isRequired,targetID:h.PropTypes.any.isRequired,isFirstComponent:h.PropTypes.bool,isLastComponent:h.PropTypes.bool},render:function(){var p=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),q=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),r;if(this.props.shareCount>1){var s=g.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');r=n._("{count} shares",{count:s});}else r="1 share";var t=m(i.ROW,(("UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (h.createElement("li",{className:t},h.createElement(j,null,h.createElement("a",{className:"UFIShareIcon",rel:"dialog",ajaxify:p.toString(),href:q.toString()}),h.createElement("a",{className:"UFIShareLink",rel:"dialog",ajaxify:p.toString(),href:q.toString()},r))));}});e.exports=o;},null);
__d("UFISpamPlaceholder.react",["React","UFIClassNames","XUISpinner.react","fbt","tx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:g.PropTypes.number.isRequired,isLoading:g.PropTypes.bool,onClick:g.PropTypes.func},render:function(){if(this.props.isLoading)return (g.createElement("li",{className:h.ROW},g.createElement("span",{className:"UFISpamCommentWrapper"},g.createElement(i,{className:"mls",background:"light",size:"small"}))));return (g.createElement("li",{className:h.ROW},g.createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,'aria-label':"Show comments marked as spam"},g.createElement("span",{'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':k._("{count} hidden",{count:this.props.numHidden}),className:"UFISpamCommentWrapper"},g.createElement("i",{className:"placeholderIcon"})))));}});e.exports=l;},null);
__d("UFI.react",["DOMScroll","Event","NumberFormat","React","LegacyScrollableArea.react","ScrollAwareDOM","SearchableEntry","TrackingNodes","UFIAddCommentController","UFIAddCommentLink.react","UFIComment.react","UFIConstants","UFIContainer.react","UFIInstanceState","UFILikeSentence.react","UFIPager.react","UFIPagerLabel","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholder.react","Vector","copyProperties","getUnboundedScrollPosition","isEmpty","throttle","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){"use strict";var ga={TOP:'top',BOTTOM:'bottom',ALL:'all'},ha=j.createClass({displayName:'UFI',getInitialState:function(){return {instanceShowRepliesMap:{},instanceShowReplySocialSentenceMap:{},loadingSpamIDs:{},isActiveLoading:{},commentIDToFocusOnMount:null,replyComposerIDToFocusOnMount:null,hasPagedToplevel:false};},componentDidMount:function(){this.suppressScrolls=0;this.scrollSubscription=l.subscribe('scroll',function(){if(this.suppressScrolls>0){this.suppressScrolls--;return false;}return true;}.bind(this));if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var ia=ea(this.loadMoreComments,20);this._scrollEventListener=h.listen(window,'scroll',ia);this._resizeEventListener=h.listen(window,'resize',ia);}},componentWillUnmount:function(){if(this.scrollSubscription){l.unsubscribe(this.scrollSubscription);this.scrollSubscription=null;}if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentWillReceiveProps:function(ia){var ja=ba({},this.state.isActiveLoading),ka;for(ka in this.state.isActiveLoading){var la=this.props.ranges[this.props.id],ma=ia.ranges[this.props.id];if(la.getOffset()!=ma.getOffset()||la.getLength()!=ma.getLength()){var na=(ma.getOffset()<la.getOffset())?0:la.getLength();if(na<ia.availableComments.length)this.setState({commentIDToFocusOnMount:ia.availableComments[na].id});}delete ja[ka];}this.setState({isActiveLoading:ja});},componentDidUpdate:function(ia,ja,ka){var la=this.state.replyComposerIDToFocusOnMount;if(this.refs&&la in this.refs){this.refs[la].focus();this.setState({replyComposerIDToFocusOnMount:null});}},componentWillUpdate:function(ia,ja,ka){var la,ma;for(la in this.state.isActiveLoading){ma=this.state.isActiveLoading[la];if(ma!==ga.TOP)this.suppressScrolls++;}},render:function(){var ia=this.props,ja=ia.feedback,ka=ia.contextArgs,la=ia.source!=r.UFIFeedbackSourceType.ADS,ma=!ia.hideOrderingModeSelector&&ja.orderingmodes&&ia.commentCounts[ia.id]>=r.minCommentsForOrderingModeSelector,na=(!da(ja.likesentences.current)||(ja.seencount>0&&!ka.entstream)||ma)&&ka.search!==true&&la,oa=null;if(na)oa=j.createElement(u,{contextArgs:ka,feedback:ja,onTargetLikeToggle:ia.onTargetLikeToggle,onOrderingModeChange:ia.onOrderingModeChange,orderingMode:ia.orderingMode,showOrderingModeSelector:ma});var pa=ia.availableComments&&ia.availableComments.length&&la,qa=null;if(pa)qa=this.renderCommentMap(ia.availableComments,ia.ranges[ia.id].getOffset());var ra=null,sa=ja.cancomment,ta=sa&&ka.showaddcomment&&ja.actorforpost&&ia.canAddCommentMap[ia.id];if(ta){var ua=new o(null,ia.id,null,ka),va=ia.authorProfiles[ja.actorforpost];ra=ua.renderAddComment(va,ja.ownerid,ja.mentionsdatasource,ja.showsendonentertip,'toplevelcomposer',null,ja.subtitle,ja.allowphotoattachments,ja.allowstickerattachments,ja.isqanda);}var wa=null,xa=ka.showshares&&ja.sharecount&&la;if(xa&&!ka.entstream)wa=j.createElement(y,{targetID:ja.targetfbid,shareCount:ja.sharecount,contextArgs:ka});var ya=na||xa||pa||sa,za=this.renderPagers();this.applyToUFIComponents([za.topPager],qa,[za.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});var ab=ja.isranked?ra:null,bb=ja.isranked?null:ra,cb=null;if(ta&&ja.isranked&&this.state.hasPagedToplevel)cb=j.createElement(p,{onClick:this.onComment,isQAndA:ja.isqanda});this.applyToUFIComponents([oa,wa,ab,za.topPager],qa,[za.bottomPager,bb,cb],{isFirstComponent:true},{isLastComponent:true});var db=[za.topPager,qa,za.bottomPager];if(ka.scrollcomments&&ka.scrollwidth)db=j.createElement("li",null,j.createElement(k,{width:ka.scrollwidth},j.createElement("ul",null,db)));return (j.createElement(s,{hasNub:ka.shownub&&ya},oa,wa,ab,db,bb,cb));},applyToUFIComponents:function(ia,ja,ka,la,ma){var na=Object.keys(ja||{}).map(function(pa){return ja[pa];}).filter(function(pa){return (pa&&pa.props.comment&&this._shouldRenderComment(pa.props.comment));}.bind(this)),oa=[].concat(ia,na,ka);this._applyToFirstComponent(oa,la);oa.reverse();this._applyToFirstComponent(oa,ma);},_shouldRenderComment:function(ia){return ia.status!==r.UFIStatus.DELETED;},_applyToFirstComponent:function(ia,ja){for(var ka=0;ka<(ia||[]).length;ka++)if(ia[ka]){ba(ia[ka].props,ja);return;}},renderCommentMap:function(ia,ja){var ka=this.props,la={},ma=ia.length;if(!ma)return la;var na=ia[0].parentcommentid,oa=[],pa=function(){if(oa.length>0){var xa=function(ya,za){this.state.loadingSpamIDs[ya[0]]=true;this.forceUpdate();ka.onSpamFetch(ya,za);}.bind(this,oa,na);la['spam'+oa[0]]=j.createElement(z,{onClick:xa,numHidden:oa.length,isLoading:!!this.state.loadingSpamIDs[oa[0]]});oa=[];}}.bind(this),qa=ka.instanceid,ra=t.getKeyForInstance(qa,'editcommentid'),sa=!!ia[0].parentcommentid;for(var ta=0;ta<ma;ta++)if(ia[ta].status==r.UFIStatus.SPAM){oa.push(ia[ta].id);}else{pa();var ua=Math.max(ka.loggingOffset-ta-ja,0),va=ia[ta],wa;if(va.id==ra){wa=this.renderEditCommentBox(va);}else{wa=this.renderComment(va,ua);wa.props.isFirst=ta===0;wa.props.isLast=ta===ma-1;if(!sa)wa.props.showReplyLink=true;}la['comment'+va.id]=wa;if(va.status!==r.UFIStatus.DELETED)la['replies'+va.id]=this.renderReplyContainer(va);}pa();return la;},renderReplyContainer:function(ia){var ja=this.props,ka={};for(var la=0;la<(ia.replyauthors||[]).length;la++){var ma=ja.authorProfiles[ia.replyauthors[la]];if(ma)ka[ma.id]=ma;}var na=ja.repliesMap&&ja.repliesMap[ia.id]&&this._shouldShowCommentReplies(ia.id),oa,pa=ja.commentCounts[ia.id],qa=Math.max(pa-ia.spamreplycount,0);if(qa&&this._shouldShowReplySocialSentence(ia.id)){var ra=this._shouldShowCommentReplies(ia.id)&&(this.isLoadingPrev(ia.id)||this.isLoadingNext(ia.id));oa=j.createElement(x,{contextArgs:ja.contextArgs,authors:ka,replies:qa,shortenTimestamp:ja.shortenTimestamp,timestamp:ia.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,ia),isLoading:ra,isExpanded:na,showVerified:this.props.contextArgs.showverified&&this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var sa,ta,ua,va;if(na){var wa=this.renderPagers(ia.id);sa=wa.topPager;ua=wa.bottomPager;ta=this.renderCommentMap(ja.repliesMap[ia.id],ja.ranges[ia.id].getOffset());var xa=Object.keys(ta);for(var ya=0;ya<xa.length;ya++){var za=ta[xa[ya]];if(za)za.props.hasPartialBorder=ya!==0;}if(ia.cancomment&&ja.canAddCommentMap[ia.id]){var ab=false,bb=Object.keys(ta);for(var la=bb.length-1;la>=0;la--){var cb=bb[la];if(cb&&ta[cb]){ab=ta[cb].props.isAuthorReply;break;}}va=this.renderReplyComposer(ia,!ab);}}var db;if(oa||sa||ta||ua||va){this.applyToUFIComponents([oa,sa],ta,[ua,va],{isFirstComponent:true},{isLastComponent:true});var eb=ia.status===r.UFIStatus.LIVE_DELETED;db=j.createElement(s,{isParentLiveDeleted:eb,isReplyList:true},oa,sa,ta,ua,va);}return db;},renderReplyComposer:function(ia,ja){var ka=this.props;return (new o(null,ka.id,ia.id,ka.contextArgs)).renderAddComment(ka.authorProfiles[ka.feedback.actorforpost],ka.feedback.ownerid,ka.feedback.mentionsdatasource,false,'replycomposer-'+ia.id,ja,ka.feedback.subtitle,ka.feedback.allowphotoattachments,ka.feedback.allowstickerattachments,ka.feedback.isqanda);},renderEditCommentBox:function(ia){var ja=new o(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),ka=ja.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,ia.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,ia),this.props.onCancelEdit,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return ka;},_shouldShowCommentReplies:function(ia){if(ia in this.state.instanceShowRepliesMap){return this.state.instanceShowRepliesMap[ia];}else if(ia in this.props.showRepliesMap)return this.props.showRepliesMap[ia];return false;},_shouldShowReplySocialSentence:function(ia){if(ia in this.state.instanceShowReplySocialSentenceMap){return this.state.instanceShowReplySocialSentenceMap[ia];}else if(ia in this.props.showReplySocialSentenceMap)return this.props.showReplySocialSentenceMap[ia];return false;},renderComment:function(ia,ja){var ka=this.props,la=ka.feedback,ma=la.actorforpost===ia.author,na=t.getKeyForInstance(this.props.instanceid,'locallycomposed'),oa=ia.islocal||na&&na[ia.id],pa=la.showremovemenu||(la.viewerid===ia.author),qa=la.canremoveall&&la.isownerpage&&!ma,ra=ka.source!=r.UFIFeedbackSourceType.INTERN,sa=n.getTrackingInfo(n.types.COMMENT,ja),ta=!!ia.parentcommentid,ua=this._shouldShowCommentReplies(ia.id),va=!!ia.isfeatured;return (j.createElement(q,{comment:ia,authorProfiles:this.props.authorProfiles,viewerIsAuthor:ma,feedback:la,'data-ft':sa,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:qa,isLocallyComposed:oa,isReply:ta,isFeatured:va,permalink:ka.commentPermalinks[ia.id],shortenTimestamp:ka.shortenTimestamp,showPermalink:ra,showRemoveReportMenu:pa,showReplies:ua,focusOnMount:ia.id===this.state.commentIDToFocusOnMount,onAlsoRecommendToggle:ka.onAlsoRecommendToggle.bind(null,ia),onCommentLikeToggle:ka.onCommentLikeToggle.bind(null,ia),onCommentReply:this.onCommentReply.bind(this,ia),onCommentTranslate:ka.onCommentTranslate.bind(null,ia),onEdit:ka.onCommentEdit.bind(null,ia),onHideAsSpam:ka.onCommentHideAsSpam.bind(null,ia),onInlineBan:ka.onCommentInlineBan.bind(null,ia),onMarkAsNotSpam:ka.onCommentMarkAsNotSpam.bind(null,ia),onPreviewRemove:ka.onPreviewRemove.bind(null,ia),onRemove:ka.onCommentRemove.bind(null,ia),onRetrySubmit:ka.onRetrySubmit.bind(null,ia),onUndoInlineBan:ka.onCommentUndoInlineBan.bind(null,ia),storyInsert:this.props.storyInsert}));},_updateRepliesState:function(ia,ja,ka){var la=this.state.instanceShowRepliesMap;la[ia]=ja;var ma=this.state.instanceShowReplySocialSentenceMap;ma[ia]=ka;this.setState({instanceShowRepliesMap:la,instanceShowReplySocialSentenceMap:ma,replyComposerIDToFocusOnMount:ja?'replycomposer-'+ia:null});},onToggleReplies:function(ia){var ja=!this._shouldShowCommentReplies(ia.id),ka=this.props.commentCounts[ia.id],la=this._shouldShowReplySocialSentence(ia.id)&&!(ja&&ka<=this.props.replySocialSentenceMaxReplies);this._updateRepliesState(ia.id,ja,la);var ma=this.props.ranges[ia.id].getRequestedLength();ma-=this.props.deletedCounts[ia.id];if(ja&&ma===0){var na=this.props.commentCounts[ia.id],oa=Math.min(na,this.props.pageSize);this.onPage(ia.id,ga.BOTTOM,{offset:na-oa,length:oa});}},onPage:function(ia,ja,ka){var la=this.state.hasPagedToplevel||ia===this.props.id,ma=ba({},this.state.isActiveLoading);ma[ia]=ja;this.setState({isActiveLoading:ma,hasPagedToplevel:la});this.props.onChangeRange(ia,ka);},isLoadingPrev:function(ia){var ja=this.props;ia=ia||ja.id;var ka=ja.ranges[ia].getRequestedOffset(),la=ja.ranges[ia].getOffset();return ka<la;},isLoadingNext:function(ia){var ja=this.props;ia=ia||ja.id;var ka=ja.ranges[ia].getRequestedOffset(),la=ja.ranges[ia].getRequestedLength(),ma=ja.ranges[ia].getOffset(),na=ja.ranges[ia].getLength();return ka+la>ma+na;},renderPagers:function(ia){var ja=this.props;ia=ia||ja.id;var ka=ja.ranges[ia].getOffset(),la=ja.ranges[ia].getLength(),ma=ja.deletedCounts[ia],na=ja.commentCounts[ia],oa=na-ma,pa=la-ma,qa=ja.contextArgs.numberdelimiter||',',ra=ia!==ja.id,sa={topPager:null,bottomPager:null};if(ja.source==r.UFIFeedbackSourceType.ADS)return sa;var ta=this.isLoadingPrev(ia),ua=this.isLoadingNext(ia);if(la==na)return sa;var va={},wa=ja.feedback.commentsentenceinfo;if(wa){va.commenters=wa.explicit_commenter_names;va.othersCount=wa.other_commenter_count;}var xa=(ka+la)==na;if((na<ja.pageSize&&xa)||pa===0){var ya=Math.min(na,ja.pageSize),za=this.onPage.bind(this,ia,ja.feedback.isranked&&!ra?ga.BOTTOM:ga.TOP,{offset:na-ya,length:ya}),ab,bb;if(pa===0){if(oa==1){ab=w.VIEW_ONE;}else{bb=i.formatIntegerWithDelimiter(oa,qa);ab=w.VIEW_ALL;}}else if(oa-pa==1){ab=w.VIEW_ONE_MORE;}else{ab=w.VIEW_MORE_EXPLICIT;bb=i.formatIntegerWithDelimiter(oa-pa,qa);}var cb=n.getTrackingInfo(n.types.VIEW_ALL_COMMENTS);va.count=bb;var db=w.getLabel(ab,ra,ja.feedback.isqanda,va),eb=ja.feedback.isranked&&!ra,fb=j.createElement(v,{key:"allPager",ref:eb?"bottomPager":"topPager",contextArgs:ja.contextArgs,isUnseen:ja.feedback.hasunseencollapsed,isLoading:ta,pagerLabel:db,onPagerClick:za,'data-ft':cb});if(eb){sa.bottomPager=fb;}else sa.topPager=fb;return sa;}var gb=w.getLabel(w.VIEW_MORE,ra,ja.feedback.isqanda,va),hb=w.getLabel(w.VIEW_PREVIOUS,ra,ja.feedback.isqanda,va);if(ka>0){var ib=Math.max(ka-ja.pageSize,0),ya=ka+la-ib,jb=i.formatIntegerWithDelimiter(pa,qa),kb=i.formatIntegerWithDelimiter(oa,qa),lb=fa._("{countshown} of {totalcount}",{countshown:jb,totalcount:kb}),mb;if(ja.feedback.isranked&&!ra){mb=this.onPage.bind(this,ia,ga.BOTTOM,{offset:ib,length:ya});sa.bottomPager=j.createElement(v,{key:"bottomPager",ref:"bottomPager",contextArgs:ja.contextArgs,isLoading:ta,pagerLabel:gb,onPagerClick:mb,countSentence:lb});}else{mb=this.onPage.bind(this,ia,ga.TOP,{offset:ib,length:ya});sa.topPager=j.createElement(v,{key:"topPager",ref:"topPager",contextArgs:ja.contextArgs,isLoading:ta,pagerLabel:hb,onPagerClick:mb,countSentence:lb});}}if(ka+la<na){var nb=Math.min(la+ja.pageSize,na-ka),ob;if(ja.feedback.isranked&&!ra){ob=this.onPage.bind(this,ia,ga.TOP,{offset:ka,length:nb});sa.topPager=j.createElement(v,{key:"topPager",ref:"topPager",contextArgs:ja.contextArgs,isLoading:ua,pagerLabel:hb,onPagerClick:ob});}else{ob=this.onPage.bind(this,ia,ga.BOTTOM,{offset:ka,length:nb});sa.bottomPager=j.createElement(v,{key:"bottomPager",ref:"bottomPager",contextArgs:ja.contextArgs,isLoading:ua,pagerLabel:gb,onPagerClick:ob});}}return sa;},loadMoreComments:function(){if(this.scrollSubscription&&this.refs.bottomPager&&!(this.props.id in this.state.isActiveLoading)){var ia=this.refs.bottomPager.getDOMNode(),ja=ca(window).y,ka=ja+document.documentElement.clientHeight+r.infiniteScrollRangeForQANDAPermalinks;if(ia.offsetHeight&&ia.offsetTop<ka)this.refs.bottomPager.props.onPagerClick();}},_scrollToAddComment:function(){if(this.refs.toplevelcomposer){var ia=this.refs.toplevelcomposer.getDOMNode(),ja=80,ka=ia.getBoundingClientRect().top;if(ka<ja||ka>aa.getViewportDimensions().y-ja)g.scrollTo(ia,true,false,ja);}},onCommentReply:function(ia){var ja=ia.parentcommentid||ia.id;if(this.props.feedback.isthreaded&&ia.cancomment){if(!this._shouldShowCommentReplies(ja)){this.onToggleReplies(ia);}else if(this.refs&&this.refs['replycomposer-'+ja])this.refs['replycomposer-'+ja].focus();}else if(this.props.contextArgs.simplereply&&ia.author&&this.refs.toplevelcomposer&&this.refs.toplevelcomposer.insertMention){var ka=this.props.authorProfiles[ia.author].type,la=new m({uniqueID:ia.author,title:this.props.authorProfiles[ia.author].name,type:ka==='friend'?'user':ka});this.refs.toplevelcomposer.insertMention(la);this._scrollToAddComment();}},onComment:function(){if(this.refs&&this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();var ia=this.refs.toplevelcomposer.getDOMNode(),ja=60;if(ia.getBoundingClientRect().top<ja)g.scrollTo(ia,true,true);}}});e.exports=ha;},null);
__d("UFIFeaturedReplyCommentList",["UFIReplyCommentList"],function(a,b,c,d,e,f,g){"use strict";for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;j.getCommentList=function(k,l){};function j(k,l,m,n){g.call(this,k,l);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){var s=q[r];this.addComment(s.id,s.clientid,s.legacyid);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};e.exports=j;},null);
__d("UFIFeaturedToplevelCommentList",["UFIConstants","UFIToplevelCommentList"],function(a,b,c,d,e,f,g,h){"use strict";for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;k.getCommentList=function(l,m){};k.getCommentListsForFeedbackTargetID=function(l){};k.getCommentListForFeedbackTargetID_UNSAFE=function(l){};k.resetCommentListsForFeedbackTargetID=function(l){};function k(l,m,n){h.call(this,l,g.UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){var s=q[r];this.addComment(s.id,s.clientid,s.legacyid);}.bind(this));}k.prototype.fetchComments=function(l,m,n){};e.exports=k;},null);
__d("UFIRange",[],function(a,b,c,d,e,f){"use strict";function g(h,i){this.offset=h||0;this.length=i||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}g.prototype.getOffset=function(){return this.offset;};g.prototype.getLength=function(){return this.length;};g.prototype.updateRange=function(h,i){this.offset=h;this.length=i;if(this.requestedLength>0){var j=Math.min(this.offset,this.requestedOffset),k=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=j;this.requestedLength=k-j;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};g.prototype.getRequestedOffset=function(){return this.requestedOffset;};g.prototype.getRequestedLength=function(){return this.requestedLength;};g.prototype.updateRequestedRange=function(h,i){this.requestedOffset=h;this.requestedLength=i;};e.exports=g;},null);
__d("UFIController",["Arbiter","Bootloader","CSS","DOM","LayerRemoveOnHide","LiveTimer","Parent","React","ReactMount","ShortProfiles","UFI.react","UFIActionLinkController","UFICentralUpdates","UFIFeaturedReplyCommentList","UFIFeaturedToplevelCommentList","UFICommentTemplates","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFIRange","UFIReplyCommentList","UFIToplevelCommentList","UFIUserActions","URI","isEmpty","onEnclosingPageletDestroy","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){"use strict";var ha=function(la,ma,na,oa,pa){var qa=la+ma===na;return {offset:la,length:(qa&&ia(pa))?oa-la:ma};},ia=function(la){return la==w.UFIPayloadSourceType.USER_ACTION||la==w.UFIPayloadSourceType.LIVE_SEND;},ja=function(la,ma){for(var na=0;na<ma.length;na++){var oa=ma[na];if(oa.author)la.push(oa.author);if(oa.socialcontext)la.push(oa.socialcontext.topmutualid);if(oa.replyauthors&&oa.replyauthors.length)for(var pa=0;pa<oa.replyauthors.length;pa++)la.push(oa.replyauthors[pa]);}};function ka(la,ma,na){this.root=la;this.id=ma.ftentidentifier;this.source=ma.source;this.$UFIController0=ma.instanceid;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController1=ma;this.$UFIController1.rootid=this.root.id;this.$UFIController2=false;this.storyInsert=ma.storyInsert;var oa=na.feedbacktargets[0];this.actionLink=new r(la,this.$UFIController1,oa);this.orderingMode=oa.defaultcommentorderingmode;var pa=null;if(na.featuredcommentlists&&na.featuredcommentlists.comments&&na.featuredcommentlists.comments[this.id]){pa=na.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new u(this.id,pa.values,na.comments);}else pa=na.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.showRepliesMap={};this.showReplySocialSentenceMap={};this.shortenTimestamp=ma.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();var qa=oa.orderingmodes||[{value:this.orderingMode}];qa.forEach(function(ua){this.ranges[ua.value]=new z(pa.range.offset,pa.range.length);}.bind(this));var ra,sa,ta;if(na.commentlists.replies)for(ra=0;ra<pa.values.length;ra++){sa=pa.values[ra];ta=na.commentlists.replies[sa];if(ta){this.commentcounts[sa]=this.getReplyCommentList(sa).getCommentCount();this.getReplyRange(sa).updateRange(ta.range.offset,ta.range.length);}}if(na.featuredcommentlists)if(na.featuredcommentlists.replies)for(ra=0;ra<pa.values.length;ra++){sa=pa.values[ra];ta=na.featuredcommentlists.replies[sa];if(ta){this.featuredReplyCommentLists[sa]=new t(this.id,sa,ta.values,na.comments);this.commentcounts[sa]=this.getReplyCommentList(sa).getCommentCount();this.getReplyRange(sa).updateRange(ta.range.offset,ta.range.length);}}this.$UFIController3=null;this.$UFIController4=null;this.ufiCentralUpdatesSubscriptions=[s.subscribe('feedback-updated',function(ua,va){var wa=va.updates,xa=va.payloadSource;if(xa!=w.UFIPayloadSourceType.COLLAPSED_UFI&&this.id in wa)this.fetchAndUpdate(this.render.bind(this),xa);}.bind(this)),s.subscribe('feedback-id-changed',function(ua,va){var wa=va.updates;if(this.id in wa)this.id=wa[this.id];}.bind(this)),s.subscribe('instance-updated',function(ua,va){var wa=va.updates;if(this.$UFIController0 in wa){var xa=wa[this.$UFIController0];if(xa.editcommentid)this.render(va.payloadSource);}}.bind(this))];this.clearPageletSubscription=fa(this.root,this.$UFIController6.bind(this));this.clearPageSubscription=g.subscribe('ufi/page_cleared',this.$UFIController7.bind(this));s.handleUpdate(w.UFIPayloadSourceType.INITIAL_SERVER,na);if(this.$UFIController1.viewas)this.viewasUFICleanSubscription=g.subscribe('pre_page_transition',function(ua,va){if(this.$UFIController1.viewas!==da(va.to).getQueryData('viewas'))ba.resetCommentListsForFeedbackTargetID(this.id);}.bind(this));h.loadModules(["ScrollAwareDOM"],function(ua){o.scrollMonitor=ua.monitor;});if(ma.notifyonload)g.inform('inlineStory/ufiLoaded');g.inform('notifStory/ufiLoaded');}ka.prototype.$UFIController8=function(){if(!this.$UFIController9)this.$UFIController9=m.byTag(this.root,'form');return this.$UFIController9;};ka.prototype.$UFIControllera=function(event){var la=!this.feedback.hasviewerliked;ca.changeLike(this.id,la,{source:this.source,target:event.target,rootid:this.$UFIController1.rootid});event.preventDefault();};ka.prototype.$UFIControllerb=function(la,event){var ma=!la.hasviewerliked;ca.changeCommentLike(la.id,ma,{source:this.source,target:event.target});};ka.prototype.$UFIControllerc=function(la,event){ca.changeAlsoRecommend(la,!la.hasviewerrecommended);};ka.prototype.$UFIControllerd=function(la){y.updateState(this.$UFIController0,'isediting',true);y.updateState(this.$UFIController0,'editcommentid',la.id);};ka.prototype.$UFIControllere=function(la,ma,event){if(!ma.visibleValue&&!ma.attachedPhoto&&!ma.attachedSticker){this.$UFIControllerf(la,event);}else ca.editComment(la.id,ma.visibleValue,ma.encodedValue,{source:this.$UFIController1.source,target:event.target,attachedPhoto:ma.attachedPhoto,attachedSticker:ma.attachedSticker});y.updateStateField(this.$UFIController0,'locallycomposed',la.id,true);this.$UFIControllerg();};ka.prototype.$UFIControllerg=function(){y.updateState(this.$UFIController0,'isediting',false);y.updateState(this.$UFIController0,'editcommentid',null);};ka.prototype.$UFIControllerf=function(la,event,ma){this.$UFIControllerh(la,false,event,ma);};ka.prototype.$UFIControllerh=function(la,ma,event,na){var oa=v[':fb:ufi:hide-dialog-template'].build();j.setContent(oa.getNode('body'),"Are you sure you want to delete this comment?");j.setContent(oa.getNode('title'),"Delete Comment");h.loadModules(["DialogX"],function(pa){var qa=new pa({modal:true,width:465,addedBehaviors:[k]},oa.getRoot());qa.subscribe('confirm',function(){ca.removeComment(la.id,{source:this.source,oneclick:ma,target:event.target,timelinelogdata:this.$UFIController1.timelinelogdata});if(na)na.setState({isInlinePageDeleted:true});qa.hide();}.bind(this));qa.show();}.bind(this));};ka.prototype.$UFIControlleri=function(la,event){ca.setHideAsSpam(la.id,true,{source:this.source,target:event.target});};ka.prototype.$UFIControllerj=function(la,event){ca.setHideAsSpam(la.id,false,{source:this.source,target:event.target});};ka.prototype.$UFIControllerk=function(la,event){ca.translateComment(la,{source:this.source,target:event.target});};ka.prototype.$UFIControllerl=function(la,ma,event){ca.banUser(la,this.feedback.ownerid,ma,{source:this.source,target:event.target});};ka.prototype.$UFIControllerm=function(la,event){this.$UFIControllerl(la,true,event);};ka.prototype.$UFIControllern=function(la,event){this.$UFIControllerl(la,false,event);};ka.prototype.$UFIControllero=function(la,ma){ca.fetchSpamComments(this.id,la,ma,this.$UFIController1.viewas);};ka.prototype.$UFIControllerp=function(la,event){ca.removePreview(la,{source:this.source,target:event.target});};ka.prototype.$UFIControllerq=function(la){h.loadModules(["UFIRetryActions"],function(ma){ma.retrySubmit(la,{source:this.source});}.bind(this));};ka.prototype.$UFIControllerr=function(){if(this.$UFIController2)return;var la=m.byTag(this.root,'form');if(la){i.removeClass(la,'collapsed_comments');this.$UFIController2=true;}};ka.prototype.setRange=function(la){this.getRange().updateRange(la.offset,la.length);};ka.prototype.setReplyRange=function(la,ma){this.getReplyRange(la).updateRange(ma.offset,ma.length);};ka.prototype.render=function(la){var ma=this.comments.length||!ea(this.feedback.likesentences.current);if(ma&&ia(la))this.$UFIControllerr();var na=this.getRange();if(this.$UFIController3===null)this.$UFIController3=na.getOffset()+na.getLength()-1;var oa=this.feedback.replysocialsentencemaxreplies||-1,pa={};pa[this.id]=this.getToplevelCommentList().getDeletedCount();var qa={},ra={};ra[this.id]=!this.featuredToplevelCommentList;this.comments.forEach(function(wa){var xa=wa.id;pa[xa]=this.getReplyCommentList(xa).getDeletedCount();qa[xa]=this.getToplevelCommentList().getPermalinkForComment(xa);ra[xa]=!this.featuredReplyCommentLists[xa];if(this.repliesMap[xa])this.repliesMap[xa].forEach(function(ya){var za=ya.id;qa[za]=aa.getCommentList(this.id,xa).getPermalinkForComment(za);}.bind(this));}.bind(this));var sa={};sa[this.id]=na;for(var ta in this.replyRanges)sa[ta]=this.replyRanges[ta];var ua=!!this.featuredToplevelCommentList,va=n.createElement(q,{feedback:this.feedback,id:this.id,storyInsert:this.storyInsert,onTargetLikeToggle:this.$UFIControllera.bind(this),onAlsoRecommendToggle:this.$UFIControllerc.bind(this),onCommentLikeToggle:this.$UFIControllerb.bind(this),onCommentRemove:this.$UFIControllerf.bind(this),onCommentHideAsSpam:this.$UFIControlleri.bind(this),onCommentMarkAsNotSpam:this.$UFIControllerj.bind(this),onCommentEdit:this.$UFIControllerd.bind(this),onCommentTranslate:this.$UFIControllerk.bind(this),onCommentInlineBan:this.$UFIControllerm.bind(this),onCommentUndoInlineBan:this.$UFIControllern.bind(this),onEditAttempt:this.$UFIControllere.bind(this),onCancelEdit:this.$UFIControllerg.bind(this),onChangeRange:this.$UFIControllers.bind(this),onSpamFetch:this.$UFIControllero.bind(this),onPreviewRemove:this.$UFIControllerp.bind(this),onRetrySubmit:this.$UFIControllerq.bind(this),onOrderingModeChange:this.$UFIControllert.bind(this),contextArgs:this.$UFIController1,repliesMap:this.repliesMap,showRepliesMap:this.showRepliesMap,showReplySocialSentenceMap:this.showReplySocialSentenceMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:pa,availableComments:this.comments,source:this.source,ranges:sa,pageSize:w.defaultPageSize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController0,loggingOffset:this.$UFIController3,replySocialSentenceMaxReplies:oa,orderingMode:this.orderingMode,hideOrderingModeSelector:ua,commentPermalinks:qa,canAddCommentMap:ra});this.$UFIController4=n.render(va,this.root);l.updateTimeStamps();if(this.$UFIController8())g.inform('ufi/changed',{form:this.$UFIController8()});if(la!=w.UFIPayloadSourceType.INITIAL_SERVER&&la!=w.UFIPayloadSourceType.COLLAPSED_UFI)g.inform('reflow');};ka.prototype.deferredCallback=function(la,ma,na,oa){la.callbackCount++;if(la.callbackCount<la.expectedCallbackCount)return;p.getMulti(ma,function(pa){this.authorProfiles=pa;oa(na);if(na==w.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));};ka.prototype.fetchAndUpdate=function(la,ma){x.getFeedbackTarget(this.id,function(na){this.feedback=na;var oa=this.getToplevelCommentList(this.orderingMode).getCommentCount(),pa=this.getRange(),qa=ha(pa.getRequestedOffset(),pa.getRequestedLength(),this.commentcounts[this.id],oa,ma),ra=[];if(this.feedback.actorforpost)ra.push(this.feedback.actorforpost);var sa={expectedCallbackCount:0,callbackCount:0},ta=qa.offset,ua=qa.length,va;if(this.$UFIController1.viewas)va=this.$UFIController1.viewas+'';this.getToplevelCommentList().getComments(ta,ua,va,function(wa,xa,ya){this.commentcounts[this.id]=xa;this.setRange(wa);this.comments=[];for(var za in ya)this.comments.push(ya[za]);ja(ra,this.comments);if(this.feedback.isthreaded&&this.comments.length){sa.expectedCallbackCount=this.comments.length;}else sa.expectedCallbackCount=1;for(var ab in ya){var bb=ya[ab],cb=bb.id;if(this.feedback.isthreaded){var db=this.getReplyCommentList(cb).getCommentCount(),eb;if(this.replyRanges[cb]){var fb=this.getReplyRange(cb);eb=ha(fb.getRequestedOffset(),fb.getRequestedLength(),this.commentcounts[cb],db,ma);}else eb={offset:0,length:Math.min(db,2)};var gb=eb.offset,hb=eb.length;this.getReplyCommentList(cb).getComments(gb,hb,null,function(ib,jb,kb,lb){this.commentcounts[ib]=kb;this.setReplyRange(ib,jb);this.repliesMap[ib]=[];for(var mb in lb)this.repliesMap[ib].push(lb[mb]);ja(ra,this.repliesMap[ib]);this.showRepliesMap[ib]=jb.length>0;if(this.showReplySocialSentenceMap[ib]===undefined&&this.commentcounts[ib]>0)this.showReplySocialSentenceMap[ib]=!this.showRepliesMap[ib];this.deferredCallback(sa,ra,ma,la);}.bind(this,cb,eb,db));}}if(!this.feedback.isthreaded||!this.comments.length)this.deferredCallback(sa,ra,ma,la);}.bind(this,qa,oa));}.bind(this));};ka.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return ba.getCommentList(this.id,this.orderingMode);};ka.prototype.getReplyCommentList=function(la){if(la in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[la];return aa.getCommentList(this.id,la);};ka.prototype.getRange=function(){if(!(this.orderingMode in this.ranges))this.ranges[this.orderingMode]=new z();return this.ranges[this.orderingMode];};ka.prototype.getReplyRange=function(la){if(!(la in this.replyRanges))this.replyRanges[la]=new z();return this.replyRanges[la];};ka.prototype.$UFIControllers=function(la,ma){if(la==this.id){this.getRange().updateRequestedRange(ma.offset,ma.length);}else this.replyRanges[la].updateRequestedRange(ma.offset,ma.length);this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);};ka.prototype.$UFIController6=function(){n.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(s.unsubscribe.bind(s));g.unsubscribe(this.clearPageSubscription);this.viewasUFICleanSubscription&&g.unsubscribe(this.viewasUFICleanSubscription);};ka.prototype.$UFIController7=function(){this.$UFIController6();g.unsubscribe(this.clearPageletSubscription);};ka.prototype.$UFIControllert=function(la){this.orderingMode=la;this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);};e.exports=ka;},null);
__d("immutable",[],function(a,b,c,d,e,f){function g(){var h=Object;function i(vf,wf,xf,yf){var zf;if(yf){var ag=yf.prototype;zf=h.create(ag);}else zf=vf.prototype;h.keys(wf).forEach(function(bg){zf[bg]=wf[bg];});h.keys(xf).forEach(function(bg){vf[bg]=xf[bg];});zf.constructor=vf;vf.prototype=zf;return vf;}function j(vf,wf,xf,yf){return h.getPrototypeOf(wf)[xf].apply(vf,yf);}function k(vf,wf,xf){j(vf,wf,'constructor',xf);}var l={};l.createClass=i;l.superCall=j;l.defaultSuperCall=k;"use strict";var m='delete',n=5,o=1<<n,p=o-1,q={},r={value:false},s={value:false};function t(vf){vf.value=false;return vf;}function u(vf){vf&&(vf.value=true);}function v(){}function w(vf,wf){wf=wf||0;var xf=Math.max(0,vf.length-wf),yf=new Array(xf);for(var zf=0;zf<xf;zf++)yf[zf]=vf[zf+wf];return yf;}function x(vf,wf){if(!vf)throw new Error(wf);}function y(vf){if(!vf)return 0;if(vf===true)return 1;var wf=typeof vf;if(wf==='number'){if((vf|0)===vf)return vf&fa;vf=''+vf;wf='string';}if(wf==='string')return vf.length>ia?z(vf):aa(vf);if(vf.hashCode)return y(typeof vf.hashCode==='function'?vf.hashCode():vf.hashCode);return ba(vf);}function z(vf){var wf=la[vf];if(wf==null){wf=aa(vf);if(ka===ja){ka=0;la={};}ka++;la[vf]=wf;}return wf;}function aa(vf){var wf=0;for(var xf=0;xf<vf.length;xf++)wf=(31*wf+vf.charCodeAt(xf))&fa;return wf;}function ba(vf){var wf=vf[ha];if(wf)return wf;if(!da){wf=vf.propertyIsEnumerable&&vf.propertyIsEnumerable[ha];if(wf)return wf;wf=ea(vf);if(wf)return wf;}if(!da||Object.isExtensible(vf)){wf=++ga&fa;if(da){Object.defineProperty(vf,ha,{enumerable:false,configurable:false,writable:false,value:wf});}else if(ca&&vf.propertyIsEnumerable===ca){vf.propertyIsEnumerable=function(){return ca.apply(this,arguments);};vf.propertyIsEnumerable[ha]=wf;}else if(vf.nodeType){vf[ha]=wf;}else throw new Error('Unable to set a non-enumerable property on object.');return wf;}else throw new Error('Non-extensible objects are not allowed as keys.');}var ca=Object.prototype.propertyIsEnumerable,da=(function(){try{Object.defineProperty({},'x',{});return true;}catch(vf){return false;}}());function ea(vf){if(vf&&vf.nodeType>0)switch(vf.nodeType){case 1:return vf.uniqueID;case 9:return vf.documentElement&&vf.documentElement.uniqueID;}}var fa=2147483647,ga=0,ha='__immutablehash__';if(typeof Symbol!=='undefined')ha=Symbol(ha);var ia=16,ja=255,ka=0,la={},ma=0,na=1,oa=2,pa='@@iterator',qa=typeof Symbol!=='undefined'?Symbol.iterator:pa,ra=function vf(wf){this.next=wf;};(l.createClass)(ra,{toString:function(){return '[Iterator]';}},{});var sa=ra.prototype;sa.inspect=sa.toSource=function(){return this.toString();};sa[qa]=function(){return this;};function ta(vf,wf,xf,yf){var zf=vf===0?wf:vf===1?xf:[wf,xf];yf?(yf.value=zf):(yf={value:zf,done:false});return yf;}function ua(){return {value:undefined,done:true};}function va(vf){return !!ya(vf);}function wa(vf){return vf&&typeof vf.next==='function';}function xa(vf){var wf=ya(vf);if(typeof wf==='function')return wf.call(vf);}function ya(vf){return vf&&(vf[qa]||vf[pa]);}var za=function vf(wf){return ab.from(arguments.length===1?wf:Array.prototype.slice.call(arguments));},ab=za;(l.createClass)(za,{toArray:function(){vb(this.length);var vf=new Array(this.length||0);this.valueSeq().__iterate((function(wf,xf){vf[xf]=wf;}));return vf;},toJS:function(){return this.map((function(vf){return vf instanceof ab?vf.toJS():vf;})).__toJS();},toMap:function(){vb(this.length);return sc.from(this);},toObject:function(){vb(this.length);var vf={};this.__iterate((function(wf,xf){vf[xf]=wf;}));return vf;},toOrderedMap:function(){vb(this.length);return ze.from(this);},toSet:function(){vb(this.length);return ue.from(this);},toVector:function(){vb(this.length);return yd.from(this);},toString:function(){return this.__toString('Seq {','}');},__toString:function(vf,wf){if(this.length===0)return vf+wf;return vf+' '+this.map(this.__toStringMapper).join(', ')+' '+wf;},__toStringMapper:function(vf,wf){return wf+': '+sb(vf);},concat:function(){for(var vf=[],wf=0;wf<arguments.length;wf++)vf[wf]=arguments[wf];return kc(this,vf,true);},contains:function(vf){return this.find((function(wf){return rc(wf,vf);}),null,q)!==q;},entries:function(){return this.__iterator(oa);},every:function(vf,wf){var xf=true;this.__iterate((function(yf,zf,ag){if(!vf.call(wf,yf,zf,ag)){xf=false;return false;}}));return xf;},filter:function(vf,wf){return ec(this,vf,wf,true);},find:function(vf,wf,xf){var yf=xf;this.__iterate((function(zf,ag,bg){if(vf.call(wf,zf,ag,bg)){yf=zf;return false;}}));return yf;},forEach:function(vf,wf){return this.__iterate(wf?vf.bind(wf):vf);},join:function(vf){vf=vf!==undefined?''+vf:',';var wf='',xf=true;this.__iterate((function(yf){xf?(xf=false):(wf+=vf);wf+=yf!=null?yf:'';}));return wf;},keys:function(){return this.__iterator(ma);},map:function(vf,wf){return cc(this,vf,wf);},reduce:function(vf,wf,xf){var yf,zf;if(arguments.length<2){zf=true;}else yf=wf;this.__iterate((function(ag,bg,cg){if(zf){zf=false;yf=ag;}else yf=vf.call(xf,yf,ag,bg,cg);}));return yf;},reduceRight:function(vf,wf,xf){var yf=this.toKeyedSeq().reverse();return yf.reduce.apply(yf,arguments);},reverse:function(){return dc(this);},slice:function(vf,wf){if(kb(vf,wf,this.length))return this;var xf=lb(vf,this.length),yf=mb(wf,this.length);if(xf!==xf||yf!==yf)return this.cacheResult().slice(vf,wf);var zf=xf===0?this:this.skip(xf);return yf==null||yf===this.length?zf:zf.take(yf-xf);},some:function(vf,wf){return !this.every(rb(vf),wf);},sort:function(vf){return this.sortBy(ob,vf);},values:function(){return this.__iterator(na);},butLast:function(){return this.slice(0,-1);},count:function(vf,wf){if(!vf){if(this.length==null)this.length=this.__iterate(qb);return this.length;}return this.filter(vf,wf).count();},countBy:function(vf,wf){var xf=this,yf={},zf=[];this.__iterate((function(ag,bg){var cg=vf.call(wf,ag,bg,xf),dg=y(cg);if(!yf.hasOwnProperty(dg)){yf[dg]=zf.length;zf.push([cg,1]);}else zf[yf[dg]][1]++;}));return ab(zf).fromEntrySeq();},equals:function(vf){if(this===vf)return true;if(!(vf instanceof ab))return false;if(this.length!=null&&vf.length!=null){if(this.length!==vf.length)return false;if(this.length===0&&vf.length===0)return true;}if(this.__hash!=null&&vf.__hash!=null&&this.__hash!==vf.__hash)return false;return this.__deepEquals(vf);},__deepEquals:function(vf){var wf=this.entries();return vf.every((function(xf,yf){var zf=wf.next().value;return zf&&rc(zf[0],yf)&&rc(zf[1],xf);}))&&wf.next().done;},entrySeq:function(){var vf=this;if(vf._cache)return ab(vf._cache);var wf=vf.toKeyedSeq().map(pb).valueSeq();wf.fromEntries=(function(){return vf;});return wf;},findKey:function(vf,wf){var xf;this.__iterate((function(yf,zf,ag){if(vf.call(wf,yf,zf,ag)){xf=zf;return false;}}));return xf;},findLast:function(vf,wf,xf){return this.toKeyedSeq().reverse().find(vf,wf,xf);},findLastKey:function(vf,wf){return this.toKeyedSeq().reverse().findKey(vf,wf);},first:function(){return this.find(qb);},flatMap:function(vf,wf){return this.map(vf,wf).flatten();},flatten:function(){return lc(this,true);},flip:function(){return bc(this);},get:function(vf,wf){return this.find((function(xf,yf){return rc(yf,vf);}),null,wf);},getIn:function(vf,wf){var xf=this;if(vf)for(var yf=0;yf<vf.length;yf++){xf=xf&&xf.get?xf.get(vf[yf],q):q;if(xf===q)return wf;}return xf;},groupBy:function(vf,wf){return fc(this,vf,wf,true);},has:function(vf){return this.get(vf,q)!==q;},keySeq:function(){return this.flip().valueSeq();},last:function(){return this.findLast(qb);},mapEntries:function(vf,wf){var xf=this;return this.entrySeq().map((function(yf,zf){return vf.call(wf,yf,zf,xf);})).fromEntrySeq();},mapKeys:function(vf,wf){var xf=this;return this.flip().map((function(yf,zf){return vf.call(wf,yf,zf,xf);})).flip();},rest:function(){return this.slice(1);},skip:function(vf){return ic(this,vf,true);},skipLast:function(vf){return this.reverse().skip(vf).reverse();},skipWhile:function(vf,wf){return jc(this,vf,wf,true);},skipUntil:function(vf,wf){return this.skipWhile(rb(vf),wf);},sortBy:function(vf,wf){wf=wf||tb;var xf=this;return ab(this.entrySeq().entrySeq().toArray().sort((function(yf,zf){return wf(vf(yf[1][1],yf[1][0],xf),vf(zf[1][1],zf[1][0],xf))||yf[0]-zf[0];}))).fromEntrySeq().valueSeq().fromEntrySeq();},take:function(vf){return gc(this,vf);},takeLast:function(vf){return this.reverse().take(vf).reverse();},takeWhile:function(vf,wf){return hc(this,vf,wf);},takeUntil:function(vf,wf){return this.takeWhile(rb(vf),wf);},toKeyedSeq:function(){return this;},valueSeq:function(){return new yb(this);},cacheResult:function(){if(!this._cache&&this.__iterateUncached){vb(this.length);this._cache=this.entrySeq().toArray();if(this.length==null)this.length=this._cache.length;}return this;},hashCode:function(){return this.__hash||(this.__hash=this.length===Infinity?0:this.reduce((function(vf,wf,xf){return (vf+(y(wf)^(wf===xf?0:y(xf))))&fa;}),0));},__makeSequence:function(){return Object.create(bb);},__iterate:function(vf,wf){return wb(this,vf,wf,true);},__iterator:function(vf,wf){return xb(this,vf,wf,true);}},{from:function(vf){if(vf instanceof ab)return vf;if(!Array.isArray(vf)){if(wa(vf))return new fb(vf);if(va(vf))return new gb(vf);if(vf&&vf.constructor===Object)return new hb(vf);vf=[vf];}return new ib(vf);}});var bb=za.prototype;bb[qa]=bb.entries;bb.toJSON=bb.toJS;bb.__toJS=bb.toObject;bb.inspect=bb.toSource=function(){return this.toString();};bb.chain=bb.flatMap;var cb=function vf(){l.defaultSuperCall(this,db.prototype,arguments);},db=cb;(l.createClass)(cb,{toString:function(){return this.__toString('Seq [',']');},concat:function(){for(var vf=[],wf=0;wf<arguments.length;wf++)vf[wf]=arguments[wf];return kc(this,vf,false);},filter:function(vf,wf){return ec(this,vf,wf,false);},findIndex:function(vf,wf){var xf=this.findKey(vf,wf);return xf==null?-1:xf;},indexOf:function(vf){return this.findIndex((function(wf){return rc(wf,vf);}));},lastIndexOf:function(vf){return this.toKeyedSeq().reverse().indexOf(vf);},splice:function(vf,wf){var xf=arguments.length;wf=Math.max(wf|0,0);if(xf===0||(xf===2&&!wf))return this;vf=lb(vf,this.length);var yf=this.slice(0,vf);return xf===1?yf:yf.concat(w(arguments,2),this.slice(vf+wf));},findLastIndex:function(vf,wf){return this.toKeyedSeq().reverse().findIndex(vf,wf);},first:function(){return this.get(0);},flatten:function(){return lc(this,false);},flip:function(){return bc(this.toKeyedSeq());},fromEntrySeq:function(){return new ac(this);},get:function(vf,wf){vf=ub(this,vf);return (vf<0||(this.length===Infinity||(this.length!=null&&vf>this.length)))?wf:this.find((function(xf,yf){return yf===vf;}),null,wf);},groupBy:function(vf,wf){return fc(this,vf,wf,false);},has:function(vf){vf=ub(this,vf);return vf>=0&&(this.length!=null?this.length===Infinity||vf<this.length:this.indexOf(vf)!==-1);},interpose:function(vf){return mc(this,vf);},last:function(){return this.get(this.length?this.length-1:0);},skip:function(vf){var wf=this,xf=ic(wf,vf,false);if(xf!==wf)xf.get=function(yf,zf){yf=ub(this,yf);return yf>=0?wf.get(yf+vf,zf):zf;};return xf;},skipWhile:function(vf,wf){return jc(this,vf,wf,false);},sortBy:function(vf,wf){wf=wf||tb;var xf=this;return za(this.entrySeq().toArray().sort((function(yf,zf){return wf(vf(yf[1],yf[0],xf),vf(zf[1],zf[0],xf))||yf[0]-zf[0];}))).fromEntrySeq().valueSeq();},take:function(vf){var wf=this,xf=gc(wf,vf);if(xf!==wf)xf.get=function(yf,zf){yf=ub(this,yf);return yf>=0&&yf<vf?wf.get(yf,zf):zf;};return xf;},toKeyedSeq:function(){return new zb(this);},valueSeq:function(){return this;},__makeSequence:function(){return Object.create(eb);},__iterate:function(vf,wf){return wb(this,vf,wf,false);},__iterator:function(vf,wf){return xb(this,vf,wf,false);}},{},za);var eb=cb.prototype;eb[qa]=eb.values;eb.__toJS=eb.toArray;eb.__toStringMapper=sb;var fb=function vf(wf){this._iterator=wf;this._iteratorCache=[];};(l.createClass)(fb,{__iterateUncached:function(vf,wf){if(wf)return this.cacheResult().__iterate(vf,wf);var xf=this._iterator,yf=this._iteratorCache,zf=0;while(zf<yf.length)if(vf(yf[zf],zf++,this)===false)return zf;var ag;while(!(ag=xf.next()).done){var bg=ag.value;yf[zf]=bg;if(vf(bg,zf++,this)===false)break;}return zf;},__iteratorUncached:function(vf,wf){if(wf)return this.cacheResult().__iterator(vf,wf);var xf=this._iterator,yf=this._iteratorCache,zf=0;return new ra((function(){if(zf>=yf.length){var ag=xf.next();if(ag.done)return ag;yf[zf]=ag.value;}return ta(vf,zf,yf[zf++]);}));}},{},cb);var gb=function vf(wf){this._iterable=wf;this.length=wf.length||wf.size;};(l.createClass)(gb,{__iterateUncached:function(vf,wf){if(wf)return this.cacheResult().__iterate(vf,wf);var xf=this._iterable,yf=xa(xf),zf=0;if(wa(yf)){var ag;while(!(ag=yf.next()).done)if(vf(ag.value,zf++,this)===false)break;}return zf;},__iteratorUncached:function(vf,wf){if(wf)return this.cacheResult().__iterator(vf,wf);var xf=this._iterable,yf=xa(xf);if(!wa(yf))return new ra((function(){return ua();}));var zf=0;return new ra((function(){var ag=yf.next();return ag.done?ag:ta(vf,zf++,ag.value);}));}},{},cb);var hb=function vf(wf){var xf=Object.keys(wf);this._object=wf;this._keys=xf;this.length=xf.length;};(l.createClass)(hb,{toObject:function(){return this._object;},get:function(vf,wf){if(wf!==undefined&&!this.has(vf))return wf;return this._object[vf];},has:function(vf){return this._object.hasOwnProperty(vf);},__iterate:function(vf,wf){var xf=this._object,yf=this._keys,zf=yf.length-1;for(var ag=0;ag<=zf;ag++){var bg=yf[wf?zf-ag:ag];if(vf(xf[bg],bg,this)===false)return ag+1;}return ag;},__iterator:function(vf,wf){var xf=this._object,yf=this._keys,zf=yf.length-1,ag=0;return new ra((function(){var bg=yf[wf?zf-ag:ag];return ag++>zf?ua():ta(vf,bg,xf[bg]);}));}},{},za);var ib=function vf(wf){this._array=wf;this.length=wf.length;};(l.createClass)(ib,{toArray:function(){return this._array;},get:function(vf,wf){return this.has(vf)?this._array[ub(this,vf)]:wf;},__iterate:function(vf,wf){var xf=this._array,yf=xf.length-1;for(var zf=0;zf<=yf;zf++)if(vf(xf[wf?yf-zf:zf],zf,this)===false)return zf+1;return zf;},__iterator:function(vf,wf){var xf=this._array,yf=xf.length-1,zf=0;return new ra((function(){return zf>yf?ua():ta(vf,zf,xf[wf?yf-zf++:zf++]);}));}},{},cb);function jb(vf){if(vf.length==null)vf.cacheResult();x(vf.length<Infinity);return vf.length;}function kb(vf,wf,xf){return (vf===0||(xf!=null&&vf<=-xf))&&(wf==null||(xf!=null&&wf>=xf));}function lb(vf,wf){return nb(vf,wf,0);}function mb(vf,wf){return nb(vf,wf,wf);}function nb(vf,wf,xf){return vf==null?xf:vf<0?Math.max(0,wf+vf):wf?Math.min(wf,vf):vf;}function ob(vf){return vf;}function pb(vf,wf){return [wf,vf];}function qb(){return true;}function rb(vf){return function(){return !vf.apply(this,arguments);};}function sb(vf){return typeof vf==='string'?JSON.stringify(vf):vf;}function tb(vf,wf){return vf>wf?1:vf<wf?-1:0;}function ub(vf,wf){if(wf<0){if(vf.length==null)vf.cacheResult();return vf.length+wf;}return wf;}function vb(vf){x(vf!==Infinity);}function wb(vf,wf,xf,yf){var zf=vf._cache;if(zf){var ag=zf.length-1;for(var bg=0;bg<=ag;bg++){var cg=zf[xf?ag-bg:bg];if(wf(cg[1],yf?cg[0]:bg,vf)===false)return bg+1;}return bg;}return vf.__iterateUncached(wf,xf);}function xb(vf,wf,xf,yf){var zf=vf._cache;if(zf){var ag=zf.length-1,bg=0;return new ra((function(){var cg=zf[xf?ag-bg:bg];return bg++>ag?ua():ta(wf,yf?cg[0]:bg-1,cg[1]);}));}return vf.__iteratorUncached(wf,xf);}var yb=function vf(wf){this._seq=wf;this.length=wf.length;};(l.createClass)(yb,{get:function(vf,wf){return this._seq.get(vf,wf);},has:function(vf){return this._seq.has(vf);},cacheResult:function(){this._seq.cacheResult();this.length=this._seq.length;return this;},__iterate:function(vf,wf){var xf=this,yf=0;return this._seq.__iterate((function(zf){return vf(zf,yf++,xf);}),wf);},__iterator:function(vf,wf){var xf=this._seq.__iterator(na,wf),yf=0;return new ra((function(){var zf=xf.next();return zf.done?zf:ta(vf,yf++,zf.value,zf);}));}},{},cb);var zb=function vf(wf){this._seq=wf;this.length=wf.length;};(l.createClass)(zb,{get:function(vf,wf){return this._seq.get(vf,wf);},has:function(vf){return this._seq.has(vf);},valueSeq:function(){return this._seq;},reverse:function(){var vf=this,wf=dc(this);wf.valueSeq=(function(){return vf._seq.reverse();});return wf;},map:function(vf,wf){var xf=this,yf=cc(this,vf,wf);yf.valueSeq=(function(){return xf._seq.map(vf,wf);});return yf;},cacheResult:function(){this._seq.cacheResult();this.length=this._seq.length;return this;},__iterate:function(vf,wf){var xf=this,yf=wf?jb(this):0;return this._seq.__iterate((function(zf){return vf(zf,wf?--yf:yf++,xf);}),wf);},__iterator:function(vf,wf){var xf=this._seq.__iterator(na,wf),yf=wf?jb(this):0;return new ra((function(){var zf=xf.next();return zf.done?zf:ta(vf,wf?--yf:yf++,zf.value,zf);}));}},{},za);var ac=function vf(wf){this._seq=wf;this.length=wf.length;};(l.createClass)(ac,{entrySeq:function(){return this._seq;},cacheResult:function(){this._seq.cacheResult();this.length=this._seq.length;return this;},__iterate:function(vf,wf){var xf=this;return this._seq.__iterate((function(yf){return yf&&vf(yf[1],yf[0],xf);}),wf);},__iterator:function(vf,wf){var xf=this._seq.__iterator(na,wf);return new ra((function(){while(true){var yf=xf.next();if(yf.done)return yf;var zf=yf.value;if(zf)return vf===oa?yf:ta(vf,zf[0],zf[1],yf);}}));}},{},za);function bc(vf){var wf=vf.__makeSequence();wf.length=vf.length;wf.flip=(function(){return vf;});wf.reverse=function(){var xf=vf.reverse.apply(this);xf.flip=(function(){return vf.reverse();});return xf;};wf.has=(function(xf){return vf.contains(xf);});wf.contains=(function(xf){return vf.has(xf);});wf.__iterateUncached=function(xf,yf){var zf=this;return vf.__iterate((function(ag,bg){return xf(bg,ag,zf)!==false;}),yf);};wf.__iteratorUncached=function(xf,yf){if(xf===oa){var zf=vf.__iterator(xf,yf);return new ra((function(){var ag=zf.next();if(!ag.done){var bg=ag.value[0];ag.value[0]=ag.value[1];ag.value[1]=bg;}return ag;}));}return vf.__iterator(xf===na?ma:na,yf);};return wf;}function cc(vf,wf,xf){var yf=vf.__makeSequence();yf.length=vf.length;yf.has=(function(zf){return vf.has(zf);});yf.get=(function(zf,ag){var bg=vf.get(zf,q);return bg===q?ag:wf.call(xf,bg,zf,vf);});yf.__iterateUncached=function(zf,ag){var bg=this;return vf.__iterate((function(cg,dg,eg){return zf(wf.call(xf,cg,dg,eg),dg,bg)!==false;}),ag);};yf.__iteratorUncached=function(zf,ag){var bg=vf.__iterator(oa,ag);return new ra((function(){var cg=bg.next();if(cg.done)return cg;var dg=cg.value,eg=dg[0];return ta(zf,eg,wf.call(xf,dg[1],eg,vf),cg);}));};return yf;}function dc(vf){var wf=vf.__makeSequence();wf.length=vf.length;wf.reverse=(function(){return vf;});wf.flip=function(){var xf=vf.flip.apply(this);xf.reverse=(function(){return vf.flip();});return xf;};wf.get=(function(xf,yf){return vf.get(xf,yf);});wf.has=(function(xf){return vf.has(xf);});wf.contains=(function(xf){return vf.contains(xf);});wf.cacheResult=function(){vf.cacheResult();this.length=vf.length;return this;};wf.__iterate=function(xf,yf){var zf=this;return vf.__iterate((function(ag,bg){return xf(ag,bg,zf);}),!yf);};wf.__iterator=(function(xf,yf){return vf.__iterator(xf,!yf);});return wf;}function ec(vf,wf,xf,yf){var zf=vf.__makeSequence();zf.has=(function(ag){var bg=vf.get(ag,q);return bg!==q&&!!wf.call(xf,bg,ag,vf);});zf.get=(function(ag,bg){var cg=vf.get(ag,q);return cg!==q&&wf.call(xf,cg,ag,vf)?cg:bg;});zf.__iterateUncached=function(ag,bg){var cg=this,dg=0;vf.__iterate((function(eg,fg,gg){if(wf.call(xf,eg,fg,gg)){dg++;return ag(eg,yf?fg:dg-1,cg);}}),bg);return dg;};zf.__iteratorUncached=function(ag,bg){var cg=vf.__iterator(oa,bg),dg=0;return new ra((function(){while(true){var eg=cg.next();if(eg.done)return eg;var fg=eg.value,gg=fg[0],hg=fg[1];if(wf.call(xf,hg,gg,vf))return ta(ag,yf?gg:dg++,hg,eg);}}));};return zf;}function fc(vf,wf,xf,yf){var zf={},ag=[];vf.__iterate((function(bg,cg){var dg=wf.call(xf,bg,cg,vf),eg=y(dg),fg=yf?[cg,bg]:bg;if(!zf.hasOwnProperty(eg)){zf[eg]=ag.length;ag.push([dg,[fg]]);}else ag[zf[eg]][1].push(fg);}));return za(ag).fromEntrySeq().map(yf?(function(bg){return za(bg).fromEntrySeq();}):(function(bg){return za(bg);}));}function gc(vf,wf){if(wf>vf.length)return vf;if(wf<0)wf=0;var xf=vf.__makeSequence();xf.length=vf.length&&Math.min(vf.length,wf);xf.__iterateUncached=function(yf,zf){var ag=this;if(wf===0)return 0;if(zf)return this.cacheResult().__iterate(yf,zf);var bg=0;vf.__iterate((function(cg,dg){return ++bg&&yf(cg,dg,ag)!==false&&bg<wf;}));return bg;};xf.__iteratorUncached=function(yf,zf){if(zf)return this.cacheResult().__iterator(yf,zf);var ag=wf&&vf.__iterator(yf,zf),bg=0;return new ra((function(){if(bg++>wf)return ua();return ag.next();}));};return xf;}function hc(vf,wf,xf){var yf=vf.__makeSequence();yf.__iterateUncached=function(zf,ag){var bg=this;if(ag)return this.cacheResult().__iterate(zf,ag);var cg=0;vf.__iterate((function(dg,eg,fg){return wf.call(xf,dg,eg,fg)&&++cg&&zf(dg,eg,bg);}));return cg;};yf.__iteratorUncached=function(zf,ag){var bg=this;if(ag)return this.cacheResult().__iterator(zf,ag);var cg=vf.__iterator(oa,ag),dg=true;return new ra((function(){if(!dg)return ua();var eg=cg.next();if(eg.done)return eg;var fg=eg.value,gg=fg[0],hg=fg[1];if(!wf.call(xf,hg,gg,bg)){dg=false;return ua();}return zf===oa?eg:ta(zf,gg,hg,eg);}));};return yf;}function ic(vf,wf,xf){if(wf<=0)return vf;var yf=vf.__makeSequence();yf.length=vf.length&&Math.max(0,vf.length-wf);yf.__iterateUncached=function(zf,ag){var bg=this;if(ag)return this.cacheResult().__iterate(zf,ag);var cg=0,dg=true,eg=0;vf.__iterate((function(fg,gg){if(!(dg&&(dg=cg++<wf))){eg++;return zf(fg,xf?gg:eg-1,bg);}}));return eg;};yf.__iteratorUncached=function(zf,ag){if(ag)return this.cacheResult().__iterator(zf,ag);var bg=wf&&vf.__iterator(zf,ag),cg=0,dg=0;return new ra((function(){while(cg<wf){cg++;bg.next();}var eg=bg.next();if(xf||zf===na){return eg;}else if(zf===ma){return ta(zf,dg++,null,eg);}else return ta(zf,dg++,eg.value[1],eg);}));};return yf;}function jc(vf,wf,xf,yf){var zf=vf.__makeSequence();zf.__iterateUncached=function(ag,bg){var cg=this;if(bg)return this.cacheResult().__iterate(ag,bg);var dg=true,eg=0;vf.__iterate((function(fg,gg,hg){if(!(dg&&(dg=wf.call(xf,fg,gg,hg)))){eg++;return ag(fg,yf?gg:eg-1,cg);}}));return eg;};zf.__iteratorUncached=function(ag,bg){var cg=this;if(bg)return this.cacheResult().__iterator(ag,bg);var dg=vf.__iterator(oa,bg),eg=true,fg=0;return new ra((function(){var gg,hg,ig;do{gg=dg.next();if(gg.done)if(yf||ag===na){return gg;}else if(ag===ma){return ta(ag,fg++,null,gg);}else return ta(ag,fg++,gg.value[1],gg);var jg=gg.value;hg=jg[0];ig=jg[1];eg&&(eg=wf.call(xf,ig,hg,cg));}while(eg);return ag===oa?gg:ta(ag,hg,ig,gg);}));};return zf;}function kc(vf,wf,xf){var yf=[vf].concat(wf),zf=za(yf);if(xf)zf=zf.toKeyedSeq();zf=zf.flatten();zf.length=yf.reduce((function(ag,bg){if(ag!==undefined){var cg=za(bg).length;if(cg!=null)return ag+cg;}}),0);return zf;}function lc(vf,wf){var xf=vf.__makeSequence();xf.__iterateUncached=function(yf,zf){var ag=this,bg=0;vf.__iterate((function(cg){var dg=false;za(cg).__iterate((function(eg,fg){if(yf(eg,wf?fg:bg++,ag)===false){dg=true;return false;}}),zf);return !dg;}),zf);return bg;};xf.__iteratorUncached=function(yf,zf){var ag=vf.__iterator(na,zf),bg,cg=0;return new ra((function(){while(true){if(bg){var dg=bg.next();if(!dg.done)if(wf||yf===na){return dg;}else if(yf===ma){return ta(yf,cg++,null,dg);}else return ta(yf,cg++,dg.value[1],dg);}var eg=ag.next();if(eg.done)return eg;bg=za(eg.value).__iterator(yf,zf);}}));};return xf;}function mc(vf,wf){var xf=vf.__makeSequence();xf.length=vf.length&&vf.length*2-1;xf.__iterateUncached=function(yf,zf){var ag=this,bg=0;vf.__iterate((function(cg,dg){return (!bg||yf(wf,bg++,ag)!==false)&&yf(cg,bg++,ag)!==false;}),zf);return bg;};xf.__iteratorUncached=function(yf,zf){var ag=vf.__iterator(na,zf),bg=0,cg;return new ra((function(){if(!cg||bg%2){cg=ag.next();if(cg.done)return cg;}return bg%2?ta(yf,bg++,wf):ta(yf,bg++,cg.value,cg);}));};return xf;}var nc=function vf(wf,xf,yf,zf){zf=zf?zf:wf.getIn(xf);this.length=zf instanceof za?zf.length:null;this._rootData=wf;this._keyPath=xf;this._onChange=yf;};(l.createClass)(nc,{deref:function(vf){return this._rootData.getIn(this._keyPath,vf);},get:function(vf,wf){if(Array.isArray(vf)&&vf.length===0)return this;var xf=this._rootData.getIn(this._keyPath.concat(vf),q);return xf===q?wf:oc(this,vf,xf);},set:function(vf,wf){return qc(this,(function(xf){return xf.set(vf,wf);}),vf);},remove:function(vf){return qc(this,(function(wf){return wf.remove(vf);}),vf);},clear:function(){return qc(this,(function(vf){return vf.clear();}));},update:function(vf,wf,xf){return arguments.length===1?qc(this,vf):qc(this,(function(yf){return yf.update(vf,wf,xf);}),vf);},withMutations:function(vf){return qc(this,(function(wf){return (wf||sc.empty()).withMutations(vf);}));},cursor:function(vf){return Array.isArray(vf)&&vf.length===0?this:pc(this,vf);},__iterate:function(vf,wf){var xf=this,yf=this.deref();return yf&&yf.__iterate?yf.__iterate((function(zf,ag){return vf(oc(xf,ag,zf),ag,xf);}),wf):0;},__iterator:function(vf,wf){var xf=this,yf=this.deref(),zf=yf&&yf.__iterator&&yf.__iterator(oa,wf);return new ra((function(){if(!zf)return ua();var ag=zf.next();if(ag.done)return ag;var bg=ag.value,cg=bg[0],dg=bg[1];return ta(vf,cg,oc(xf,cg,dg),ag);}));}},{},za);nc.prototype[m]=nc.prototype.remove;nc.prototype.getIn=nc.prototype.get;function oc(vf,wf,xf){return xf instanceof za?pc(vf,wf,xf):xf;}function pc(vf,wf,xf){return new nc(vf._rootData,vf._keyPath.concat(wf),vf._onChange,xf);}function qc(vf,wf,xf){var yf=vf._rootData.updateIn(vf._keyPath,xf?sc.empty():undefined,wf),zf=vf._keyPath||[];vf._onChange&&vf._onChange.call(undefined,yf,vf._rootData,xf?zf.concat(xf):zf);return new nc(yf,vf._keyPath,vf._onChange);}function rc(vf,wf){if(vf instanceof nc)vf=vf.deref();if(wf instanceof nc)wf=wf.deref();if(vf===wf)return vf!==0||wf!==0||1/vf===1/wf;if(vf!==vf)return wf!==wf;if(vf instanceof za)return vf.equals(wf);return false;}var sc=function vf(wf){var xf=tc.empty();return wf?wf.constructor===tc?wf:xf.merge(wf):xf;},tc=sc;(l.createClass)(sc,{toString:function(){return this.__toString('Map {','}');},get:function(vf,wf){return this._root?this._root.get(0,y(vf),vf,wf):wf;},set:function(vf,wf){return hd(this,vf,wf);},remove:function(vf){return hd(this,vf,q);},update:function(vf,wf,xf){return arguments.length===1?this.updateIn([],null,vf):this.updateIn([vf],wf,xf);},updateIn:function(vf,wf,xf){var yf;if(!xf)(yf=[wf,xf],xf=yf[0],wf=yf[1],yf);return qd(this,vf,wf,xf,0);},clear:function(){if(this.length===0)return this;if(this.__ownerID){this.length=0;this._root=null;this.__hash=undefined;this.__altered=true;return this;}return tc.empty();},merge:function(){return nd(this,null,arguments);},mergeWith:function(vf){for(var wf=[],xf=1;xf<arguments.length;xf++)wf[xf-1]=arguments[xf];return nd(this,vf,wf);},mergeDeep:function(){return nd(this,od(null),arguments);},mergeDeepWith:function(vf){for(var wf=[],xf=1;xf<arguments.length;xf++)wf[xf-1]=arguments[xf];return nd(this,od(vf),wf);},cursor:function(vf,wf){if(!wf&&typeof vf==='function'){wf=vf;vf=[];}else if(arguments.length===0){vf=[];}else if(!Array.isArray(vf))vf=[vf];return new nc(this,vf,wf);},withMutations:function(vf){var wf=this.asMutable();vf(wf);return wf.wasAltered()?wf.__ensureOwner(this.__ownerID):this;},asMutable:function(){return this.__ownerID?this:this.__ensureOwner(new v());},asImmutable:function(){return this.__ensureOwner();},wasAltered:function(){return this.__altered;},__iterator:function(vf,wf){return new dd(this,vf,wf);},__iterate:function(vf,wf){var xf=this,yf=0;this._root&&this._root.iterate((function(zf){yf++;return vf(zf[1],zf[0],xf);}),wf);return yf;},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;if(!vf){this.__ownerID=vf;this.__altered=false;return this;}return gd(this.length,this._root,vf,this.__hash);}},{empty:function(){return xd||(xd=gd(0));}},za);var uc=sc.prototype;uc[m]=uc.remove;sc.from=sc;var vc=function vf(wf,xf,yf){this.ownerID=wf;this.bitmap=xf;this.nodes=yf;},wc=vc;(l.createClass)(vc,{get:function(vf,wf,xf,yf){var zf=(1<<((vf===0?wf:wf>>>vf)&p)),ag=this.bitmap;return (ag&zf)===0?yf:this.nodes[rd(ag&(zf-1))].get(vf+n,wf,xf,yf);},update:function(vf,wf,xf,yf,zf,ag,bg){var cg=(wf===0?xf:xf>>>wf)&p,dg=1<<cg,eg=this.bitmap,fg=(eg&dg)!==0;if(!fg&&zf===q)return this;var gg=rd(eg&(dg-1)),hg=this.nodes,ig=fg?hg[gg]:null,jg=id(ig,vf,wf+n,xf,yf,zf,ag,bg);if(jg===ig)return this;if(!fg&&jg&&hg.length>=vd)return md(vf,hg,eg,cg,jg);if(fg&&!jg&&hg.length===2&&jd(hg[gg^1]))return hg[gg^1];if(fg&&jg&&hg.length===1&&jd(jg))return jg;var kg=vf&&vf===this.ownerID,lg=fg?jg?eg:eg^dg:eg|dg,mg=fg?jg?sd(hg,gg,jg,kg):ud(hg,gg,kg):td(hg,gg,jg,kg);if(kg){this.bitmap=lg;this.nodes=mg;return this;}return new wc(vf,lg,mg);},iterate:function(vf,wf){var xf=this.nodes;for(var yf=0,zf=xf.length-1;yf<=zf;yf++)if(xf[wf?zf-yf:yf].iterate(vf,wf)===false)return false;}},{});var xc=function vf(wf,xf,yf){this.ownerID=wf;this.count=xf;this.nodes=yf;},yc=xc;(l.createClass)(xc,{get:function(vf,wf,xf,yf){var zf=(vf===0?wf:wf>>>vf)&p,ag=this.nodes[zf];return ag?ag.get(vf+n,wf,xf,yf):yf;},update:function(vf,wf,xf,yf,zf,ag,bg){var cg=(wf===0?xf:xf>>>wf)&p,dg=zf===q,eg=this.nodes,fg=eg[cg];if(dg&&!fg)return this;var gg=id(fg,vf,wf+n,xf,yf,zf,ag,bg);if(gg===fg)return this;var hg=this.count;if(!fg){hg++;}else if(!gg){hg--;if(hg<wd)return ld(vf,eg,hg,cg);}var ig=vf&&vf===this.ownerID,jg=sd(eg,cg,gg,ig);if(ig){this.count=hg;this.nodes=jg;return this;}return new yc(vf,hg,jg);},iterate:function(vf,wf){var xf=this.nodes;for(var yf=0,zf=xf.length-1;yf<=zf;yf++){var ag=xf[wf?zf-yf:yf];if(ag&&ag.iterate(vf,wf)===false)return false;}}},{});var zc=function vf(wf,xf,yf){this.ownerID=wf;this.hash=xf;this.entries=yf;},ad=zc;(l.createClass)(zc,{get:function(vf,wf,xf,yf){var zf=this.entries;for(var ag=0,bg=zf.length;ag<bg;ag++)if(rc(xf,zf[ag][0]))return zf[ag][1];return yf;},update:function(vf,wf,xf,yf,zf,ag,bg){var cg=zf===q;if(xf!==this.hash){if(cg)return this;u(bg);u(ag);return kd(this,vf,wf,xf,[yf,zf]);}var dg=this.entries,eg=0;for(var fg=dg.length;eg<fg;eg++)if(rc(yf,dg[eg][0]))break;var gg=eg<fg;if(cg&&!gg)return this;u(bg);(cg||!gg)&&u(ag);if(cg&&fg===2)return new bd(vf,this.hash,dg[eg^1]);var hg=vf&&vf===this.ownerID,ig=hg?dg:w(dg);if(gg){if(cg){eg===fg-1?ig.pop():(ig[eg]=ig.pop());}else ig[eg]=[yf,zf];}else ig.push([yf,zf]);if(hg){this.entries=ig;return this;}return new ad(vf,this.hash,ig);},iterate:function(vf,wf){var xf=this.entries;for(var yf=0,zf=xf.length-1;yf<=zf;yf++)if(vf(xf[wf?zf-yf:yf])===false)return false;}},{});var bd=function vf(wf,xf,yf){this.ownerID=wf;this.hash=xf;this.entry=yf;},cd=bd;(l.createClass)(bd,{get:function(vf,wf,xf,yf){return rc(xf,this.entry[0])?this.entry[1]:yf;},update:function(vf,wf,xf,yf,zf,ag,bg){var cg=zf===q,dg=rc(yf,this.entry[0]);if(dg?zf===this.entry[1]:cg)return this;u(bg);if(cg){u(ag);return null;}if(dg){if(vf&&vf===this.ownerID){this.entry[1]=zf;return this;}return new cd(vf,xf,[yf,zf]);}u(ag);return kd(this,vf,wf,xf,[yf,zf]);},iterate:function(vf){return vf(this.entry);}},{});var dd=function vf(wf,xf,yf){this._type=xf;this._reverse=yf;this._stack=wf._root&&fd(wf._root);};(l.createClass)(dd,{next:function(){var vf=this._type,wf=this._stack;while(wf){var xf=wf.node,yf=wf.index++,zf;if(xf.entry){if(yf===0)return ed(vf,xf.entry);}else if(xf.entries){zf=xf.entries.length-1;if(yf<=zf)return ed(vf,xf.entries[this._reverse?zf-yf:yf]);}else{zf=xf.nodes.length-1;if(yf<=zf){var ag=xf.nodes[this._reverse?zf-yf:yf];if(ag){if(ag.entry)return ed(vf,ag.entry);wf=this._stack=fd(ag,wf);}continue;}}wf=this._stack=this._stack.__prev;}return ua();}},{},ra);function ed(vf,wf){return ta(vf,wf[0],wf[1]);}function fd(vf,wf){return {node:vf,index:0,__prev:wf};}function gd(vf,wf,xf,yf){var zf=Object.create(uc);zf.length=vf;zf._root=wf;zf.__ownerID=xf;zf.__hash=yf;zf.__altered=false;return zf;}function hd(vf,wf,xf){var yf=t(r),zf=t(s),ag=id(vf._root,vf.__ownerID,0,y(wf),wf,xf,yf,zf);if(!zf.value)return vf;var bg=vf.length+(yf.value?xf===q?-1:1:0);if(vf.__ownerID){vf.length=bg;vf._root=ag;vf.__hash=undefined;vf.__altered=true;return vf;}return ag?gd(bg,ag):sc.empty();}function id(vf,wf,xf,yf,zf,ag,bg,cg){if(!vf){if(ag===q)return vf;u(cg);u(bg);return new bd(wf,yf,[zf,ag]);}return vf.update(wf,xf,yf,zf,ag,bg,cg);}function jd(vf){return vf.constructor===bd||vf.constructor===zc;}function kd(vf,wf,xf,yf,zf){if(vf.hash===yf)return new zc(wf,yf,[vf.entry,zf]);var ag=(xf===0?vf.hash:vf.hash>>>xf)&p,bg=(xf===0?yf:yf>>>xf)&p,cg,dg=ag===bg?[kd(vf,wf,xf+n,yf,zf)]:((cg=new bd(wf,yf,zf)),ag<bg?[vf,cg]:[cg,vf]);return new vc(wf,(1<<ag)|(1<<bg),dg);}function ld(vf,wf,xf,yf){var zf=0,ag=0,bg=new Array(xf);for(var cg=0,dg=1,eg=wf.length;cg<eg;cg++,dg<<=1){var fg=wf[cg];if(fg!=null&&cg!==yf){zf|=dg;bg[ag++]=fg;}}return new vc(vf,zf,bg);}function md(vf,wf,xf,yf,zf){var ag=0,bg=new Array(o);for(var cg=0;xf!==0;cg++,xf>>>=1)bg[cg]=xf&1?wf[ag++]:null;bg[yf]=zf;return new xc(vf,ag+1,bg);}function nd(vf,wf,xf){var yf=[];for(var zf=0;zf<xf.length;zf++){var ag=xf[zf];if(!(ag instanceof za)){ag=za(ag);if(ag instanceof cb)ag=ag.fromEntrySeq();}ag&&yf.push(ag);}return pd(vf,wf,yf);}function od(vf){return (function(wf,xf){return wf&&wf.mergeDeepWith?wf.mergeDeepWith(vf,xf):vf?vf(wf,xf):xf;});}function pd(vf,wf,xf){if(xf.length===0)return vf;return vf.withMutations((function(yf){var zf=wf?(function(bg,cg){var dg=yf.get(cg,q);yf.set(cg,dg===q?bg:wf(dg,bg));}):(function(bg,cg){yf.set(cg,bg);});for(var ag=0;ag<xf.length;ag++)xf[ag].forEach(zf);}));}function qd(vf,wf,xf,yf,zf){var ag=wf.length;if(zf===ag)return yf(vf);x(vf.set);var bg=zf===ag-1?xf:sc.empty(),cg=wf[zf],dg=vf.get(cg,bg),eg=qd(dg,wf,xf,yf,zf+1);return eg===dg?vf:vf.set(cg,eg);}function rd(vf){vf=vf-((vf>>1)&1431655765);vf=(vf&858993459)+((vf>>2)&858993459);vf=(vf+(vf>>4))&252645135;vf=vf+(vf>>8);vf=vf+(vf>>16);return vf&127;}function sd(vf,wf,xf,yf){var zf=yf?vf:w(vf);zf[wf]=xf;return zf;}function td(vf,wf,xf,yf){var zf=vf.length+1;if(yf&&wf+1===zf){vf[wf]=xf;return vf;}var ag=new Array(zf),bg=0;for(var cg=0;cg<zf;cg++)if(cg===wf){ag[cg]=xf;bg=-1;}else ag[cg]=vf[cg+bg];return ag;}function ud(vf,wf,xf){var yf=vf.length-1;if(xf&&wf===yf){vf.pop();return vf;}var zf=new Array(yf),ag=0;for(var bg=0;bg<yf;bg++){if(bg===wf)ag=1;zf[bg]=vf[bg+ag];}return zf;}var vd=o/2,wd=o/4,xd,yd=function vf(){for(var wf=[],xf=0;xf<arguments.length;xf++)wf[xf]=arguments[xf];return zd.from(wf);},zd=yd;(l.createClass)(yd,{toString:function(){return this.__toString('Vector [',']');},get:function(vf,wf){vf=ub(this,vf);if(vf<0||vf>=this.length)return wf;vf+=this._origin;var xf=ke(this,vf);return xf&&xf.array[vf&p];},set:function(vf,wf){return he(this,vf,wf);},remove:function(vf){return he(this,vf,q);},clear:function(){if(this.length===0)return this;if(this.__ownerID){this.length=this._origin=this._size=0;this._level=n;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this;}return zd.empty();},push:function(){var vf=arguments,wf=this.length;return this.withMutations((function(xf){le(xf,0,wf+vf.length);for(var yf=0;yf<vf.length;yf++)xf.set(wf+yf,vf[yf]);}));},pop:function(){return le(this,0,-1);},unshift:function(){var vf=arguments;return this.withMutations((function(wf){le(wf,-vf.length);for(var xf=0;xf<vf.length;xf++)wf.set(xf,vf[xf]);}));},shift:function(){return le(this,1);},merge:function(){return me(this,null,arguments);},mergeWith:function(vf){for(var wf=[],xf=1;xf<arguments.length;xf++)wf[xf-1]=arguments[xf];return me(this,vf,wf);},mergeDeep:function(){return me(this,od(null),arguments);},mergeDeepWith:function(vf){for(var wf=[],xf=1;xf<arguments.length;xf++)wf[xf-1]=arguments[xf];return me(this,od(vf),wf);},setLength:function(vf){return le(this,0,vf);},slice:function(vf,wf){var xf=l.superCall(this,zd.prototype,"slice",[vf,wf]);if(xf!==this){var yf=this,zf=yf.length;xf.toVector=(function(){return le(yf,vf<0?Math.max(0,zf+vf):zf?Math.min(zf,vf):vf,wf==null?zf:wf<0?Math.max(0,zf+wf):zf?Math.min(zf,wf):wf);});}return xf;},__iterator:function(vf,wf){return new ee(this,vf,wf);},__iterate:function(vf,wf){var xf=this,yf=0,zf=(function(bg){return vf(bg,yf++,xf);}),ag=ne(this._size);if(wf){de(this._tail,0,ag-this._origin,this._size-this._origin,zf,wf)&&de(this._root,this._level,-this._origin,ag-this._origin,zf,wf);}else de(this._root,this._level,-this._origin,ag-this._origin,zf,wf)&&de(this._tail,0,ag-this._origin,this._size-this._origin,zf,wf);return yf;},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;if(!vf){this.__ownerID=vf;return this;}return ge(this._origin,this._size,this._level,this._root,this._tail,vf,this.__hash);}},{empty:function(){return oe||(oe=ge(0,0,n));},from:function(vf){if(!vf||vf.length===0)return zd.empty();if(vf.constructor===zd)return vf;var wf=Array.isArray(vf);if(vf.length>0&&vf.length<o)return ge(0,vf.length,n,null,new be(wf?w(vf):za(vf).toArray()));if(!wf)vf=za(vf).valueSeq();return zd.empty().merge(vf);}},cb);var ae=yd.prototype;ae[m]=ae.remove;ae.update=uc.update;ae.updateIn=uc.updateIn;ae.cursor=uc.cursor;ae.withMutations=uc.withMutations;ae.asMutable=uc.asMutable;ae.asImmutable=uc.asImmutable;ae.wasAltered=uc.wasAltered;var be=function vf(wf,xf){this.array=wf;this.ownerID=xf;},ce=be;(l.createClass)(be,{removeBefore:function(vf,wf,xf){if(xf===wf?1<<wf:this.array.length===0)return this;var yf=(xf>>>wf)&p;if(yf>=this.array.length)return new ce([],vf);var zf=yf===0,ag;if(wf>0){var bg=this.array[yf];ag=bg&&bg.removeBefore(vf,wf-n,xf);if(ag===bg&&zf)return this;}if(zf&&!ag)return this;var cg=je(this,vf);if(!zf)for(var dg=0;dg<yf;dg++)cg.array[dg]=undefined;if(ag)cg.array[yf]=ag;return cg;},removeAfter:function(vf,wf,xf){if(xf===wf?1<<wf:this.array.length===0)return this;var yf=((xf-1)>>>wf)&p;if(yf>=this.array.length)return this;var zf=yf===this.array.length-1,ag;if(wf>0){var bg=this.array[yf];ag=bg&&bg.removeAfter(vf,wf-n,xf);if(ag===bg&&zf)return this;}if(zf&&!ag)return this;var cg=je(this,vf);if(!zf)cg.array.pop();if(ag)cg.array[yf]=ag;return cg;}},{});function de(vf,wf,xf,yf,zf,ag){var bg,cg=vf&&vf.array;if(wf===0){var dg=xf<0?-xf:0,eg=yf-xf;if(eg>o)eg=o;for(bg=dg;bg<eg;bg++)if(zf(cg&&cg[ag?dg+eg-1-bg:bg])===false)return false;}else{var fg=1<<wf,gg=wf-n;for(bg=0;bg<=p;bg++){var hg=ag?p-bg:bg,ig=xf+(hg<<wf);if(ig<yf&&ig+fg>0){var jg=cg&&cg[hg];if(!de(jg,gg,ig,yf,zf,ag))return false;}}}return true;}var ee=function vf(wf,xf,yf){this._type=xf;this._reverse=!!yf;this._maxIndex=wf.length-1;var zf=ne(wf._size),ag=fe(wf._root&&wf._root.array,wf._level,-wf._origin,zf-wf._origin-1),bg=fe(wf._tail&&wf._tail.array,0,zf-wf._origin,wf._size-wf._origin-1);this._stack=yf?bg:ag;this._stack.__prev=yf?ag:bg;};(l.createClass)(ee,{next:function(){var vf=this._stack;while(vf){var wf=vf.array,xf=vf.index++;if(this._reverse){xf=p-xf;if(xf>vf.rawMax){xf=vf.rawMax;vf.index=o-xf;}}if(xf>=0&&xf<o&&xf<=vf.rawMax){var yf=wf&&wf[xf];if(vf.level===0){var zf=this._type,ag;if(zf!==1){ag=vf.offset+(xf<<vf.level);if(this._reverse)ag=this._maxIndex-ag;}return ta(zf,ag,yf);}else this._stack=vf=fe(yf&&yf.array,vf.level-n,vf.offset+(xf<<vf.level),vf.max,vf);continue;}vf=this._stack=this._stack.__prev;}return ua();}},{},ra);function fe(vf,wf,xf,yf,zf){return {array:vf,level:wf,offset:xf,max:yf,rawMax:((yf-xf)>>wf),index:0,__prev:zf};}function ge(vf,wf,xf,yf,zf,ag,bg){var cg=Object.create(ae);cg.length=wf-vf;cg._origin=vf;cg._size=wf;cg._level=xf;cg._root=yf;cg._tail=zf;cg.__ownerID=ag;cg.__hash=bg;cg.__altered=false;return cg;}function he(vf,wf,xf){wf=ub(vf,wf);if(wf>=vf.length||wf<0)return xf===q?vf:vf.withMutations((function(bg){wf<0?le(bg,wf).set(0,xf):le(bg,0,wf+1).set(wf,xf);}));wf+=vf._origin;var yf=vf._tail,zf=vf._root,ag=t(s);if(wf>=ne(vf._size)){yf=ie(yf,vf.__ownerID,0,wf,xf,ag);}else zf=ie(zf,vf.__ownerID,vf._level,wf,xf,ag);if(!ag.value)return vf;if(vf.__ownerID){vf._root=zf;vf._tail=yf;vf.__hash=undefined;vf.__altered=true;return vf;}return ge(vf._origin,vf._size,vf._level,zf,yf);}function ie(vf,wf,xf,yf,zf,ag){var bg=zf===q,cg,dg=(yf>>>xf)&p,eg=vf&&dg<vf.array.length;if(bg&&!eg)return vf;if(xf>0){var fg=vf&&vf.array[dg],gg=ie(fg,wf,xf-n,yf,zf,ag);if(gg===fg)return vf;cg=je(vf,wf);cg.array[dg]=gg;return cg;}if(!bg&&eg&&vf.array[dg]===zf)return vf;u(ag);cg=je(vf,wf);if(bg&&dg===cg.array.length-1){cg.array.pop();}else cg.array[dg]=bg?undefined:zf;return cg;}function je(vf,wf){if(wf&&vf&&wf===vf.ownerID)return vf;return new be(vf?vf.array.slice():[],wf);}function ke(vf,wf){if(wf>=ne(vf._size))return vf._tail;if(wf<1<<(vf._level+n)){var xf=vf._root,yf=vf._level;while(xf&&yf>0){xf=xf.array[(wf>>>yf)&p];yf-=n;}return xf;}}function le(vf,wf,xf){var yf=vf.__ownerID||new v(),zf=vf._origin,ag=vf._size,bg=zf+wf,cg=xf==null?ag:xf<0?ag+xf:zf+xf;if(bg===zf&&cg===ag)return vf;if(bg>=cg)return vf.clear();var dg=vf._level,eg=vf._root,fg=0;while(bg+fg<0){eg=new be(eg&&eg.array.length?[null,eg]:[],yf);dg+=n;fg+=1<<dg;}if(fg){bg+=fg;zf+=fg;cg+=fg;ag+=fg;}var gg=ne(ag),hg=ne(cg);while(hg>=1<<(dg+n)){eg=new be(eg&&eg.array.length?[eg]:[],yf);dg+=n;}var ig=vf._tail,jg=hg<gg?ke(vf,cg-1):hg>gg?new be([],yf):ig;if(ig&&hg>gg&&bg<ag&&ig.array.length){eg=je(eg,yf);var kg=eg;for(var lg=dg;lg>n;lg-=n){var mg=(gg>>>lg)&p;kg=kg.array[mg]=je(kg.array[mg],yf);}kg.array[(gg>>>n)&p]=ig;}if(cg<ag)jg=jg&&jg.removeAfter(yf,0,cg);if(bg>=hg){bg-=hg;cg-=hg;dg=n;eg=null;jg=jg&&jg.removeBefore(yf,0,bg);}else if(bg>zf||hg<gg){var ng,og;fg=0;do{ng=((bg)>>>dg)&p;og=((hg-1)>>>dg)&p;if(ng===og){if(ng)fg+=(1<<dg)*ng;dg-=n;eg=eg&&eg.array[ng];}}while(eg&&ng===og);if(eg&&bg>zf)eg=eg&&eg.removeBefore(yf,dg,bg-fg);if(eg&&hg<gg)eg=eg&&eg.removeAfter(yf,dg,hg-fg);if(fg){bg-=fg;cg-=fg;}}if(vf.__ownerID){vf.length=cg-bg;vf._origin=bg;vf._size=cg;vf._level=dg;vf._root=eg;vf._tail=jg;vf.__hash=undefined;vf.__altered=true;return vf;}return ge(bg,cg,dg,eg,jg);}function me(vf,wf,xf){var yf=[];for(var zf=0;zf<xf.length;zf++){var ag=xf[zf];ag&&yf.push(za(ag));}var bg=Math.max.apply(null,yf.map((function(cg){return cg.length||0;})));if(bg>vf.length)vf=vf.setLength(bg);return pd(vf,wf,yf);}function ne(vf){return vf<o?0:(((vf-1)>>>n)<<n);}var oe,pe=function vf(){for(var wf=[],xf=0;xf<arguments.length;xf++)wf[xf]=arguments[xf];return qe.from(wf);},qe=pe;(l.createClass)(pe,{toString:function(){return this.__toString('Stack [',']');},get:function(vf,wf){var xf=this._head;while(xf&&vf--)xf=xf.next;return xf?xf.value:wf;},peek:function(){return this._head&&this._head.value;},unshift:function(){if(arguments.length===0)return this;var vf=this.length+arguments.length,wf=this._head;for(var xf=arguments.length-1;xf>=0;xf--)wf={value:arguments[xf],next:wf};if(this.__ownerID){this.length=vf;this._head=wf;this.__hash=undefined;this.__altered=true;return this;}return se(vf,wf);},unshiftAll:function(vf){vf=za(vf);if(vf.length===0)return this;var wf=this.length,xf=this._head;vf.reverse().forEach((function(yf){wf++;xf={value:yf,next:xf};}));if(this.__ownerID){this.length=wf;this._head=xf;this.__hash=undefined;this.__altered=true;return this;}return se(wf,xf);},shift:function(){return this.slice(1);},clear:function(){if(this.length===0)return this;if(this.__ownerID){this.length=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this;}return qe.empty();},slice:function(vf,wf){if(kb(vf,wf,this.length))return this;var xf=lb(vf,this.length),yf=mb(wf,this.length);if(yf!==this.length)return l.superCall(this,qe.prototype,"slice",[vf,wf]);var zf=this.length-xf,ag=this._head;while(xf--)ag=ag.next;if(this.__ownerID){this.length=zf;this._head=ag;this.__hash=undefined;this.__altered=true;return this;}return se(zf,ag);},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;if(!vf){this.__ownerID=vf;this.__altered=false;return this;}return se(this.length,this._head,vf,this.__hash);},__iterateUncached:function(vf,wf){if(wf)return this.cacheResult().__iterate(vf,wf);var xf=0,yf=this._head;while(yf){if(vf(yf.value,xf++,this)===false)break;yf=yf.next;}return xf;},__iteratorUncached:function(vf,wf){if(wf)return this.cacheResult().__iterator(vf,wf);var xf=0,yf=this._head;return new ra((function(){if(yf){var zf=yf.value;yf=yf.next;return ta(vf,xf++,zf);}return ua();}));}},{empty:function(){return te||(te=se(0));},from:function(vf){var wf=qe.empty();return vf?vf.constructor===qe?vf:wf.unshiftAll(vf):wf;}},cb);var re=pe.prototype;re.push=re.unshift;re.pop=re.shift;re.withMutations=uc.withMutations;re.asMutable=uc.asMutable;re.asImmutable=uc.asImmutable;re.wasAltered=uc.wasAltered;function se(vf,wf,xf,yf){var zf=Object.create(re);zf.length=vf;zf._head=wf;zf.__ownerID=xf;zf.__hash=yf;zf.__altered=false;return zf;}var te,ue=function vf(){for(var wf=[],xf=0;xf<arguments.length;xf++)wf[xf]=arguments[xf];return ve.from(wf);},ve=ue;(l.createClass)(ue,{toString:function(){return this.__toString('Set {','}');},has:function(vf){return this._map.has(vf);},get:function(vf,wf){return this.has(vf)?vf:wf;},add:function(vf){var wf=this._map.set(vf,null);if(this.__ownerID){this.length=wf.length;this._map=wf;return this;}return wf===this._map?this:xe(wf);},remove:function(vf){var wf=this._map.remove(vf);if(this.__ownerID){this.length=wf.length;this._map=wf;return this;}return wf===this._map?this:wf.length===0?ve.empty():xe(wf);},clear:function(){if(this.length===0)return this;if(this.__ownerID){this.length=0;this._map.clear();return this;}return ve.empty();},union:function(){var vf=arguments;if(vf.length===0)return this;return this.withMutations((function(wf){for(var xf=0;xf<vf.length;xf++)za(vf[xf]).forEach((function(yf){return wf.add(yf);}));}));},intersect:function(){for(var vf=[],wf=0;wf<arguments.length;wf++)vf[wf]=arguments[wf];if(vf.length===0)return this;vf=vf.map((function(yf){return za(yf);}));var xf=this;return this.withMutations((function(yf){xf.forEach((function(zf){if(!vf.every((function(ag){return ag.contains(zf);})))yf.remove(zf);}));}));},subtract:function(){for(var vf=[],wf=0;wf<arguments.length;wf++)vf[wf]=arguments[wf];if(vf.length===0)return this;vf=vf.map((function(yf){return za(yf);}));var xf=this;return this.withMutations((function(yf){xf.forEach((function(zf){if(vf.some((function(ag){return ag.contains(zf);})))yf.remove(zf);}));}));},isSubset:function(vf){vf=za(vf);return this.every((function(wf){return vf.contains(wf);}));},isSuperset:function(vf){var wf=this;vf=za(vf);return vf.every((function(xf){return wf.contains(xf);}));},wasAltered:function(){return this._map.wasAltered();},hashCode:function(){return this._map.hashCode();},__iterate:function(vf,wf){var xf=this;return this._map.__iterate((function(yf,zf){return vf(zf,zf,xf);}),wf);},__iterator:function(vf,wf){return this._map.map((function(xf,yf){return yf;})).__iterator(vf,wf);},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;var wf=this._map.__ensureOwner(vf);if(!vf){this.__ownerID=vf;this._map=wf;return this;}return xe(wf,vf);}},{empty:function(){return ye||(ye=xe(sc.empty()));},from:function(vf){var wf=ve.empty();return vf?vf.constructor===ve?vf:wf.union(vf):wf;},fromKeys:function(vf){return ve.from(za(vf).flip());}},za);var we=ue.prototype;we[m]=we.remove;we[qa]=we.values;we.contains=we.has;we.mergeDeep=we.merge=we.union;we.mergeDeepWith=we.mergeWith=function(vf){for(var wf=[],xf=1;xf<arguments.length;xf++)wf[xf-1]=arguments[xf];return this.merge.apply(this,wf);};we.withMutations=uc.withMutations;we.asMutable=uc.asMutable;we.asImmutable=uc.asImmutable;we.__toJS=eb.__toJS;we.__toStringMapper=eb.__toStringMapper;function xe(vf,wf){var xf=Object.create(we);xf.length=vf?vf.length:0;xf._map=vf;xf.__ownerID=wf;return xf;}var ye,ze=function vf(wf){var xf=af.empty();return wf?wf.constructor===af?wf:xf.merge(wf):xf;},af=ze;(l.createClass)(ze,{toString:function(){return this.__toString('OrderedMap {','}');},get:function(vf,wf){var xf=this._map.get(vf);return xf!=null?this._vector.get(xf)[1]:wf;},clear:function(){if(this.length===0)return this;if(this.__ownerID){this.length=0;this._map.clear();this._vector.clear();return this;}return af.empty();},set:function(vf,wf){return cf(this,vf,wf);},remove:function(vf){return cf(this,vf,q);},wasAltered:function(){return this._map.wasAltered()||this._vector.wasAltered();},__iterate:function(vf,wf){var xf=this;return this._vector.__iterate((function(yf){return yf&&vf(yf[1],yf[0],xf);}),wf);},__iterator:function(vf,wf){return this._vector.fromEntrySeq().__iterator(vf,wf);},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;var wf=this._map.__ensureOwner(vf),xf=this._vector.__ensureOwner(vf);if(!vf){this.__ownerID=vf;this._map=wf;this._vector=xf;return this;}return bf(wf,xf,vf,this.__hash);}},{empty:function(){return df||(df=bf(sc.empty(),yd.empty()));}},sc);ze.from=ze;ze.prototype[m]=ze.prototype.remove;function bf(vf,wf,xf,yf){var zf=Object.create(ze.prototype);zf.length=vf?vf.length:0;zf._map=vf;zf._vector=wf;zf.__ownerID=xf;zf.__hash=yf;return zf;}function cf(vf,wf,xf){var yf=vf._map,zf=vf._vector,ag=yf.get(wf),bg=ag!==undefined,cg=xf===q;if((!bg&&cg)||(bg&&xf===zf.get(ag)[1]))return vf;if(!bg)ag=zf.length;var dg=cg?yf.remove(wf):bg?yf:yf.set(wf,ag),eg=cg?zf.remove(ag):zf.set(ag,[wf,xf]);if(vf.__ownerID){vf.length=dg.length;vf._map=dg;vf._vector=eg;vf.__hash=undefined;return vf;}return bf(dg,eg);}var df,ef=function vf(wf,xf){var yf=function(cg){if(!(this instanceof yf))return new yf(cg);this._map=sc(cg);},zf=Object.keys(wf),ag=yf.prototype=Object.create(gf);ag.constructor=yf;xf&&(ag._name=xf);ag._defaultValues=wf;ag._keys=zf;ag.length=zf.length;try{za(wf).forEach((function(cg,dg){Object.defineProperty(yf.prototype,dg,{get:function(){return this.get(dg);},set:function(eg){x(this.__ownerID);this.set(dg,eg);}});}));}catch(bg){}return yf;},ff=ef;(l.createClass)(ef,{toString:function(){return this.__toString(this._name+' {','}');},has:function(vf){return this._defaultValues.hasOwnProperty(vf);},get:function(vf,wf){if(wf!==undefined&&!this.has(vf))return wf;return this._map.get(vf,this._defaultValues[vf]);},clear:function(){if(this.__ownerID){this._map.clear();return this;}var vf=Object.getPrototypeOf(this).constructor;return ff._empty||(ff._empty=hf(this,sc.empty()));},set:function(vf,wf){if(!this.has(vf))throw new Error('Cannot set unknown key "'+vf+'" on '+this._name);var xf=this._map.set(vf,wf);if(this.__ownerID||xf===this._map)return this;return hf(this,xf);},remove:function(vf){if(vf==null||!this.has(vf))return this;var wf=this._map.remove(vf);if(this.__ownerID||wf===this._map)return this;return hf(this,wf);},keys:function(){return this._map.keys();},values:function(){return this._map.values();},entries:function(){return this._map.entries();},wasAltered:function(){return this._map.wasAltered();},__iterator:function(vf,wf){return this._map.__iterator(vf,wf);},__iterate:function(vf,wf){var xf=this;return za(this._defaultValues).map((function(yf,zf){return xf.get(zf);})).__iterate(vf,wf);},__ensureOwner:function(vf){if(vf===this.__ownerID)return this;var wf=this._map&&this._map.__ensureOwner(vf);if(!vf){this.__ownerID=vf;this._map=wf;return this;}return hf(this,wf,vf);}},{},za);var gf=ef.prototype;gf._name='Record';gf[m]=gf.remove;gf.merge=uc.merge;gf.mergeWith=uc.mergeWith;gf.mergeDeep=uc.mergeDeep;gf.mergeDeepWith=uc.mergeDeepWith;gf.update=uc.update;gf.updateIn=uc.updateIn;gf.cursor=uc.cursor;gf.withMutations=uc.withMutations;gf.asMutable=uc.asMutable;gf.asImmutable=uc.asImmutable;function hf(vf,wf,xf){var yf=Object.create(Object.getPrototypeOf(vf));yf._map=wf;yf.__ownerID=xf;return yf;}var jf=function vf(wf,xf,yf){if(!(this instanceof kf))return new kf(wf,xf,yf);x(yf!==0);wf=wf||0;if(xf==null)xf=Infinity;if(wf===xf&&mf)return mf;yf=yf==null?1:Math.abs(yf);if(xf<wf)yf=-yf;this._start=wf;this._end=xf;this._step=yf;this.length=Math.max(0,Math.ceil((xf-wf)/yf-1)+1);},kf=jf;(l.createClass)(jf,{toString:function(){if(this.length===0)return 'Range []';return 'Range [ '+this._start+'...'+this._end+(this._step>1?' by '+this._step:'')+' ]';},get:function(vf,wf){return this.has(vf)?this._start+ub(this,vf)*this._step:wf;},contains:function(vf){var wf=(vf-this._start)/this._step;return wf>=0&&wf<this.length&&wf===Math.floor(wf);},slice:function(vf,wf){if(kb(vf,wf,this.length))return this;vf=lb(vf,this.length);wf=mb(wf,this.length);if(wf<=vf)return mf;return new kf(this.get(vf,this._end),this.get(wf,this._end),this._step);},indexOf:function(vf){var wf=vf-this._start;if(wf%this._step===0){var xf=wf/this._step;if(xf>=0&&xf<this.length)return xf;}return -1;},lastIndexOf:function(vf){return this.indexOf(vf);},take:function(vf){return this.slice(0,Math.max(0,vf));},skip:function(vf){return this.slice(Math.max(0,vf));},__iterate:function(vf,wf){var xf=this.length-1,yf=this._step,zf=wf?this._start+xf*yf:this._start;for(var ag=0;ag<=xf;ag++){if(vf(zf,ag,this)===false)return ag+1;zf+=wf?-yf:yf;}return ag;},__iterator:function(vf,wf){var xf=this.length-1,yf=this._step,zf=wf?this._start+xf*yf:this._start,ag=0;return new ra((function(){var bg=zf;zf+=wf?-yf:yf;return ag>xf?ua():ta(vf,ag++,bg);}));},__deepEquals:function(vf){return vf instanceof kf?this._start===vf._start&&this._end===vf._end&&this._step===vf._step:l.superCall(this,kf.prototype,"__deepEquals",[vf]);}},{},cb);var lf=jf.prototype;lf.__toJS=lf.toArray;lf.first=ae.first;lf.last=ae.last;var mf=jf(0,0),nf=function vf(wf,xf){if(xf===0&&qf)return qf;if(!(this instanceof of))return new of(wf,xf);this._value=wf;this.length=xf==null?Infinity:Math.max(0,xf);},of=nf;(l.createClass)(nf,{toString:function(){if(this.length===0)return 'Repeat []';return 'Repeat [ '+this._value+' '+this.length+' times ]';},get:function(vf,wf){return this.has(vf)?this._value:wf;},contains:function(vf){return rc(this._value,vf);},slice:function(vf,wf){var xf=this.length;vf=vf<0?Math.max(0,xf+vf):Math.min(xf,vf);wf=wf==null?xf:wf>0?Math.min(xf,wf):Math.max(0,xf+wf);return wf>vf?new of(this._value,wf-vf):qf;},reverse:function(){return this;},indexOf:function(vf){if(rc(this._value,vf))return 0;return -1;},lastIndexOf:function(vf){if(rc(this._value,vf))return this.length;return -1;},__iterate:function(vf,wf){for(var xf=0;xf<this.length;xf++)if(vf(this._value,xf,this)===false)return xf+1;return xf;},__iterator:function(vf,wf){var xf=this,yf=0;return new ra((function(){return yf<xf.length?ta(vf,yf++,xf._value):ua();}));},__deepEquals:function(vf){return vf instanceof of?rc(this._value,vf._value):l.superCall(this,of.prototype,"__deepEquals",[vf]);}},{},cb);var pf=nf.prototype;pf.last=pf.first;pf.has=lf.has;pf.take=lf.take;pf.skip=lf.skip;pf.__toJS=lf.__toJS;var qf=new nf(undefined,0);function rf(vf,wf){if(wf)return sf(wf,vf,'',{'':vf});return tf(vf);}function sf(vf,wf,xf,yf){if(wf&&(Array.isArray(wf)||wf.constructor===Object))return vf.call(yf,xf,za(wf).map((function(zf,ag){return sf(vf,zf,ag,wf);})));return wf;}function tf(vf){if(vf){if(Array.isArray(vf))return za(vf).map(tf).toVector();if(vf.constructor===Object)return za(vf).map(tf).toMap();}return vf;}var uf={Sequence:za,Map:sc,Vector:yd,Stack:pe,Set:ue,OrderedMap:ze,Record:ef,Range:jf,Repeat:nf,is:rc,fromJS:rf};return uf;}typeof f==='object'?e.exports=g():typeof define==='function'&&define.amd?define(g):Immutable=g();},null);
__d("SelectionState",["immutable"],function(a,b,c,d,e,f,g){"use strict";var h=g.Record({anchorKey:null,anchorOffset:null,focusKey:null,focusOffset:null,isBackward:false,hasFocus:false});for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){if(h!==null)h.apply(this,arguments);}k.prototype.getAnchorKey=function(){return this.anchorKey;};k.prototype.getAnchorOffset=function(){return this.anchorOffset;};k.prototype.getFocusKey=function(){return this.focusKey;};k.prototype.getFocusOffset=function(){return this.focusOffset;};k.prototype.getIsBackward=function(){return this.isBackward;};k.prototype.getHasFocus=function(){return this.hasFocus;};k.prototype.hasEdgeWithin=function(l,m,n){var o=this.getAnchorKey(),p=this.getFocusKey();if(o===p&&o===l){var q=this.getStartOffset(),r=this.getEndOffset();return m<=r&&q<=n;}var s;if(l===o){s=this.getAnchorOffset();}else if(l===p){s=this.getFocusOffset();}else return false;return m<=s&&n>=s;};k.prototype.isCollapsed=function(){return (this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset());};k.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};k.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};k.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};k.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};e.exports=k;},null);
__d("MentionResultsPropTypes",["React","SearchableEntry","SelectionState"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k={viewID:j.string.isRequired,selection:j.instanceOf(i).isRequired,contextComponent:j.object.isRequired,mentionableEntries:j.array.isRequired,highlightedMentionable:j.instanceOf(h),onMentionSelect:j.func.isRequired,onMentionHighlight:j.func.isRequired,onMentionRenderHighlight:j.func.isRequired};e.exports=k;},null);
__d("MentionsLayer.react",["Bootloader","Locale","MentionResultsPropTypes","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.PropTypes,m=false,n=h.isRTL(),o,p,q,r,s=5,t=j.createClass({displayName:'MentionsLayer',propTypes:Object.assign({},i,{typeaheadView:l.func.isRequired,typeaheadViewProps:l.object}),getInitialState:function(){return {bootloaded:m};},componentWillMount:function(){if(!this.state.bootloaded)u(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function(v,w){w.preventDefault();this.props.onMentionSelect(v);},shouldComponentUpdate:function(v,w){return (this.state.bootloaded!==w.bootloaded||!k(this.props.mentionableEntries,v.mentionableEntries)||this.props.highlightedMentionable!==v.highlightedMentionable||this.props.characterOffset!==v.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var v=this.props.mentionableEntries,w=this.props.selection,x=(w.isCollapsed()&&w.getHasFocus()&&v&&v.length),y=null;if(x)y=r(this.props.characterOffset,n);var z={};if(this.props.autoflip){z.ContextualLayerAutoFlip=p;z.ContextualLayerUpdateOnScroll=q;}var aa=this.props.typeaheadView;return (j.createElement(o,{shown:x,context:this.props.contextComponent,contextBounds:y,offsetY:s,position:"below",behaviors:z},j.createElement(aa,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:v||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function u(v){g.loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(w,x,y,z){o=w;p=x;q=y;r=z;m=true;v();});}e.exports=t;},null);
__d("fillArray",[],function(a,b,c,d,e,f){function g(h,i){var j=new Array(h);for(var k=0;k<h;k++)j[k]=i;return j;}e.exports=g;},null);
__d("DocumentCompositeDecorator.Experimental",["immutable","fillArray"],function(a,b,c,d,e,f,g,h){var i='.';function j(m){"use strict";this.$DocumentCompositeDecorator0=m.slice();}j.prototype.getDecorations=function(m){"use strict";var n=h(m.getText().length,null);this.$DocumentCompositeDecorator0.forEach(function(o,p){var q=0,r=o.getStrategy();r(m,function(s,t){if(k(n,s,t)){l(n,s,t,p+i+q);q++;}});});return g.Vector.from(n);};j.prototype.getComponentForKey=function(m){"use strict";var n=parseInt(m.split(i),10);return this.$DocumentCompositeDecorator0[n].getComponent();};j.prototype.getPropsForKey=function(m){"use strict";var n=parseInt(m.split(i),10);return this.$DocumentCompositeDecorator0[n].getProps();};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}e.exports=j;},null);
__d("DocumentDecorator",[],function(a,b,c,d,e,f){function g(h,i,j){"use strict";this.$DocumentDecorator0=h;this.$DocumentDecorator1=i;this.$DocumentDecorator2=j||{};}g.prototype.getStrategy=function(){"use strict";return this.$DocumentDecorator0;};g.prototype.getComponent=function(){"use strict";return this.$DocumentDecorator1;};g.prototype.getProps=function(){"use strict";return this.$DocumentDecorator2;};e.exports=g;},null);
__d("DocumentEntityInstance",["ComposedEntityMutability","ComposedEntityType","arrayContains","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(h),m=j(g);function n(o,p,q){"use strict";k(i(l,o));k(i(m,p));this.$DocumentEntityInstance0=o;this.$DocumentEntityInstance1=p;this.$DocumentEntityInstance2=q;}n.prototype.getType=function(){"use strict";return this.$DocumentEntityInstance0;};n.prototype.getMutability=function(){"use strict";return this.$DocumentEntityInstance1;};n.prototype.getData=function(){"use strict";return this.$DocumentEntityInstance2;};n.prototype.replaceData=function(o){"use strict";this.$DocumentEntityInstance2=o;};e.exports=n;},null);
__d("DocumentEntity",["DocumentEntityInstance","invariant"],function(a,b,c,d,e,f,g,h){var i={},j=0,k={create:function(l,m,n){return k.add(new g(l,m,n));},add:function(l){i[++j]=l;return j.toString();},get:function(l){var m=i[l];h(!!m);return m;}};e.exports=k;},null);
__d("EmoticonSpan.react",["DocumentEntity","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k={smile:"_5uj7",frown:"_5uj8",tongue:"_5uj9",grin:"_5uja",gasp:"_5ujb",wink:"_5ujc",glasses:"_5ujd",sunglasses:"_5ujh",grumpy:"_5uji",unsure:"_5ujj",cry:"_5ujw",devil:"_5ujx",angel:"_5ujy",kiss:"_5ujz",heart:"_5uk7",kiki:"_5ukd",squint:"_5ukg",confused:"_5ukj",confused_rev:"_5ukl",upset:"_5ukp",pacman:"_5ukq",robot:"_5ukr",colonthree:"_5uks",penguin:"_5ukt",putnam:"_5uku",shark:"_5ukv",like:"_5ukw",poop:"_5ukx"},l=h.createClass({displayName:'EmoticonSpan',render:function(){var m=g.get(this.props.entityKey),n=m.getData().type,o=j("_1ty6",k[n]);return (h.createElement("span",{className:o,title:n,'data-offset-key':this.props.offsetKey},h.createElement("span",{className:"_5ukz"},this.props.children)));}});e.exports=l;},null);
__d("HashtagSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'HashtagSpan',render:function(){return (g.createElement("span",{'data-offset-key':this.props.offsetKey,className:"_5u8n",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("MentionSpan.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'MentionSpan',render:function(){return (g.createElement("span",{'data-offset-key':this.props.offsetKey,className:"_5u8u",spellCheck:false},this.props.children));}});e.exports=i;},null);
__d("findRangesImmutable",[],function(a,b,c,d,e,f){function g(h,i,j){var k=0;h.forEach(function(l,m){var n=m+1;if(l!==h.get(n)){if(i(l))j(k,n);k=n;}});}e.exports=g;},null);
__d("getEntityMatcherExperimental",["DocumentEntity","findRangesImmutable"],function(a,b,c,d,e,f,g,h){function i(j,k){k=k||g.get;return function(l,m){h(l.getEntities(),function(n){return n!==null&&j(k(n));},m);};}e.exports=i;},null);
__d("getMentionsInputDecorator",["ComposedEntityType","DocumentCompositeDecorator.Experimental","DocumentDecorator","EmoticonSpan.react","HashtagSpan.react","MentionSpan.react","WeakMentionSpan.react","getEntityMatcherExperimental","getHashtagMatchesExperimental"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=g.EMOTICON,q=g.MENTION,r;function s(){if(!r)r=new h([new i(n(function(t){var u=t.getData();return t.getType()===q&&u&&u.isWeak;}),m),new i(n(function(t){return t.getType()===q;}),l),new i(n(function(t){return t.getType()===p;}),j),new i(o,k)]);return r;}e.exports=s;},null);
__d("UFIActorSelector.react",["ActorSelector.react","Arbiter","AsyncRequest","Parent","React","SubscriptionsHandler","UFICentralUpdates","UFIFeedbackTargets","UFIUserActions","XUFIActorSelectorNuxSeenControllerURIBuilder","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='ufi_actor_selector_nux_disabled_event',s=k.createClass({displayName:'UFIActorSelector',propTypes:{actorIDs:k.PropTypes.array.isRequired,ftEntIdentifier:k.PropTypes.string.isRequired,isTimeline:k.PropTypes.bool,nuxEnabledCovered:k.PropTypes.bool,nuxEnabledUncovered:k.PropTypes.bool,nuxHoverContext:k.PropTypes.object,settingsURI:k.PropTypes.string},getInitialState:function(){var t=j.byClass(this.props.nuxHoverContext,'timelineUnitContainer');return {loading:false,nuxEnabledCovered:this.props.nuxEnabledCovered,nuxEnabledUncovered:this.props.nuxEnabledUncovered,nuxHoverContext:t?t:this.props.nuxHoverContext,selectedActorID:null};},render:function(){return (k.createElement(g,{actorIDs:this.props.actorIDs,coverEnabled:true,loading:this.state.loading,nuxBody:this._getNUXBody(),nuxEnabledCovered:this.state.nuxEnabledCovered,nuxEnabledUncovered:this.state.nuxEnabledUncovered,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName,tooltipConstructorCovered:this._getCoveredTooltip}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new l();this._subscriptions.addSubscriptions(m.subscribe('feedback-updated',function(t,u){if(this.props.ftEntIdentifier in u.updates)this._updateSelectedActorIDFromFeedbackTarget();}.bind(this)),h.subscribe(r,function(){this.setState({nuxEnabledCovered:false,nuxEnabledUncovered:false});}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){n.getFeedbackTarget(this.props.ftEntIdentifier,function(t){this.setState({loading:false,selectedActorID:t.actorforpost});}.bind(this));},_getNUXBody:function(){return ("Choose whether to like and comment as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(t){return (q._("Liking and commenting as {actorName}",[q.param("actorName",t)]));},_getCoveredTooltip:function(){return ("Like or comment as one of the Pages you manage.");},_onChange:function(t){this.setState({loading:true});o.changeActor(this.props.ftEntIdentifier,t.value);},_onCompleteNux:function(t){var u=t.isCovered,v=new p().setBool('is_covered',u).setBool('is_timeline',this.props.isTimeline).getURI();new i().setURI(v).send();h.inform(r);}});e.exports=s;},null);
__d("ContentStateInlineStyle",["immutable"],function(a,b,c,d,e,f,g){"use strict";var h={add:function(j,k,l){return i(j,k,l,true);},remove:function(j,k,l){return i(j,k,l,false);}};function i(j,k,l,m){var n=j.getBlockMap(),o=k.getStartKey(),p=k.getStartOffset(),q=k.getEndKey(),r=k.getEndOffset(),s=n.skipUntil(function(t,u){return u===o;}).takeUntil(function(t,u){return u===q;}).concat(new g.Map([[q,n.get(q)]])).map(function(t,u){var v,w;if(o===q){v=p;w=r;}else{v=u===o?p:0;w=u===q?r:t.getLength();}var x=t.getInlineStyles(),y=x.slice(v,w).map(function(z){return m?z|l:z&(~l);});return t.set('inlineStyles',x.slice(0,v).concat(y,x.slice(w)));});return j.merge({blockMap:n.merge(s).toOrderedMap(),selectionBefore:k,selectionAfter:k});}e.exports=h;},null);
__d("DocumentRemovalDirection",[],function(a,b,c,d,e,f){var g={BACKWARD:0,FORWARD:1};e.exports=g;},null);
__d("applyEntityToContentBlock",["immutable"],function(a,b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=i.getEntities(),n=m.slice(0,j).concat(g.Repeat(l,k-j).toVector(),m.slice(k));return i.set('entities',n.toVector());}e.exports=h;},null);
__d("applyEntityToContentState",["applyEntityToContentBlock"],function(a,b,c,d,e,f,g){"use strict";function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m;}).takeUntil(function(r,s){return s===o;}).merge(l.get(o)).map(function(r){var s=l.get(r),t,u;if(m===o){t=n;u=p;}else{t=r===m?n:0;u=r===o?0:s.getLength();}return g(s,t,u,k);});return i.merge({blockMap:l.merge(q).toOrderedMap(),selectionBefore:j,selectionAfter:j});}e.exports=h;},null);
__d("DocumentEntitySegmentsExperimental",["DocumentRemovalDirection"],function(a,b,c,d,e,f,g){var h=g.FORWARD,i={getRemovalRange:function(j,k,l,m,n){var o=l.split(' ');o=o.map(function(y,z){if(n===h){if(z>0)return ' '+y;}else if(z<o.length-1)return y+' ';return y;});var p=m,q,r,s=null,t=null;for(var u=0;u<o.length;u++){r=o[u];q=p+r.length;if(j<q&&p<k){if(s!==null){t=q;}else{s=p;t=q;}}else if(s!==null)break;p=q;}var v=m+l.length,w=s===m,x=t===v;if((!w&&x)||(w&&!x))if(n===h){if(t!==v)t++;}else if(s!==m)s--;return {start:s,end:t};}};e.exports=i;},null);
__d("checkRangeOverlap",["invariant"],function(a,b,c,d,e,f,g){function h(i,j,k,l){g(i<=j&&k<=l);return (i<l&&j>k);}e.exports=h;},null);
__d("getRangesForDocumentEntityExperimental",["findRangesImmutable","invariant"],function(a,b,c,d,e,f,g,h){function i(j,k){var l=[];g(j,function(m){return m===k;},function(m,n){l.push({start:m,end:n});});h(!!l.length);return l;}e.exports=i;},null);
__d("getCharacterRemovalRangeExperimental",["ComposedEntityMutability","DocumentEntity","DocumentEntitySegmentsExperimental","checkRangeOverlap","getRangesForDocumentEntityExperimental","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.MUTABLE,n=g.IMMUTABLE;function o(p,q,r){var s=q.getStartOffset(),t=q.getEndOffset(),u=p.getEntities(),v=u.get(s);if(!v)return q;var w=h.get(v),x=w.getMutability();if(x===m)return q;var y=k(u,v).filter(function(ba){return j(s,t,ba.start,ba.end);});l(y.length==1);var z=y[0];if(x===n)return q.merge({anchorOffset:z.start,focusOffset:z.end,isBackward:false});var aa=i.getRemovalRange(s,t,p.getText().slice(z.start,z.end),z.start,r);return q.merge({anchorOffset:aa.start,focusOffset:aa.end,isBackward:false});}e.exports=o;},null);
__d("generateBlockKey",[],function(a,b,c,d,e,f){var g={},h=Math.pow(2,24);function i(){var j;while(j===undefined||g.hasOwnProperty(j)||!isNaN(+j))j=Math.floor(Math.random()*h).toString(32);g[j]=true;return j;}e.exports=i;},null);
__d("removeEntitiesAtEdges",["ComposedEntityMutability","DocumentEntity","immutable","findRangesImmutable","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=g.MUTABLE;function m(p,q){var r=p.getBlockMap(),s={},t=q.getStartKey(),u=q.getStartOffset(),v=r.get(t),w=o(v,u);if(w)s[t]=w;var x=q.getEndKey(),y=q.getEndOffset(),z=r.get(x);if(t===x&&w)z=w;var aa=o(z,y);if(aa)s[x]=aa;if(k(s))return p.set('selectionAfter',q);return p.merge({blockMap:r.merge(s),selectionAfter:q});}function n(p,q,r){var s;j(p,function(t){return t===q;},function(t,u){if(t<=r&&u>=r)s={start:t,end:u};});return s;}function o(p,q){var r=p.getEntities(),s=r.get(q-1),t=r.get(q);if(t&&t===s){var u=h.get(t);if(u.getMutability()!==l){var v=n(r,t,q);return p.set('entities',r.slice(0,v.start).concat(i.Repeat(null,v.end-v.start),r.slice(v.end)).toVector());}}return null;}e.exports=m;},null);
__d("getContentStateFragment",["generateBlockKey","removeEntitiesAtEdges"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k){var l=k.getStartKey(),m=k.getStartOffset(),n=k.getEndKey(),o=k.getEndOffset(),p=h(j,k),q=p.getBlockMap(),r=q.keySeq(),s=r.indexOf(l),t=r.indexOf(n)+1;return q.slice(s,t).map(function(u,v){var w=g(),x=u.getText(),y=u.getInlineStyles(),z=u.getEntities();if(l===n)return u.merge({key:w,text:x.slice(m,o),inlineStyles:y.slice(m,o).toVector(),entities:z.slice(m,o).toVector()});if(v===l)return u.merge({key:w,text:x.slice(m),inlineStyles:y.slice(m).toVector(),entities:z.slice(m).toVector()});if(v===n)return u.merge({key:w,text:x.slice(0,o),inlineStyles:y.slice(0,o).toVector(),entities:z.slice(0,o).toVector()});return u.set('key',w);});}e.exports=i;},null);
__d("createOrderedMapFromBlockArray",["immutable"],function(a,b,c,d,e,f,g){function h(i){return g.Sequence(i).mapKeys(function(j){return i[j].getKey();}).toOrderedMap();}e.exports=h;},null);
__d("insertFragmentIntoContentState",["createOrderedMapFromBlockArray","generateBlockKey","invariant"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k,l,m){i(l.isCollapsed());var n=l.getStartKey(),o=l.getStartOffset(),p=k.getBlockMap(),q=m.count(),r,s;if(q===1){var t=p.get(n),u=m.first(),v=t.getText(),w=t.getInlineStyles(),x=t.getEntities(),y=t.merge({text:(v.slice(0,o)+u.getText()+v.slice(o)),inlineStyles:w.slice(0,o).concat(u.getInlineStyles(),w.slice(o)).toVector(),entities:x.slice(0,o).concat(u.getEntities(),x.slice(o)).toVector()});p=p.set(n,y);r=n;s=o+u.getText().length;return k.merge({blockMap:p.set(n,y).toOrderedMap(),selectionBefore:l,selectionAfter:l.merge({anchorKey:r,anchorOffset:s,focusKey:r,focusOffset:s,isBackward:false})});}var z=[];k.getBlockMap().forEach(function(aa,ba){if(ba!==n){z.push(aa);return;}var ca=aa.getText(),da=aa.getInlineStyles(),ea=aa.getEntities(),fa=ca.length,ga=ca.slice(0,o),ha=da.slice(0,o),ia=ea.slice(0,o),ja=m.first(),ka=aa.merge({text:ga+ja.getText(),inlineStyles:(ha.concat(ja.getInlineStyles()).toVector()),entities:(ia.concat(ja.getEntities()).toVector())});z.push(ka);m.slice(1,q-1).forEach(function(qa){z.push(qa.set('key',h()));});var la=ca.slice(o,fa),ma=da.slice(o,fa),na=ea.slice(o,fa),oa=m.last();r=h();var pa=oa.merge({key:r,text:oa.getText()+la,inlineStyles:(oa.getInlineStyles().concat(ma).toVector()),entities:(oa.getEntities().concat(na).toVector())});z.push(pa);});s=m.last().getLength();return k.merge({blockMap:g(z),selectionBefore:l,selectionAfter:l.merge({anchorKey:r,anchorOffset:s,focusKey:r,focusOffset:s,isBackward:false})});}e.exports=j;},null);
__d("insertTextIntoContentState",["immutable","invariant"],function(a,b,c,d,e,f,g,h){"use strict";function i(k,l,m,n,o){h(l.isCollapsed());var p=m.length;h(p===n.length&&p===o.length);if(!m.length)return k;var q=k.getBlockMap(),r=l.getStartKey(),s=l.getStartOffset(),t=q.get(r),u=t.getText(),v=t.merge({text:(u.slice(0,s)+m+u.slice(s,t.getLength())),inlineStyles:j(t.getInlineStyles(),s,n),entities:j(t.getEntities(),s,o)}),w=s+p;return k.merge({blockMap:q.set(r,v).toOrderedMap(),selectionAfter:l.merge({anchorOffset:w,focusOffset:w})});}function j(k,l,m){return g.Vector.prototype.splice.apply(k,[l,0].concat(m.toArray())).toVector();}e.exports=i;},null);
__d("removeRangeFromContentState",["immutable"],function(a,b,c,d,e,f,g){"use strict";function h(i,j){if(j.isCollapsed())return i;var k=i.getBlockMap(),l=j.getStartKey(),m=j.getStartOffset(),n=j.getEndKey(),o=j.getEndOffset(),p=k.get(l),q=k.get(n),r=p.merge({text:(p.getText().slice(0,m)+q.getText().slice(o)),inlineStyles:p.getInlineStyles().slice(0,m).concat(q.getInlineStyles().slice(o)).toVector(),entities:p.getEntities().slice(0,m).concat(q.getEntities().slice(o)).toVector()}),s=k.skipUntil(function(t,u){return u===l;}).takeUntil(function(t,u){return u===n;}).concat(new g.Map([[n,null]])).map(function(t,u){return u===l?r:null;});k=k.merge(s).filter(function(t){return !!t;});return i.merge({blockMap:k.toOrderedMap(),selectionBefore:j,selectionAfter:j.merge({anchorKey:l,anchorOffset:m,focusKey:l,focusOffset:m,isBackward:false})});}e.exports=h;},null);
__d("splitBlockInContentState",["generateBlockKey","invariant"],function(a,b,c,d,e,f,g,h){"use strict";function i(j,k){h(k.isCollapsed());var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getInlineStyles(),r=o.getEntities(),s=o.merge({text:p.slice(0,m),inlineStyles:q.slice(0,m).toVector(),entities:r.slice(0,m).toVector()}),t=g(),u=s.merge({key:t,text:p.slice(m),inlineStyles:q.slice(m).toVector(),entities:r.slice(m).toVector()}),v=n.takeUntil(function(y){return y===o;}),w=n.skipUntil(function(y){return y===o;}).rest(),x=v.concat([s,u],w).mapKeys(function(y,z){return z.getKey();}).toOrderedMap();return j.merge({blockMap:x,selectionBefore:k,selectionAfter:k.merge({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:false})});}e.exports=i;},null);
__d("DocumentModifierExperimental",["ComposedInlineStyle","ContentStateInlineStyle","DocumentRemovalDirection","immutable","applyEntityToContentState","getCharacterRemovalRangeExperimental","getContentStateFragment","insertFragmentIntoContentState","insertTextIntoContentState","invariant","removeEntitiesAtEdges","removeRangeFromContentState","setBlockTypeForContentState","splitBlockInContentState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u={replaceText:function(v,w,x,y,z){if(y===undefined)y=g.NONE;if(z===undefined)z=null;var aa=q(v,w),ba=r(aa,w);return o(ba,ba.getSelectionAfter(),x,j.Repeat(y,x.length).toVector(),j.Repeat(z,x.length).toVector());},insertText:function(v,w,x,y,z){p(w.isCollapsed());if(y===undefined)y=g.NONE;if(z===undefined)z=null;var aa=q(v,w);return o(aa,aa.getSelectionAfter(),x,j.Repeat(y,x.length).toVector(),j.Repeat(z,x.length).toVector());},moveText:function(v,w,x){var y=m(v,w),z=u.removeRange(v,w,i.BACKWARD);return u.replaceWithFragment(z,x,y);},replaceWithFragment:function(v,w,x){var y=q(v,w),z=r(y,w);return n(z,z.getSelectionAfter(),x);},removeRange:function(v,w,x){if(w.getAnchorKey()===w.getFocusKey()){var y=w.getAnchorKey(),z=w.getStartOffset(),aa=w.getEndOffset(),ba=v.getBlockForKey(y),ca=ba.getEntities(),da=ca.get(z),ea=ca.get(aa-1);if(da&&da===ea){var fa=l(ba,w,x);return r(v,fa);}}var ga=q(v,w);return r(ga,w);},splitBlock:function(v,w){var x=q(v,w),y=r(x,w);return t(y,y.getSelectionAfter());},applyInlineStyle:function(v,w,x){return h.add(v,w,x);},removeInlineStyle:function(v,w,x){return h.remove(v,w,x);},setBlockType:function(v,w,x){return s(v,w,x);},applyEntity:function(v,w,x){var y=q(v,w);return k(y,w,x);}};e.exports=u;},null);
__d("EditorChangeType",["keyMirror"],function(a,b,c,d,e,f,g){"use strict";var h=g({UNDO:true,REDO:true,CHANGE_SELECTION:true,INSERT_CHARACTERS:true,BACKSPACE_CHARACTER:true,DELETE_CHARACTER:true,REMOVE_RANGE:true,SPLIT_BLOCK:true,INSERT_FRAGMENT:true,CHANGE_INLINE_STYLE:true,CHANGE_BLOCK_TYPE:true,APPLY_ENTITY:true});e.exports=h;},null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=g.Vector,k=h.thatReturnsTrue,l='-',m=g.Record({start:null,end:null}),n=g.Record({start:null,end:null,decoratorKey:null,leaves:null}),o={generate:function(q,r){var s=q.getText().length;if(!s)return j.from([new n({start:0,end:0,decoratorKey:null,leaves:j.from([new m({start:0,end:0})])})]);var t=[],u=r?r.getDecorations(q):g.Repeat(null,s).toVector(),v=q.getInlineStyles();i(u,k,function(w,x){t.push(new n({start:w,end:x,decoratorKey:u.get(w),leaves:p(v.slice(w,x).toVector(),w)}));});return j.from(t);},getFingerprint:function(q){return q.map(function(r){var s=r.get('decoratorKey'),t=s!==null?s+'.'+(r.get('end')-r.get('start')):'';return ''+t+'.'+r.get('leaves').count();}).join(l);}};function p(q,r){var s=[];i(q,k,function(t,u){s.push(new m({start:t+r,end:u+r}));});return j.from(s);}e.exports=o;},null);
__d("EditorState",["BlockTree","ComposedInlineStyle","EditorChangeType","immutable","SelectionState"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=j.Record({allowUndo:true,currentContent:null,decorator:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:null,selection:null,treeMap:null,undoStack:null});m.create=function(t){t.treeMap=n(t.currentContent,t.decorator);return new m(new l(j.Map.from(t)));};m.set=function(t,u){var v=t.getImmutable().withMutations(function(w){var x=w.get('decorator'),y=x;if(u.decorator===null){y=null;}else if(u.decorator)y=u.decorator;var z=u.currentContent||t.getCurrentContent();if(y!==x){w.merge({treeMap:n(z,y),nativelyRenderedContent:null});return;}var aa=t.getCurrentContent();if(z!==aa)w.set('treeMap',o(t,z.getBlockMap(),y));w.merge(u);});return new m(v);};m.prototype.toJS=function(){return this.getImmutable().toJS();};m.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};m.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};m.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};m.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};m.prototype.getSelection=function(){return this.getImmutable().get('selection');};m.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};m.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};m.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};m.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};m.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};m.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};m.prototype.getCurrentInlineStyle=function(){var t=this.getInlineStyleOverride();if(t!=null)return t;var u=this.getCurrentContent(),v=this.getSelection();if(v.isCollapsed())return q(u,v);return r(u,v);};m.prototype.getBlockTree=function(t){return this.getImmutable().getIn(['treeMap',t]);};m.prototype.isAtDocumentStart=function(){var t=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(t,0,0);};m.prototype.isAtDocumentEnd=function(){var t=this.getCurrentContent(),u=t.getBlockMap(),v=u.last(),w=v.getLength();return this.getSelection().hasEdgeWithin(v.getKey(),w,w);};m.updateSelection=function(t,u,v){return m.set(t,{selection:u,forceSelection:!!v,nativelyRenderedContent:null,inlineStyleOverride:null});};m.moveFocusToEnd=function(t){var u=t.getCurrentContent(),v=u.getLastBlock(),w=v.getKey(),x=v.getLength();return m.updateSelection(t,new k({anchorKey:w,anchorOffset:x,focusKey:w,focusOffset:x,isBackward:false,hasFocus:true}),true);};m.push=function(t,u,v){if(t.getCurrentContent()===u)return t;var w=v!==i.INSERT_CHARACTERS;if(!t.getAllowUndo())return m.set(t,{currentContent:u,lastChangeType:v,selection:u.getSelectionAfter(),forceSelection:w,inlineStyleOverride:null});var x=t.getSelection(),y=t.getCurrentContent(),z=t.getUndoStack(),aa=u;if(x!==y.getSelectionAfter()||p(t,v)){z=z.push(y);aa=aa.set('selectionBefore',x);}else if(v===i.INSERT_CHARACTERS||v===i.BACKSPACE_CHARACTER||v===i.DELETE_CHARACTER)aa=aa.set('selectionBefore',y.getSelectionBefore());return m.set(t,{currentContent:aa,undoStack:z,redoStack:j.Stack.empty(),lastChangeType:v,selection:u.getSelectionAfter(),forceSelection:w,inlineStyleOverride:null});};m.undo=function(t){if(!t.getAllowUndo())return t;var u=t.getUndoStack(),v=u.peek();if(!v)return t;var w=t.getCurrentContent();return m.set(t,{currentContent:v,undoStack:u.shift(),redoStack:t.getRedoStack().push(w),forceSelection:true,inlineStyleOverride:null,lastChangeType:i.UNDO,nativelyRenderedContent:null,selection:w.getSelectionBefore()});};m.redo=function(t){if(!t.getAllowUndo())return t;var u=t.getRedoStack(),v=u.peek();if(!v)return t;var w=t.getCurrentContent();return m.set(t,{currentContent:v,undoStack:t.getUndoStack().push(w),redoStack:u.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:i.REDO,nativelyRenderedContent:null,selection:v.getSelectionAfter()});};function m(t){this.$EditorState0=t;}m.prototype.getImmutable=function(){return this.$EditorState0;};function n(t,u){return t.getBlockMap().map(function(v){return g.generate(v,u);}).toOrderedMap();}function o(t,u,v){var w=t.getCurrentContent().getBlockMap(),x=t.getImmutable().get('treeMap');return x.merge(u.filter(function(y,z){return y!==w.get(z);}).map(function(y){return g.generate(y,v);})).toOrderedMap();}function p(t,u){var v=t.getLastChangeType();return (u!==v||(u!==i.INSERT_CHARACTERS&&u!==i.BACKSPACE_CHARACTER&&u!==i.DELETE_CHARACTER));}function q(t,u){var v=u.getStartKey(),w=u.getStartOffset(),x=t.getBlockForKey(v),y=x.getInlineStyles();if(w>0)return y.get(w-1);if(x.getLength())return y.get(0);return s(t,v);}function r(t,u){var v=u.getStartKey(),w=u.getStartOffset(),x=t.getBlockForKey(v),y=x.getInlineStyles();if(w<x.getLength())return y.get(w);if(w>0)return y.get(w-1);return s(t,v);}function s(t,u){var v=t.getBlockBefore(u),w;while(v){w=v.getLength();if(w)return v.getInlineStyles().get(w-1);v=t.getBlockBefore(v.getKey());}return h.NONE;}e.exports=m;},null);
__d("AbstractTextEditorPlaceholder.Experimental.react",["EditorState","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.PropTypes,k=h.createClass({displayName:'AbstractTextEditorPlaceholder',propTypes:{editorState:j.instanceOf(g).isRequired,text:j.string.isRequired},shouldComponentUpdate:function(l,m){if(this.props.text!==l.text)return true;var n=this.props.editorState,o=l.editorState,p=n.getSelection(),q=o.getSelection();return (p.getHasFocus()!==q.getHasFocus());},render:function(){var l=this.props.editorState.getSelection().getHasFocus(),m=(("_5ywb")+(l?' '+"_5ywc":''));return (h.createElement("div",{className:m},this.props.text));}});e.exports=k;},null);
__d("DocumentCommands",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({UNDO:true,REDO:true,DELETE:true,DELETE_WORD:true,BACKSPACE:true,BACKSPACE_WORD:true,BACKSPACE_TO_END_OF_BLOCK:true,BOLD:true,ITALIC:true,UNDERLINE:true,CODE:true,INSERT_BLOCK_DELIMITER:true,TRANSPOSE_CHARACTERS:true,MOVE_SELECTION_TO_START_OF_BLOCK:true,MOVE_SELECTION_TO_END_OF_BLOCK:true,SECONDARY_CUT:true,SECONDARY_PASTE:true});e.exports=h;},null);
__d("getDefaultKeyBinding",["DocumentCommands","Keys","UserAgent"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=i.isPlatform('Mac OS X'),k=i.isPlatform('Windows'),l=i.isBrowser('Firefox'),m=j&&l&&l<29;function n(u){return u.ctrlKey&&!u.altKey;}function o(u){return j?(u.metaKey&&!u.altKey):n(u);}function p(u){return (j&&u.altKey)||n(u);}function q(u){if(o(u))return u.shiftKey?g.REDO:g.UNDO;}function r(u){if(k&&u.shiftKey)return null;return p(u)?g.DELETE_WORD:g.DELETE;}function s(u){if(o(u)&&j)return g.BACKSPACE_TO_END_OF_BLOCK;return p(u)?g.BACKSPACE_WORD:g.BACKSPACE;}function t(u){switch(u.keyCode){case 66:return o(u)?g.BOLD:null;case 68:return n(u)?g.DELETE:null;case 72:return n(u)?g.BACKSPACE:null;case 73:return o(u)?g.ITALIC:null;case 74:return o(u)?g.CODE:null;case 75:if(!k&&n(u))return g.SECONDARY_CUT;return null;case 79:return n(u)?g.INSERT_BLOCK_DELIMITER:null;case 84:return j&&n(u)?g.TRANSPOSE_CHARACTERS:null;case 85:return o(u)?g.UNDERLINE:null;case 89:if(n(u))return k?g.REDO:g.SECONDARY_PASTE;return null;case 90:return q(u)||null;case h.DELETE:return r(u);case h.BACKSPACE:return s(u);case h.LEFT:return (m&&o(u)?g.MOVE_SELECTION_TO_START_OF_BLOCK:null);case h.RIGHT:return (m&&o(u)?g.MOVE_SELECTION_TO_END_OF_BLOCK:null);default:return null;}}e.exports=t;},null);
__d("AbstractTextEditorProps.Experimental",["EditorState","React","emptyFunction","getDefaultKeyBinding"],function(a,b,c,d,e,f,g,h,i,j){var k=i.thatReturns(''),l=h.PropTypes,m={propTypes:{editorState:l.instanceOf(g).isRequired,placeholder:l.string,textAlignment:l.oneOf(['left','center','right']),blockStyleFn:l.func,inlineStyleFn:l.func,keyBindingFn:l.func,spellCheck:l.bool,handleReturn:l.func,handleKeyCommand:l.func,handleBeforeInput:l.func,handlePastedFiles:l.func,onEscape:l.func,onTab:l.func,onUpArrow:l.func,onDownArrow:l.func,onBlur:l.func,onFocus:l.func},getDefaultProps:function(){return {blockStyleFn:k,inlineStyleFn:k,keyBindingFn:j,spellCheck:false};}};e.exports=m;},null);
__d("ElementForBlockType",["ComposedBlockType"],function(a,b,c,d,e,f,g){var h={getElement:function(i){switch(i){case g.HEADER_ONE:return 'h2';case g.HEADER_TWO:return 'h3';case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'li';case g.BLOCKQUOTE:return 'blockquote';case g.MEDIA:return 'figure';default:return 'div';}},getWrapperElement:function(i){switch(i){case g.UNORDERED_LIST_ITEM:return 'ul';case g.ORDERED_LIST_ITEM:return 'ol';case g.CODE:return 'pre';default:return null;}}};e.exports=h;},null);
__d("ContentBlock",["immutable"],function(a,b,c,d,e,f,g){"use strict";var h=g.Record({key:null,type:null,text:null,inlineStyles:null,entities:null});for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){if(h!==null)h.apply(this,arguments);}k.prototype.getKey=function(){return this.key;};k.prototype.getType=function(){return this.type;};k.prototype.getText=function(){return this.text;};k.prototype.getLength=function(){return this.getText().length;};k.prototype.getInlineStyles=function(){return this.inlineStyles;};k.prototype.getEntities=function(){return this.entities;};e.exports=k;},null);
__d("DocumentCharacters",[],function(a,b,c,d,e,f){var g={BLOCK_DELIMITER:'\u000D',SOFT_NEWLINE:'\u000A',PHOTO:'\ud83d\udcf7',VIDEO:'\ud83d\udcf9'};e.exports=g;},null);
__d("TextEditorTextNode.react",["DOMPropertyOperations","ReactBrowserComponentMixin","ReactComponent","ReactElement","UserAgent_DEPRECATED","escapeTextForBrowser","getTextContentAccessor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=k.ie()<=11,o=i.BackendIDOperations,p=m();function q(y){return n?y[p]==='\n':y.tagName==='BR';}function r(y){o.dangerouslyReplaceNodeWithMarkupByID(y,n?u(y):t(y));}function s(y,z){if(n){o.updateTextContentByID(y,z);}else o.dangerouslyReplaceNodeWithMarkupByID(y,v(y,z));}function t(y){return '<br '+g.createMarkupForID(y)+' />';}function u(y){return v(y,'\n');}function v(y,z){return ('<span '+g.createMarkupForID(y)+'>'+l(z)+'</span>');}var w=function(y){};Object.assign(w.prototype,i.Mixin);Object.assign(w.prototype,h);Object.assign(w.prototype,{mountComponent:function(y,z,aa){i.Mixin.mountComponent.call(this,y,z,aa);if(this.props==='')return (n?u(y):t(y));return v(y,this.props);},receiveComponent:function(y,z){var aa=this._rootNodeID,ba=y.props,ca=this.getDOMNode();if(q(ca)){if(ba!==''){this.props=ba;s(aa,ba);}return;}if(ba===''){this.props=ba;r(aa);return;}var da=this.getDOMNode()[p];if(ba!==da)o.updateTextContentByID(aa,ba);},type:w});var x=function(y){return new j(w,null,null,null,null,y);};x.type=w;e.exports=x;},null);
__d("setDocumentSelectionExperimental",[],function(a,b,c,d,e,f){"use strict";function g(j,k,l,m,n){var o=a.getSelection(),p=j.getAnchorKey(),q=j.getAnchorOffset(),r=j.getFocusKey(),s=j.getFocusOffset(),t=j.getIsBackward();if(!o.extend&&t){var u=p,v=q;p=r;q=s;r=u;s=v;t=false;}var w=(p===l&&m<=q&&n>=q),x=(r===l&&m<=s&&n>=s);if(w&&x){o.removeAllRanges();i(o,k,q-m);h(o,k,s-m);return;}if(!t){if(w){o.removeAllRanges();i(o,k,q-m);}if(x)h(o,k,s-m);}else{if(x){o.removeAllRanges();i(o,k,s-m);}if(w){var y=o.focusNode,z=o.focusOffset;o.removeAllRanges();i(o,k,q-m);h(o,y,z);}}}function h(j,k,l){if(j.extend){j.extend(k,l);}else{var m=j.getRangeAt(0);m.setEnd(k,l);j.addRange(m.cloneRange());}}function i(j,k,l){var m=document.createRange();m.setStart(k,l);j.addRange(m);}e.exports=g;},null);
__d("TextEditorLeaf.Experimental.react",["DocumentCharacters","React","SelectionState","TextEditorTextNode.react","endsWith","setDocumentSelectionExperimental"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=h.PropTypes,n=g.SOFT_NEWLINE,o=3,p=h.createClass({displayName:'TextEditorLeaf',propTypes:{selection:m.instanceOf(i),start:m.number.isRequired,blockKey:m.string.isRequired,text:m.string.isRequired,style:m.number,inlineStyleFn:m.func.isRequired,isLast:m.bool.isRequired},_setSelection:function(){var q=this.props.selection;if(q==null||!q.getHasFocus())return;var r=this.props.start,s=r+this.props.text.length,t=this.props.blockKey;if(!q.hasEdgeWithin(t,r,s))return;var u=this.getDOMNode(),v=u.firstChild,w;if(v.nodeType===o){w=v;}else if(v.tagName==='BR'){w=u;}else w=v.firstChild;l(q,w,t,r,s);},shouldComponentUpdate:function(q){return (this.refs.leaf.getDOMNode().textContent!==q.text||q.forceSelection);},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var q=this.props.text;if(k(q,n)&&this.props.isLast)q+=n;var r;if(this.props.style)r=this.props.inlineStyleFn(this.props.style);return (h.createElement("span",{'data-offset-key':this.props.offsetKey,className:r,ref:"leaf"},j(q)));}});e.exports=p;},null);
__d("getScrollPosition",["getDocumentScrollElement","getUnboundedScrollPosition"],function(a,b,c,d,e,f,g,h){"use strict";function i(j){var k=g();if(j===window)j=k;var l=h(j),m=j===k?document.documentElement:j,n=j.scrollWidth-m.clientWidth,o=j.scrollHeight-m.clientHeight;l.x=Math.max(0,Math.min(l.x,n));l.y=Math.max(0,Math.min(l.y,o));return l;}e.exports=i;},null);
__d("TextEditorBlock.Experimental.react",["ContentBlock","DocumentCompositeDecorator.Experimental","DocumentOffsetKey","ElementForBlockType","React","SelectionState","Style","TextEditorLeaf.Experimental.react","UnicodeBidiDirection","cx","getElementPosition","getScrollPosition","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=k.PropTypes,v=o.LTR,w=o.RTL,x=10,y=k.createClass({displayName:'TextEditorBlock',propTypes:{block:u.instanceOf(g).isRequired,tree:u.object.isRequired,selection:u.instanceOf(l).isRequired,decorator:u.instanceOf(h),forceSelection:u.bool.isRequired,direction:u.string.isRequired,blockPropTypes:u.object,blockStyleFn:u.func.isRequired,inlineStyleFn:u.func.isRequired},shouldComponentUpdate:function(aa){return (this.props.block!==aa.block||this.props.tree!==aa.tree||this.props.direction!==aa.direction||(z(aa.selection,aa.block.getKey())&&aa.forceSelection));},componentDidMount:function(){var aa=this.props.selection,ba=aa.getEndKey();if(!aa.getHasFocus()||ba!==this.props.block.getKey())return;var ca=this.getDOMNode(),da=m.getScrollParent(ca),ea=r(da),fa;if(da===window){var ga=q(ca),ha=ga.y+ga.height,ia=s().height;fa=ha-ia;if(fa>0)window.scrollTo(ea.x,ea.y+fa+x);}else{var ja=ca.offsetHeight+ca.offsetTop,ka=da.offsetHeight+ea.y;fa=ja-ka;if(fa>0)da.scrollTop+=fa+x;}},_renderChildren:function(){var aa=this.props.block,ba=aa.getKey(),ca=aa.getText(),da=aa.getInlineStyles(),ea=aa.getEntities(),fa=this.props.tree.length-1,ga=z(this.props.selection,ba);return this.props.tree.map(function(ha,ia){var ja=ha.get('leaves'),ka=ja.length-1,la=ja.map(function(qa,ra){var sa=i.encode(ba,ia,ra),ta=qa.get('start'),ua=qa.get('end');return (k.createElement(n,{key:sa,offsetKey:sa,blockKey:ba,start:ta,selection:ga?this.props.selection:null,forceSelection:this.props.forceSelection,text:ca.slice(ta,ua),style:da.get(ta),inlineStyleFn:this.props.inlineStyleFn,isLast:ia===fa&&ra===ka}));}.bind(this)).toArray(),ma=ha.get('decoratorKey');if(ma===null)return la;var na=this.props.decorator.getComponentForKey(ma),oa=this.props.decorator.getPropsForKey(ma),pa=i.encode(ba,ia,0);return (k.createElement(na,Object.assign({},oa,{key:pa,entityKey:ea.get(ha.get('start')),offsetKey:pa}),la));}.bind(this)).toArray();},render:function(){var aa=this.props.block,ba=aa.getKey(),ca=t(this.props.blockStyleFn(aa.getType()),(("_209g")+(this.props.direction===v?' '+"_2vxa":'')+(this.props.direction===w?' '+"_2vxb":''))),da=j.getElement(aa.getType());return (k.createElement(da,Object.assign({style:{position:'relative'},'data-offset-key':i.encode(ba,0,0),className:ca},this.props.blockProps),this._renderChildren()));}});function z(aa,ba){return (aa.getAnchorKey()===ba||aa.getFocusKey()===ba);}e.exports=y;},null);
__d("isSelectionAtLeafStartExperimental",[],function(a,b,c,d,e,f){"use strict";function g(h){var i=h.getSelection(),j=i.getAnchorKey(),k=h.getBlockTree(j),l=i.getStartOffset(),m,n,o;for(var p=0;p<k.count();p++){m=k.get(p);if(l===m.get('start'))return true;if(l<m.get('end')){n=m.get('leaves');for(var q=0;q<n.count();q++){o=n.getIn([q,'start']);if(l===o)return true;if(l<o)return false;}}}return false;}e.exports=g;},null);
__d("TextEditorCompositionHandler.Experimental",["ComposedInlineStyle","DocumentModifierExperimental","EditorChangeType","EditorState","Keys","isSelectionAtLeafStartExperimental","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.NONE,o={onBeforeInput:function(p){this._textInputData=(this._textInputData||'')+p.data;},onCompositionStart:function(){this._stillComposing=true;},onCompositionEnd:function(p){this._resolved=false;this._stillComposing=false;m(function(){if(!this._resolved)o.resolveComposition.call(this);}.bind(this));},onKeyDown:function(p){if(p.which===k.RIGHT||p.which===k.LEFT)p.preventDefault();},onKeyPress:function(p){if(p.which===k.RETURN)p.preventDefault();},resolveComposition:function(){if(this._stillComposing)return;this._resolved=true;var p=this._textInputData;this._textInputData='';var q=j.set(this.props.editorState,{inCompositionMode:false}),r=!p||l(q);if(r)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(p){var s=h.replaceText(q.getCurrentContent(),q.getSelection(),p,n,null);this.update(j.push(q,s,i.INSERT_CHARACTERS));return;}if(r)this.update(j.set(q,{nativelyRenderedContent:null,forceSelection:true}));}};e.exports=o;},null);
__d("DocumentRemovableWord",["TokenizeUtil"],function(a,b,c,d,e,f,g){var h=g.getPunctuation();h=h.replace("\'","").slice(1,-1);var i='\\s'+h,j='^('+'['+i+']*'+'[^'+i+']+'+'|['+i+']+'+')',k=new RegExp(j),l='('+'[^'+i+']+'+'['+i+']*'+'|['+i+']+'+')$',m=new RegExp(l);function n(p,q){var r=q?m.exec(p):k.exec(p);return r?r[0]:null;}var o={getBackward:function(p){return n(p,true);},getForward:function(p){return n(p,false);}};e.exports=o;},null);
__d("TextEditorPasteHandler",["ComposedBlockType","ComposedInlineStyle","ContentBlock","DocumentCharacters","immutable","arrayContains","fillArray","generateBlockKey","getSafeBodyFromHTML"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.BOLD,q=h.ITALIC,r=h.UNDERLINE,s=h.NONE,t=j.BLOCK_DELIMITER,u='&nbsp;',v=j.SOFT_NEWLINE,w=' ',x=g.UNSTYLED,y=['p','h1','h2','h3','li','blockquote'],z={strong:p,b:p,em:q,i:q,u:r};function aa(){return {text:'',inlines:[],blocks:[]};}function ba(){return {text:w,inlines:[s],blocks:[]};}function ca(){return {text:v,inlines:[s],blocks:[]};}function da(la){return {text:t,inlines:[s],blocks:[la]};}function ea(la,ma){switch(la){case 'h1':return g.HEADER_ONE;case 'h2':return g.HEADER_TWO;case 'li':if(ma==='ol')return g.ORDERED_LIST_ITEM;return g.UNORDERED_LIST_ITEM;case 'blockquote':return g.BLOCKQUOTE;case 'pre':return g.CODE;default:return g.UNSTYLED;}}function fa(la,ma,na){var oa=z[la];if(oa){na|=oa;}else if(ma.style){na|=ma.style.fontWeight==='bold'?p:0;na|=ma.style.fontStyle==='italic'?q:0;na|=ma.style.textDecoration==='underline'?r:0;}return na;}function ga(la,ma){if(la.text.slice(-1)===t&&ma.text.slice(0,1)===t){la.text=la.text.slice(0,-1);la.inlines.pop();la.blocks.pop();}if(la.text.slice(-1)===t&&(ma.text===w||ma.text===v))return la;return {text:la.text+ma.text,inlines:la.inlines.concat(ma.inlines),blocks:la.blocks.concat(ma.blocks)};}function ha(la){return y.some(function(ma){return la.indexOf('<'+ma)!==-1;});}function ia(la,ma,na,oa,pa){var qa=la.nodeName.toLowerCase(),ra=false;if(qa==="#text"){var sa=la.textContent;if(sa.trim()==='')return ba();return {text:sa,inlines:m(sa.length,ma),blocks:[]};}if(qa==="br")return ca();var ta=aa(),ua;ma=fa(qa,la,ma);if(qa==="ul"||qa==="ol")na=qa;if(!oa&&l(pa,qa)){ta=da(ea(qa,na));oa=true;ra=true;}la=la.firstChild;while(la){ua=ia(la,ma,na,oa,pa);ta=ga(ta,ua);la=la.nextSibling;}if(ra)ta=ga(ta,da(x));return ta;}function ja(la){la=la.trim().replace(t,'').replace(v,w).replace(u,w);var ma=o(la);if(!ma)return null;var na=ha(la)?y:['div'],oa=ia(ma,0,'ul',false,na);if(oa.text.indexOf(t)===0)oa={text:oa.text.slice(1),inlines:oa.inlines.slice(1),blocks:oa.blocks};if(oa.text.slice(-1)===t){oa.text=oa.text.slice(0,-1);oa.inlines=oa.inlines.slice(0,-1);oa.blocks.pop();}if(oa.blocks.length===0)oa.blocks.push(x);if(oa.text.split(t).length===oa.blocks.length+1)oa.blocks.unshift(x);return oa;}var ka={processHTML:function(la){return ja(la);},processHTMLAsImmutable:function(la){var ma=ja(la);if(!ma)return null;var na=0;return ma.text.split(t).map(function(oa,pa){var qa=na+oa.length,ra=new i({key:n(),type:ma.blocks[pa],text:oa,inlineStyles:k.Vector.from(ma.inlines.slice(na,qa)),entities:k.Repeat(null,oa.length).toVector()});na=qa+1;return ra;});},processText:function(la){return {text:la,inlines:m(la.length,s),blocks:m(la.split(t).length,x)};},processTextAsImmutable:function(la){return la.map(function(ma){return new i({key:n(),type:x,text:ma,inlineStyles:k.Repeat(s,ma.length).toVector(),entities:k.Repeat(null,ma.length).toVector()});});}};e.exports=ka;},null);
__d("getSelectionOffsetKeyForNode",[],function(a,b,c,d,e,f){function g(h){return h.getAttribute&&h.getAttribute('data-offset-key');}e.exports=g;},null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],function(a,b,c,d,e,f,g){function h(i){while(i&&i!==document.documentElement){var j=g(i);if(j!=null)return j;i=i.parentNode;}return null;}e.exports=h;},null);
__d("getUpdatedSelectionState",["DocumentOffsetKey"],function(a,b,c,d,e,f,g){function h(i,j,k,l,m){var n=i.getSelection(),o=g.decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=g.decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=(n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x);if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}e.exports=h;},null);
__d("getDocumentSelectionExperimental",["DocumentCharacters","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.SOFT_NEWLINE;function m(r,s){var t=a.getSelection();if(t.rangeCount===0)return {selectionState:r.getSelection().set('hasFocus',false),needsRecovery:false};var u=t.anchorNode,v=t.focusNode,w=t.anchorOffset,x=t.focusOffset,y=u.nodeType===Node.TEXT_NODE,z=v.nodeType===Node.TEXT_NODE;if(y&&z)return {selectionState:j(r,h(u),w,h(v),x),needsRecovery:false};var aa=null,ba=null;if(y){aa={key:h(u),offset:w};ba=p(s,v,x);}else if(z){ba={key:h(v),offset:x};aa=p(s,u,w);}else{aa=p(s,u,w);ba=p(s,v,x);}return {selectionState:j(r,aa.key,aa.offset,ba.key,ba.offset),needsRecovery:true};}function n(r){while(r.firstChild&&i(r.firstChild))r=r.firstChild;return r;}function o(r){while(r.lastChild&&i(r.lastChild))r=r.lastChild;return r;}function p(r,s,t){var u=h(s);k(u!=null||r===s);if(t===0)return {key:u||i(n(s)),offset:0};var v=s.childNodes[t-1],w,x;if(!i(v)){w=u;x=q(v);}else{var y=o(v);w=i(y);x=q(y);}return {key:w,offset:x};}function q(r){var s=r.textContent;return s===l?0:s.length;}e.exports=m;},null);
__d("getTextContentFromFiles",["DocumentCharacters"],function(a,b,c,d,e,f,g){var h=g.BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true};function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r);if(o==m.length)n(p.join(h));});});}function l(m,n){if(!a.FileReader||(m.type&&!(m.type in j))){n('');return;}if(m.type===''&&i.test(m.name)){n(m.name.replace(i,''));return;}var o=new FileReader();o.onload=function(){n(o.result);};o.onerror=function(){n('');};o.readAsText(m);}e.exports=k;},null);
__d("TextEditorDragHandler.Experimental",["DataTransfer","DocumentModifierExperimental","EditorState","EditorChangeType","ex","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(event,s){var t,u;if(document.caretRangeFromPoint){var v=document.caretRangeFromPoint(event.x,event.y);t=v.startContainer;u=v.startOffset;}else if(event.rangeParent){t=event.rangeParent;u=event.rangeOffset;}else return null;var w=l(t);if(w===null){var x='';if(t.dataset&&t.dataset.reactid)x=' Node ID: '+t.dataset.reactid;throw new Error(k('Invalid range for drop event.'+x+' Offset: '+u));}return n(s,w,u,w,u);}var p={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(s){var t=new g(s.nativeEvent.dataTransfer),u=this.props.editorState,v=o(s.nativeEvent,u);s.preventDefault();this.exitCurrentMode();if(v===null)return;var w=t.getFiles();if(w.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(v,w))return;m(w,function(x){x&&this.update(r(u,v,x));}.bind(this));return;}if(this._internalDrag){this.update(q(u,v));return;}this.update(r(u,v,t.getText()));}};function q(s,t){var u=h.moveText(s.getCurrentContent(),s.getSelection(),t);return i.push(s,u,j.INSERT_FRAGMENT);}function r(s,t,u){var v=h.insertText(s.getCurrentContent(),t,u,s.getCurrentInlineStyle());return i.push(s,v,j.INSERT_FRAGMENT);}e.exports=p;},null);
__d("UnicodeBidiService",["Locale","UnicodeBidi","UnicodeBidiDirection","invariant"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(l){if(!l)l=g.getDirection();j(i.isStrong(l));this.defaultDir=l;this.reset();}k.prototype.reset=function(){this.lastDir=this.defaultDir;};k.prototype.getDirection=function(l){this.lastDir=h.getDirection(l,this.lastDir);return this.lastDir;};e.exports=k;},null);
__d("AbstractTextEditor.Experimental.react",["AbstractTextEditorPlaceholder.Experimental.react","AbstractTextEditorProps.Experimental","DocumentOffsetKey","DOMVector","EditorState","ElementForBlockType","React","TextEditorBlock.Experimental.react","TextEditorCompositionHandler.Experimental","TextEditorEditHandler.Experimental","TextEditorDragHandler.Experimental","TextEditorModes","UnicodeBidiService","UserAgent","cx","extendArray","requestAnimationFrame","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";var y=a.MutationObserver||a.WebKitMutationObserver,z=(t.isBrowser('Safari')||t.isBrowser('Mobile Safari'));function aa(da){return function(ea){var fa=this._handler&&this._handler[da];fa&&fa.call(this,ea);};}function ba(da){switch(da){case r.EDIT:return p;case r.COMPOSITE:return o;case r.DRAG:return q;case r.CUT:case r.RENDER:return null;}}var ca=m.createClass({displayName:'AbstractTextEditor',getDefaultProps:h.getDefaultProps,_onBlur:aa('onBlur'),_onFocus:aa('onFocus'),_onSelect:aa('onSelect'),_onKeyDown:aa('onKeyDown'),_onKeyUp:aa('onKeyUp'),_onKeyPress:aa('onKeyPress'),_onMouseDown:aa('onMouseDown'),_onMouseUp:aa('onMouseUp'),_onCharacterData:aa('onCharacterData'),_onCompositionStart:aa('onCompositionStart'),_onCompositionEnd:aa('onCompositionEnd'),_onDragStart:aa('onDragStart'),_onDragOver:aa('onDragOver'),_onDragEnd:aa('onDragEnd'),_onDrop:aa('onDrop'),_onCut:aa('onCut'),_onCopy:aa('onCopy'),_onPaste:aa('onPaste'),_onBeforeInput:aa('onBeforeInput'),_renderContents:function(){var da=this.props.editorState,ea=this.props.blockComponent||n,fa=da.getCurrentContent(),ga=da.getSelection(),ha=da.mustForceSelection(),ia=fa.getBlocksAsArray(),ja=[],ka=null,la=null,ma,na,oa,pa,qa,ra,sa;for(var ta=0;ta<ia.length;ta++){na=ia[ta];oa=na.getKey();pa=na.getText();qa=na.getType();ra=m.createElement(ea,{key:oa,tree:da.getBlockTree(oa),decorator:da.getDecorator(),block:na,selection:ga,forceSelection:ha,direction:this._bidiService.getDirection(pa),blockProps:this.props.blockProps,blockStyleFn:this.props.blockStyleFn,inlineStyleFn:this.props.inlineStyleFn});sa=l.getWrapperElement(qa);if(sa){if(la!==qa){ma=[];ka=m.createElement(sa,{className:"_4noe",key:oa+'-wrap','data-offset-key':i.encode(oa,0,0)},ma);la=qa;ja.push(ka);}ma.push(ra);}else{ma=null;ka=null;la=null;ja.push(ra);}}return ja;},_attachMutationObserver:function(){if(!y)return;var da=[],ea=function(){if(da.length>1){var fa=da[0],ga=fa.target;x(function(){if(this.isMounted()&&ga.parentNode)this._onCharacterData(ga);}.bind(this));}da.length=0;}.bind(this);this._mutationObserver=new y(function(fa){if(this._guardAgainstRender)return;if(z){if(da.length===0)w(ea);v(da,fa);}else{da=fa;ea();}}.bind(this));this._mutationObserver.observe(this.refs.editorContainer.getDOMNode(),{characterDataOldValue:true,characterData:true,subtree:true});},_renderPlaceholder:function(){var da=this.props.editorState.getCurrentContent(),ea=(this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!da.hasText());if(ea)return (m.createElement(g,{text:this.props.placeholder,editorState:this.props.editorState,textAlignment:this.props.textAlignment}));},render:function(){var da=this.props.textAlignment,ea=(("_5yw9")+(da==='left'?' '+"_48yc":'')+(da==='right'?' '+"_48yd":'')+(da==='center'?' '+"_48ye":''));return (m.createElement("div",{className:ea},this._renderPlaceholder(),m.createElement("div",{className:"_5ywa",ref:"editorContainer"},m.createElement("div",{ref:"editor",title:this.props.placeholder,role:this.props.role||"textbox",'aria-activedescendant':this.props.ariaActiveDescendantID,'aria-autocomplete':this.props.ariaAutoComplete,'aria-expanded':this.props.ariaExpanded,'aria-owns':this.props.ariaOwneeID,'aria-haspopup':this.props.ariaHasPopup,className:"_54-z",onBlur:this._onBlur,onFocus:this._onFocus,onSelect:this._onSelect,onMouseUp:this._onMouseUp,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onKeyPress:this._onKeyPress,onCut:this._onCut,onCopy:this._onCopy,onPaste:this._onPaste,onDragStart:this._onDragStart,onDragOver:this._onDragOver,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onBeforeInput:this._onBeforeInput,spellCheck:this.props.spellCheck,contentEditable:true},this._renderContents()))));},focus:function(){var da=this.props.editorState,ea=da.getSelection().getHasFocus(),fa=j.getScrollPosition();this.refs.editor.getDOMNode().focus();window.scrollTo(fa.x,fa.y);if(ea)return;this.update(k.updateSelection(da,da.getSelection().set('hasFocus',true),true));},blur:function(){this.refs.editor.getDOMNode().blur();},componentDidMount:function(){this._renderedVersion=null;this._clipboard=null;this._clonedEditor=null;this._guardAgainstRender=false;this._handler=p;this._attachMutationObserver();},shouldComponentUpdate:function(da){if(da.textAlignment!==this.props.textAlignment||da.ariaExpanded!==this.props.ariaExpanded||da.ariaActiveDescendantID!==this.props.ariaActiveDescendantID)return true;var ea=this.props.editorState,fa=da.editorState,ga=ea.getSelection().getHasFocus(),ha=fa.getSelection().getHasFocus();if(ga!==ha)return true;var ia=fa.getNativelyRenderedContent(),ja=ea.isInCompositionMode(),ka=fa.isInCompositionMode();if(ea===fa||(ia!==null&&fa.getCurrentContent()===ia)||(ja&&ka))return false;var la=ea.getCurrentContent(),ma=fa.getCurrentContent(),na=ea.getDecorator(),oa=fa.getDecorator();return (ja!==ka||la!==ma||na!==oa||fa.mustForceSelection());},componentWillUpdate:function(da){this._blockSelectEvents=true;this._bidiService.reset();},componentDidUpdate:function(){this._blockSelectEvents=false;},componentWillMount:function(){this._bidiService=new s();},componentWillUnmount:function(){if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null;}},setMode:function(da){this._handler=ba(da);},exitCurrentMode:function(){this.setMode(r.EDIT);},captureEditorDOM:function(){this._clonedEditor=this.refs.editor.getDOMNode().cloneNode(true);},restoreEditorDOM:function(){var da=this.refs.editorContainer.getDOMNode();da.innerHTML='';da.appendChild(this._clonedEditor);this.focus();this._clonedEditor=null;},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;},update:function(da){this.props.onChange(da);}});e.exports=ca;},null);
__d("createMentionEntity",["ComposedEntityMutability","ComposedEntityType","DocumentEntity"],function(a,b,c,d,e,f,g,h,i){function j(k){var l=k.getType().toLowerCase()==='user'?g.SEGMENTED:g.IMMUTABLE,m=k.getAuxiliaryData();return i.create(h.MENTION,l,{id:k.getUniqueID(),isWeak:m&&m.renderType==='non_member'});}e.exports=j;},null);
__d("MentionsInput.Experimental.react",["AbstractMentionsTextEditor.Experimental.react","EditorState","MentionsLayer.react","React","createMentionEntity","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.PropTypes,o=j.createClass({displayName:'MentionsInput',propTypes:{editorState:n.instanceOf(h).isRequired,mentionsSource:n.object,typeaheadView:n.func.isRequired,typeaheadViewPropTypes:n.object,spellCheck:n.bool,placeholder:n.string,className:n.string,autoflip:n.bool,handleContentReturn:n.func,handleDroppedFiles:n.func,handlePastedFiles:n.func,onAddMention:n.func,onShowMentions:n.func,onChange:n.func,onInputFocus:n.func,onInputBlur:n.func,onFile:n.func},blur:function(){this.refs.textEditor.blur();},focus:function(){this.refs.textEditor.focus();},render:function(){var p=m(this.props.className,"_5yk1");return (j.createElement("div",{className:p,onClick:this.focus,onFocus:this.focus},j.createElement(g,Object.assign({},this.props,{mentionResultsComponent:i,mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip},mentionCreationFn:k,ref:"textEditor",className:"_5yk2"}))));}});e.exports=o;},null);
__d("ContentState",["DocumentCharacters","immutable"],function(a,b,c,d,e,f,g,h){"use strict";var i=g.SOFT_NEWLINE,j=h.Record({blockMap:null,selectionBefore:null,selectionAfter:null});for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(){if(j!==null)j.apply(this,arguments);}m.prototype.getBlockMap=function(){return this.blockMap;};m.prototype.getSelectionBefore=function(){return this.selectionBefore;};m.prototype.getSelectionAfter=function(){return this.selectionAfter;};m.prototype.getBlockForKey=function(n){return this.getBlockMap().get(n);};m.prototype.getKeyBefore=function(n){return this.getBlockMap().reverse().keySeq().skipUntil(function(o){return o===n;}).skip(1).first();};m.prototype.getKeyAfter=function(n){return this.getBlockMap().keySeq().skipUntil(function(o){return o===n;}).skip(1).first();};m.prototype.getBlockAfter=function(n){return this.getBlockMap().skipUntil(function(o,p){return p===n;}).skip(1).first();};m.prototype.getBlockBefore=function(n){return this.getBlockMap().reverse().skipUntil(function(o,p){return p===n;}).skip(1).first();};m.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};m.prototype.getLastBlock=function(){return this.getBlockMap().last();};m.prototype.getPlainText=function(n){return this.getBlockMap().map(function(o){return o.getText();}).join(n||i);};m.prototype.hasText=function(){var n=this.getBlockMap();return (n.length>1||n.first().getLength()>0);};e.exports=m;},null);
__d("createEmptySelectionState",["SelectionState"],function(a,b,c,d,e,f,g){"use strict";function h(i){return new g({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:false,hasFocus:false});}e.exports=h;},null);
__d("createContentStateFromBlocks",["ContentState","createEmptySelectionState","createOrderedMapFromBlockArray"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k){var l=i(k),m=h(l.first().getKey());return new g({blockMap:l,selectionBefore:m,selectionAfter:m});}e.exports=j;},null);
__d("createPlainBlocksFromText",["ComposedBlockType","ComposedInlineStyle","ContentBlock","immutable","generateBlockKey"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.Repeat;function m(n){return n.map(function(o){var p=o.length;return new i({key:k(),text:o,type:g.UNSTYLED,inlineStyles:l(h.NONE,p).toVector(),entities:l(null,p).toVector()});});}e.exports=m;},null);
__d("createEditorStateWithMentions",["DocumentCharacters","EditorState","applyEntityToContentBlock","createContentStateFromBlocks","createInitialEditorState","createPlainBlocksFromText"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=new RegExp(g.SOFT_NEWLINE,'ig');function n(o){var p=o,q=p.text,r=p.ranges,s=p.decorator,t=p.mentionCreationFn,u=p.splitIntoBlocks,v=p.allowUndo,w,x;if(u===undefined)u=true;if(q){w=u?q.split(m):[q];x=[];var y=0;w.forEach(function(ba){x.push(y);y+=ba.length+1;});}else w=[''];var z=l(w);if(r&&r.length&&t)r.forEach(function(ba){var ca=t(ba.entity);if(ca===null)return;var da=ba.offset,ea,fa;for(var ga=0;ga<x.length;ga++){var ha=x[ga],ia=x[ga+1];if(ia===undefined||(da>=ha&&da<ia)){ea=z[ga];fa=da-ha;break;}}z[ga]=i(ea,fa,fa+ba.length,ca);});var aa=k(j(z,s),s);if(v===false)aa=h.set(aa,{allowUndo:false});return aa;}e.exports=n;},null);
__d("createEmptyEditorState",["createContentStateFromBlocks","createInitialEditorState","createPlainBlocksFromText"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(k){var l=i(['']),m=g(l);return h(m,k);}e.exports=j;},null);
__d("getMentionsTextForContentState",["ComposedEntityType","DocumentCharacters","DocumentEntity","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i,j,k){var l=/[\\\]:]/g;function m(o){var p=o.getBlockMap().map(function(q){var r=q.getText(),s=q.getEntities(),t=[];k(s,j.thatReturnsTrue,function(u,v){t.push(n(r.slice(u,v),s.get(u)));});return t.join('');});return p.join(h.SOFT_NEWLINE);}function n(o,p){if(p){var q=i.get(p);if(q.getType()===g.MENTION){o=o.replace(l,function(r){return '\\'+r;});return '@['+q.getData().id+':'+o+']';}else if(q.getType()===g.EMOTICON)return q.getData().originalEmoticon;}return o.replace('@[','@ [');}e.exports=m;},null);
__d("getVisibleValueForContentState",["ComposedEntityType","DocumentCharacters","DocumentEntity","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.EMOTICON,m=h.SOFT_NEWLINE;function n(o){var p=o.getBlockMap().map(function(q){var r=q.getText(),s=q.getEntities(),t='';k(q.getEntities(),j.thatReturnsTrue,function(u,v){var w=s.get(u);if(w===null){t+=r.slice(u,v);}else{var x=i.get(w);if(x.getType()===l){t+=x.getData().originalEmoticon;}else t+=r.slice(u,v);}});return t;});return p.join(m);}e.exports=n;},null);
__d("getTextAfterNearestEntity",[],function(a,b,c,d,e,f){function g(h,i){var j=h.getEntities(),k=i;while(j.get(k-1)===null)k--;return h.getText().slice(k,i);}e.exports=g;},null);
__d("applyEmoticonToContentState",["ComposedEntityMutability","ComposedEntityType","ComposedInlineStyle","DocumentEntity","EmoticonsList","applyEntityToContentBlock","getTextAfterNearestEntity"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n=i.NONE,o='\u3000',p=new RegExp(k.regexp.source,'g');function q(s,t){var u=t.getAnchorKey(),v=t.getAnchorOffset(),w=s.getBlockForKey(u),x=m(w,v),y,z;while(z!==null){z=p.exec(x);if(z!==null)y=z;}if(!y)return s;var aa=y[1];if(!aa&&v!==x.length)return s;var ba=y[2],ca=v-x.length,da=ca+y.index+y[1].length,ea=s.getBlockMap().set(u,r(w,ba,da));v-=(ba.length-1);return s.merge({blockMap:ea,selectionBefore:t,selectionAfter:t.merge({anchorOffset:v,focusOffset:v})});}function r(s,t,u){var v=j.create(h.EMOTICON,g.IMMUTABLE,{type:k.emotes[t],originalEmoticon:t}),w=s.getText(),x=s.getInlineStyles(),y=s.getEntities(),z=t.length;s=s.merge({text:(w.slice(0,u)+o+w.slice(u+z)),inlineStyles:(x.splice(u,z,n).toVector()),entities:(y.splice(u,z,v).toVector())});return l(s,u,u+o.length,v);}e.exports=q;},null);
__d("handleBeforeInputForEmoticon",["DocumentModifierExperimental","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){var k=new RegExp(/[\s'".,!?]/);function l(m,n){var o=m.getSelection();if(!o.isCollapsed()||!n||!k.test(n))return m;var p=m.getCurrentContent(),q=j(p,o);if(q===p)return m;var r=g.insertText(q,q.getSelectionAfter(),n);return i.push(m,r,h.INSERT_CHARACTERS);}e.exports=l;},null);
__d("handleSoftNewlineForEmoticon",["DocumentModifierExperimental","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){function k(l){var m=l.getCurrentContent(),n=l.getSelection(),o=j(m,n);if(o===m)return l;var p=g.splitBlock(o,o.getSelectionAfter());return i.push(l,p,h.SPLIT_BLOCK);}e.exports=k;},null);
__d("isSoftNewlineEvent",["Keys"],function(a,b,c,d,e,f,g){function h(i){return i.which===g.RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}e.exports=h;},null);
__d("UFIExperimentalMentionsInput.react",["BanzaiScuba","Bootloader","ComposedEntityMutability","ComposedEntityType","DocumentEntity","DocumentModifierExperimental","EditorChangeType","EditorState","Input","Keys","MentionsInput.Experimental.react","React","UserAgent","URI","createEditorStateWithMentions","createEmptyEditorState","createMentionEntity","cx","emptyFunction","getMentionsInputDecorator","getMentionsTextForContentState","getVisibleValueForContentState","handleBeforeInputForEmoticon","handleSoftNewlineForEmoticon","isSoftNewlineEvent","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=new g('ufi_tinder',null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addMobileDeviceFields:true,addUser:true}),ha=200,ia=((s.isPlatform('iOS')||s.isPlatform('Linux')||s.isPlatform('Mac OS X')||s.isPlatform('Windows'))&&(s.isBrowser('Chrome')||s.isBrowser('Firefox >= 16')||s.isBrowser('IE >= 9')||s.isBrowser('Opera >= 12')||s.isBrowser('Mobile Safari >= 6')||s.isBrowser('Safari >= 5')));function ja(na){var oa=na.map(function(pa){return {kind:'file',type:pa.type,getAsFile:y.thatReturns(pa)};});return {clipboardData:{items:oa}};}function ka(na){var oa=/^image\//;return na.filter(function(pa){return oa.test(pa.type);});}var la=r.createClass({displayName:'UFIExperimentalMentionsInput',getInitialState:function(){var na='',oa=[];if(this.props.initialData){na=this.props.initialData.value||'';oa=this.props.initialData.mentions||[];oa=oa.map(function(qa){return Object.assign({},qa,{entity:{uid:qa.uid,weakreference:qa.weakreference}});});}var pa=u({text:na,ranges:oa,decorator:z(),mentionCreationFn:ma});return {bootloaded:false,fullRender:!!(this.props.initialData&&this.props.initialData.value),typeaheadReporter:null,editorState:pa,mentionsSource:null,mentionableEntries:null,fallbackText:na};},hasEnteredText:function(){return !!this.state.editorState.getCurrentContent().getPlainText().trim();},focus:function(){this._triggerFullRender(function(){if(ia){this.refs.mentionsInput.focus();}else this.refs.textarea.getDOMNode().focus();}.bind(this));},submitComment:function(event){if(this._submitComment(event))this._clearDocumentState();},insertMention:function(na){this._triggerFullRender(function(){if(ia){var oa=this.state.editorState,pa=oa.getSelection(),qa=oa.getCurrentContent(),ra=pa.getStartKey(),sa=pa.getStartOffset(),ta=qa.getBlockForKey(ra),ua;if(ta.getText().substr(sa-1,1).trim().length>0){var va=l.replaceText(qa,pa,' ');pa=va.getSelectionAfter();ua=l.insertText(va,pa,na.getTitle(),oa.getCurrentInlineStyle(),w(na));}else ua=l.replaceText(qa,pa,na.getTitle(),oa.getCurrentInlineStyle(),w(na));oa=n.push(oa,ua,m.INSERT_FRAGMENT);oa=n.updateSelection(oa,oa.getSelection().set('hasFocus',true),true);this.setState({editorState:oa});this.focus();}else{this.refs.textarea.getDOMNode().focus();if(this.state.fallbackText.length){this.setState({fallbackText:this.state.fallbackText+' '+na.title});}else this.setState({fallbackText:na.title});}}.bind(this));},insertEmoticon:function(na){if(!ia){this.setState({fallbackText:this.state.fallbackText+' '+na});return;}var oa=this.state.editorState,pa=oa.getCurrentContent(),qa=oa.getSelection(),ra=pa.getBlockForKey(qa.getStartKey()).getText()[qa.getStartOffset()-1];if(ra&&ra!==' ')na=' '+na;var sa=pa.getBlockForKey(qa.getEndKey()).getText()[qa.getEndOffset()];if(sa&&sa!==' ')na+=' ';var ta=l.replaceText(oa.getCurrentContent(),oa.getSelection(),na);oa=n.push(oa,ta,m.INSERT_CHARACTERS);oa=n.updateSelection(oa,oa.getSelection().set('hasFocus',true),true);this.setState({editorState:oa});},_onChange:function(na){this.setState({editorState:na});},_clearDocumentState:function(){this.state.typeaheadReporter&&this.state.typeaheadReporter.sessionEnd();var na=v(z());this.setState({editorState:n.moveFocusToEnd(na)});},_handleContentReturn:function(na){if(ea(na)){var oa=da(this.state.editorState);if(oa===this.state.editorState){return false;}else{this.setState({editorState:oa});return true;}}if(this._submitComment(na)){this._clearDocumentState();return true;}return false;},_handleBeforeInput:function(na){var oa=ca(this.state.editorState,na);if(oa===this.state.editorState){return false;}else{this.setState({editorState:oa});return true;}},_submitComment:function(na){var oa=this.state.editorState.getCurrentContent(),pa=ba(oa),qa=aa(oa),ra={visibleValue:pa,encodedValue:qa},sa=o.getValue(this.refs.proxyInput.getDOMNode());if(sa){var ta=new t(a.location.href);ga.addNormal('path',ta.getPath());ga.addNormal('proxy_value',sa.substr(0,ha));ga.post();}return this.props.onEnterSubmit(ra,na);},_handleFiles:function(na){var oa=ka(na);if(oa.length){this.props.onPaste(ja(oa));return true;}return false;},_handleDroppedFiles:function(na,oa){return this._handleFiles(oa);},_handlePastedFiles:function(na){return this._handleFiles(na);},_onMentionsInputBlur:function(){this.state.typeaheadReporter&&this.state.typeaheadReporter.sessionEnd();this.props.onBlur&&this.props.onBlur();},_onMentionsInputFocus:function(){if(!this.state.bootloaded&&!this._currentlyBootloading){this._currentlyBootloading=true;h.loadModules(["TypeaheadMetricReporter","getMentionsSearchSource"],function(na,oa){if(!this.isMounted())return;var pa=new na({event_name:'tinder_mentions'});pa.sessionStart();var qa=oa(this.props.datasource,pa);qa.bootstrap();this.setState({typeaheadReporter:pa,bootloaded:true,mentionsSource:qa},function(){this._currentlyBootloading=false;}.bind(this));}.bind(this));}else if(this.state.typeaheadReporter)this.state.typeaheadReporter.sessionStart();this.props.onFocus&&this.props.onFocus();},_onShowMentions:function(na,oa){if(this.state.typeaheadReporter)this.state.typeaheadReporter.reportResults(na.map(function(pa){return pa.getUniqueID();}));},_onAddMention:function(na,oa,pa){if(this.state.typeaheadReporter){this.state.typeaheadReporter.reportSelect(na.getUniqueID(),na.getType(),oa,pa.button>=0);this.state.typeaheadReporter.sessionEnd();}},_onFallbackKeyDown:function(na){if(na.which!==p.RETURN)return;if(ea(na)||!this.state.fallbackText.trim())return;na.preventDefault();var oa={visibleValue:this.state.fallbackText,encodedValue:this.state.fallbackText};if(this.props.onEnterSubmit(oa,na))this.setState({fallbackText:''});},_onFallbackChange:function(na){this.setState({fallbackText:na.target.value});},_onFallbackBlur:function(na){this.props.onBlur&&this.props.onBlur();},_onFallbackFocus:function(na){this.props.onFocus&&this.props.onFocus();},_sortByRenderType:function(na,oa){var pa=na.getAuxiliaryData().renderType,qa=oa.getAuxiliaryData().renderType;if(pa===qa)return na.getOrder()-oa.getOrder();var ra=this.props.viewOptionsTypeObjectsOrder;return ra.indexOf(pa)-ra.indexOf(qa);},_triggerFullRender:function(na){this.setState({fullRender:true},na);},_renderFallback:function(){return (r.createElement("div",null,r.createElement("textarea",{ref:"textarea",className:"UFIAddCommentInput _5vbt",name:"add_comment_text",placeholder:this.props.placeholder,spellCheck:true,onKeyDown:this._onFallbackKeyDown,onChange:this._onFallbackChange,onBlur:this._onFallbackBlur,onFocus:this._onFallbackFocus,value:this.state.fallbackText})));},_renderProxyInput:function(){if(!this.props.hideProxyInput){var na="_5t55 mentionsHidden";return (r.createElement("input",{className:na,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus,tabIndex:"-1"}));}},_renderDummy:function(){var na="UFIAddCommentInput _5vr7 _2y3v";return (r.createElement("div",{onFocus:this._triggerFullRender.bind(null,y),onSelect:y,onMouseOver:this._triggerFullRender.bind(null,y)},this._renderProxyInput(),r.createElement("div",{className:na},this.props.placeholder)));},_renderMentionsInput:function(){var na="UFIAddCommentInput _5vr7",oa=Object.assign({mentionSortFn:(this.props.viewOptionsTypeObjectsOrder?this._sortByRenderType:null)},this.props.viewProps);return (r.createElement("div",null,this._renderProxyInput(),r.createElement(q,{ref:"mentionsInput",className:na,editorState:this.state.editorState,onChange:this._onChange,mentionsSource:this.state.mentionsSource,typeaheadView:this.props.viewComponent,typeaheadViewProps:oa,spellCheck:true,placeholder:this.props.placeholder,onAddMention:this._onAddMention,onShowMentions:this._onShowMentions,onFocus:this._onMentionsInputFocus,onBlur:this._onMentionsInputBlur,handleContentReturn:this._handleContentReturn,handleBeforeInput:this._handleBeforeInput,handlePastedFiles:this._handlePastedFiles,handleDroppedFiles:this._handleDroppedFiles,autoflip:this.props.autoflip})));},componentDidMount:function(){if(!ia){if(this.state.fallbackText)this.refs.textarea.getDOMNode().focus();}else if(this.state.editorState.getCurrentContent().hasText())fa(function(){this.isMounted()&&this.focus();}.bind(this));},render:function(){if(!ia)return this._renderFallback();if(!this.state.fullRender)return this._renderDummy();return this._renderMentionsInput();}});function ma(na){return k.create(j.MENTION,i.IMMUTABLE,{id:na.uid,isWeak:na.weakreference});}e.exports=la;},null);
__d("MentionsInputTypeaheadView.react",["MentionsTypeaheadViewItem.react","ReactPropTypes","React","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=i.createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:h.string,highlightedEntry:h.object,entries:h.array.isRequired,onSelect:h.func.isRequired,onHighlight:h.func,onRenderHighlight:h.func},_renderItem:function(l){var m=l===this.props.highlightedEntry;return (i.createElement(g,{key:l.getUniqueID(),entry:l,highlighted:m,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var l=(("_5u8_")+(!this.props.entries.length?' '+"_5u90":''));return (i.createElement("ul",{className:l,role:"listbox",id:this.props.id},this.props.entries.map(this._renderItem)));}});e.exports=k;},null);